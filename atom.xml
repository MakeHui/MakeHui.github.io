<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MakeHui&#39;s 超平和バスターズはずっとなかよし</title>
  <subtitle>あの日見た花の名前を僕達はまだ知らない。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://huyaohui.com/"/>
  <updated>2017-03-06T10:21:02.000Z</updated>
  <id>http://huyaohui.com/</id>
  
  <author>
    <name>MakeHui</name>
    <email>hulifu521003@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>WebSocket 浅析</title>
    <link href="http://huyaohui.com/2017/03/06/WebSocket-%E6%B5%85%E6%9E%90/"/>
    <id>http://huyaohui.com/2017/03/06/WebSocket-浅析/</id>
    <published>2017-03-06T09:33:56.000Z</published>
    <updated>2017-03-06T10:21:02.000Z</updated>
    
    <content type="html">&lt;p&gt;最近应用中正好使用到&lt;code&gt;WebSocket&lt;/code&gt;, &lt;code&gt;腾讯Bugly&lt;/code&gt;就发表了这篇文章, 虽然也不是非常全面但是把&lt;code&gt;WebSocket&lt;/code&gt;的基本概念和使用都说到了, 还是相当受用, 故转载过来.&lt;br&gt;随后我会把把一些我遇到的转载文章中没有提及的问题补充到本文末尾. &lt;a href=&quot;http://t.cn/RiCKZ0R&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原文地址-&amp;gt;&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;前言&quot;&gt;前言&lt;/h2&gt;&lt;p&gt;在WebSocket API尚未被众多浏览器实现和发布的时期，开发者在开发需要接收来自服务器的实时通知应用程序时，不得不求助于一些“hacks”来模拟实时连接以实现实时通信，最流行的一种方式是长轮询 。 长轮询主要是发出一个HTTP请求到服务器，然后保持连接打开以允许服务器在稍后的时间响应（由服务器确定）。为了这个连接有效地工作，许多技术需要被用于确保消息不错过，如需要在服务器端缓存和记录多个的连接信息（每个客户）。虽然长轮询是可以解决这一问题的，但它会耗费更多的资源，如CPU、内存和带宽等，要想很好的解决实时通信问题就需要设计和发布一种新的协议。&lt;/p&gt;
&lt;p&gt;在WebSocket API尚未被众多浏览器实现和发布的时期，开发者在开发需要接收来自服务器的实时通知应用程序时，不得不求助于一些“hacks”来模拟实时连接以实现实时通信，最流行的一种方式是长轮询 。 长轮询主要是发出一个HTTP请求到服务器，然后保持连接打开以允许服务器在稍后的时间响应（由服务器确定）。为了这个连接有效地工作，许多技术需要被用于确保消息不错过，如需要在服务器端缓存和记录多个的连接信息（每个客户）。虽然长轮询是可以解决这一问题的，但它会耗费更多的资源，如CPU、内存和带宽等，要想很好的解决实时通信问题就需要设计和发布一种新的协议。&lt;/p&gt;
&lt;p&gt;WebSocket 是伴随HTML5发布的一种新协议。它实现了浏览器与服务器全双工通信(full-duplex)，可以传输基于消息的文本和二进制数据。WebSocket 是浏览器中最靠近套接字的API，除最初建立连接时需要借助于现有的HTTP协议，其他时候直接基于TCP完成通信。它是浏览器中最通用、最灵活的一个传输机制，其极简的API 可以让我们在客户端和服务器之间以数据流的形式实现各种应用数据交换（包括JSON 及自定义的二进制消息格式），而且两端都可以随时向另一端发送数据。在这个简单的API 之后隐藏了很多的复杂性，而且还提供了更多服务，如：&lt;/p&gt;
&lt;p&gt;连接协商和同源策略；&lt;br&gt;与既有 HTTP 基础设施的互操作；&lt;br&gt;基于消息的通信和高效消息分帧；&lt;br&gt;子协议协商及可扩展能力。&lt;br&gt;所幸，浏览器替我们完成了上述工作，我们只需要简单的调用即可。任何事物都不是完美的，设计限制和性能权衡始终会有，利用WebSocket 也不例外，在提供自定义数据交换协议同时，也不再享有在一些本由浏览器提供的服务和优化，如状态管理、压缩、缓存等。&lt;/p&gt;
&lt;p&gt;随着HTML5的发布，越来越多的浏览器开始支持WebSocket，如果你的应用还在使用长轮询，那就可以考虑切换了。下面的图表显示了在一种常见的使用案例下，WebSocket和长轮询之间的带宽消耗差异：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2G6hAgMRkpuFjy1zeXXc.6FXa_!!1134915854.gif&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;WebSocket_API&quot;&gt;WebSocket API&lt;/h3&gt;&lt;p&gt;WebSocket 对象提供了一组 API，用于创建和管理 WebSocket 连接，以及通过连接发送和接收数据。浏览器提供的WebSocket API很简洁，调用示例如下：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; ws = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; WebSocket(&lt;span class=&quot;string&quot;&gt;&#39;wss://example.com/socket&#39;&lt;/span&gt;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 创建安全WebSocket 连接（wss）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.onerror = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;error&lt;/span&gt;) &lt;/span&gt;&amp;#123; ... &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 错误处理&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.onclose = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123; ... &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 关闭时调用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.onopen = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 连接建立时调用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ws.send(&lt;span class=&quot;string&quot;&gt;&quot;Connection established. Hello server!&quot;&lt;/span&gt;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 向服务端发送消息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.onmessage = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;msg&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 接收服务端发送的消息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(msg.data &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; Blob) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 处理二进制信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        processBlob(msg.data);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        processText(msg.data); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 处理文本信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;接收和发送数据&quot;&gt;接收和发送数据&lt;/h4&gt;&lt;p&gt;WebSocket提供了极简的API，开发者可以轻松的调用，浏览器会为我们完成缓冲、解析、重建接收到的数据等工作。应用只需监听onmessage事件，用回调处理返回数据即可。 WebSocket支持文本和二进制数据传输，浏览器如果接收到文本数据，会将其转换为DOMString 对象，如果是二进制数据或Blob 对象，可直接将其转交给应用或将其转化为ArrayBuffer，由应用对其进行进一步处理。从内部看，协议只关注消息的两个信息：净荷长度和类型（前者是一个可变长度字段），据以区别UTF-8 数据和二进制数据。示例如下：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; wss = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; WebSocket(&lt;span class=&quot;string&quot;&gt;&#39;wss://example.com/socket&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.binaryType = &lt;span class=&quot;string&quot;&gt;&quot;arraybuffer&quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 接收数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wss.onmessage = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;msg&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(msg.data &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;ArrayBuffer&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    processArrayBuffer(msg.data);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    processText(msg.data);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 发送数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.onopen = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  socket.send(&lt;span class=&quot;string&quot;&gt;&quot;Hello server!&quot;&lt;/span&gt;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  socket.send(&lt;span class=&quot;built_in&quot;&gt;JSON&lt;/span&gt;.stringify(&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;msg&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;payload&#39;&lt;/span&gt;&amp;#125;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; buffer = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;ArrayBuffer&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;128&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  socket.send(buffer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; intview = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Uint32Array&lt;/span&gt;(buffer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  socket.send(intview);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; blob = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Blob([buffer]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  socket.send(blob); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;Blob 对象是包含有只读原始数据的类文件对象，可存储二进制数据，它会被写入磁盘；ArrayBuffer （缓冲数组）是一种用于呈现通用、固定长度的二进制数据的类型，作为内存区域可以存放多种类型的数据。&lt;/p&gt;
&lt;p&gt;对于将要传输的二进制数据，开发者可以决定以何种方式处理，可以更好的处理数据流，Blob 对象一般用来表示一个不可变文件对象或原始数据，如果你不需要修改它或者不需要把它切分成更小的块，那这种格式是理想的；如果你还需要再处理接收到的二进制数据，那么选择ArrayBuffer 应该更合适。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;WebSocket 提供的信道是全双工的，在同一个TCP 连接上，可以双向传输文本信息和二进制数据，通过数据帧中的一位（bit）来区分二进制或者文本。WebSocket 只提供了最基础的文本和二进制数据传输功能，如果需要传输其他类型的数据，就需要通过额外的机制进行协商。WebSocket 中的send( ) 方法是异步的：提供的数据会在客户端排队，而函数则立即返回。在传输大文件时，不要因为回调已经执行，就错误地以为数据已经发送出去了，数据很可能还在排队。要监控在浏览器中排队的数据量，可以查询套接字的bufferedAmount 属性：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; ws = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; WebSocket(&lt;span class=&quot;string&quot;&gt;&#39;wss://example.com/socket&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.onopen = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    subscribeToApplicationUpdates(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;evt&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (ws.bufferedAmount == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ws.send(evt.data); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;前面的例子是向服务器发送应用数据，所有WebSocket 消息都会按照它们在客户端排队的次序逐个发送。因此，大量排队的消息，甚至一个大消息，都可能导致排在它后面的消息延迟——队首阻塞！为解决这个问题，应用可以将大消息切分成小块，通过监控bufferedAmount 的值来避免队首阻塞。甚至还可以实现自己的优先队列，而不是盲目都把它们送到套接字上排队。要实现最优化传输，应用必须关心任意时刻在套接字上排队的是什么消息！&lt;/p&gt;
&lt;h4 id=&quot;子协议协商&quot;&gt;子协议协商&lt;/h4&gt;&lt;p&gt;在以往使用HTTP 或XHR 协议来传输数据时，它们可以通过每次请求和响应的HTTP 首部来沟通元数据，以进一步确定传输的数据格式，而WebSocket 并没有提供等价的机制。上文已经提到WebSocket只提供最基础的文本和二进制数据传输，对消息的具体内容格式是未知的。因此，如果WebSocket需要沟通关于消息的元数据，客户端和服务器必须达成沟通这一数据的子协议，进而间接地实现其他格式数据的传输。下面是一些可能策略的介绍：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;客户端和服务器可以提前确定一种固定的消息格式，比如所有通信都通过 JSON编码的消息或者某种自定义的二进制格式进行，而必要的元数据作为这种数据结构的一个部分；&lt;/li&gt;
&lt;li&gt;如果客户端和服务器要发送不同的数据类型，那它们可以确定一个双方都知道的消息首部，利用它来沟通说明信息或有关净荷的其他解码信息；&lt;/li&gt;
&lt;li&gt;混合使用文本和二进制消息可以沟通净荷和元数据，比如用文本消息实现 HTTP首部的功能，后跟包含应用净荷的二进制消息。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;上面介绍了一些可能的策略来实现其他格式数据的传输，确定了消息的串行格式化，但怎么确保客户端和服务端是按照约定发送和处理数据，这个约定客户端和服务端是如何协商的呢？这就需要WebSocket 提供一个机制来协商，这时WebSocket构造器方法的第二个可选参数就派上用场了，通过这个参数客户端和服务端就可以根据约定好的方式处理发送及接收到的数据。&lt;/p&gt;
&lt;p&gt;WebSocket构造器方法如下所示：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;WebSocket WebSocket(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; DOMString url, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 表示要连接的URL。这个URL应该为响应WebSocket的地址。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; optional DOMString protocols &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 可以是一个单个的协议名字字符串或者包含多个协议名字字符串的数组。默认设为一个空字符串。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过上述WebSocket构造器方法的第二个参数，客户端可以在初次连接握手时，可以告知服务器自己支持哪种协议。如下所示：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; ws = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; WebSocket(&lt;span class=&quot;string&quot;&gt;&#39;wss://example.com/socket&#39;&lt;/span&gt;,[&lt;span class=&quot;string&quot;&gt;&#39;appProtocol&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;appProtocol-v2&#39;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ws.onopen = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (ws.protocol == &lt;span class=&quot;string&quot;&gt;&#39;appProtocol-v2&#39;&lt;/span&gt;) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如上所示，WebSocket 构造函数接受了一个可选的子协议名字的数组，通过这个数组，客户端可以向服务器通告自己能够理解或希望服务器接受的协议。当服务器接收到该请求后，会根据自身的支持情况，返回相应信息。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有支持的协议，则子协议协商成功，触发客户端的onopen回调，应用可以查询WebSocket 对象上的protocol 属性，从而得知服务器选定的协议；&lt;/li&gt;
&lt;li&gt;没有支持的协议，则协商失败，触发onerror 回调，连接断开。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;WS与WSS&quot;&gt;WS与WSS&lt;/h4&gt;&lt;p&gt;WebSocket 资源URI采用了自定义模式：ws 表示纯文本通信（ 如ws://example.com/socket），wss 表示使用加密信道通信（TCP+TLS）。为什么不使用http而要自定义呢？&lt;/p&gt;
&lt;p&gt;WebSocket 的主要目的，是在浏览器中的应用与服务器之间提供优化的、双向通信机制。可是，WebSocket 的连接协议也可以用于浏览器之外的场景，可以通过非HTTP协商机制交换数据。考虑到这一点，HyBi Working Group 就选择采用了自定义的URI模式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ws协议：普通请求，占用与http相同的80端口；&lt;/li&gt;
&lt;li&gt;wss协议：基于SSL的安全传输，占用与tls相同的443端口。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;各自的URI如下：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ws-URI = &lt;span class=&quot;string&quot;&gt;&quot;ws:&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;//&quot;&lt;/span&gt; host [ &lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt; port ] path [ &lt;span class=&quot;string&quot;&gt;&quot;?&quot;&lt;/span&gt; query ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wss-URI = &lt;span class=&quot;string&quot;&gt;&quot;wss:&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;//&quot;&lt;/span&gt; host [ &lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt; port ] path [ &lt;span class=&quot;string&quot;&gt;&quot;?&quot;&lt;/span&gt; query ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;很多现有的HTTP 中间设备可能不理解新的WebSocket 协议，而这可能导致各种问题：盲目的连接升级、意外缓冲WebSocket 帧、不明就里地修改内容、把WebSocket 流量误当作不完整的HTTP 通信，等等。这时WSS就提供了一种不错的解决方案，它建立一条端到端的安全通道，这个端到端的加密隧道对中间设备模糊了数据，因此中间设备就不能再感知到数据内容，也就无法再对请求做特殊处理。&lt;/p&gt;
&lt;h3 id=&quot;WebSocket协议&quot;&gt;WebSocket协议&lt;/h3&gt;&lt;p&gt;HyBi Working Group 制定的WebSocket 通信协议（RFC 6455）包含两个高层组件：开放性HTTP 握手用于协商连接参数，二进制消息分帧机制用于支持低开销的基于消息的文本和二进制数据传输。WebSocket 协议尝试在既有HTTP 基础设施中实现双向HTTP 通信，因此也使用HTTP 的80 和443 端口。不过，这个设计不限于通过HTTP 实现WebSocket 通信，未来的实现可以在某个专用端口上使用更简单的握手，而不必重新定义一个协议。WebSocket 协议是一个独立完善的协议，可以在浏览器之外实现。不过，它的主要应用目标还是实现浏览器应用的双向通信。&lt;/p&gt;
&lt;h4 id=&quot;数据成帧&quot;&gt;数据成帧&lt;/h4&gt;&lt;p&gt;WebSocket 使用了自定义的二进制分帧格式，把每个应用消息切分成一或多个帧，发送到目的地之后再组装起来，等到接收到完整的消息后再通知接收端。基本的成帧协议定义了帧类型有操作码、有效载荷的长度，指定位置的Extension data和Application data，统称为Payload data，保留了一些特殊位和操作码供后期扩展。在打开握手完成后，终端发送一个关闭帧之前的任何时间里，数据帧可能由客户端或服务器的任何一方发送。具体的帧格式如下所示：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; 0                   1                   2                   3&amp;#10; 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1&amp;#10;+-+-+-+-+-------+-+-------------+-------------------------------+&amp;#10;|F|R|R|R| opcode|M| Payload len |    Extended payload length    |&amp;#10;|I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |&amp;#10;|N|V|V|V|       |S|             |   (if payload len==126/127)   |&amp;#10;| |1|2|3|       |K|             |                               |&amp;#10;+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +&amp;#10;|     Extended payload length continued, if payload len == 127  |&amp;#10;+ - - - - - - - - - - - - - - - +-------------------------------+&amp;#10;|                               |Masking-key, if MASK set to 1  |&amp;#10;+-------------------------------+-------------------------------+&amp;#10;| Masking-key (continued)       |          Payload Data         |&amp;#10;+-------------------------------- - - - - - - - - - - - - - - - +&amp;#10;:                     Payload Data continued ...                :&amp;#10;+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +&amp;#10;|                     Payload Data continued ...                |&amp;#10;+---------------------------------------------------------------+&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;FIN： 1 bit 。表示此帧是否是消息的最后帧，第一帧也可能是最后帧。&lt;/li&gt;
&lt;li&gt;RSV1，RSV2，RSV3： 各1 bit 。必须是0，除非协商了扩展定义了非0的意义。&lt;/li&gt;
&lt;li&gt;opcode：4 bit。表示被传输帧的类型：x0 表示一个后续帧；x1 表示一个文本帧；x2 表示一个二进制帧；x3-7 为以后的非控制帧保留；x8 表示一个连接关闭；x9 表示一个ping；xA 表示一个pong；xB-F 为以后的控制帧保留。&lt;/li&gt;
&lt;li&gt;Mask： 1 bit。表示净荷是否有掩码（只适用于客户端发送给服务器的消息）。&lt;/li&gt;
&lt;li&gt;Payload length： 7 bit, 7 + 16 bit, 7 + 64 bit。 净荷长度由可变长度字段表示： 如果是 0~125，就是净荷长度；如果是 126，则接下来 2 字节表示的 16 位无符号整数才是这一帧的长度； 如果是 127，则接下来 8 字节表示的 64 位无符号整数才是这一帧的长度。&lt;/li&gt;
&lt;li&gt;Masking-key：0或4 Byte。 用于给净荷加掩护，客户端到服务器标记。&lt;/li&gt;
&lt;li&gt;Extension data： x Byte。默认为0 Byte，除非协商了扩展。&lt;/li&gt;
&lt;li&gt;Application data： y Byte。 在”Extension data”之后，占据了帧的剩余部分。&lt;/li&gt;
&lt;li&gt;Payload data： (x + y) Byte。”extension data” 后接 “application data”。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;帧：最小的通信单位，包含可变长度的帧首部和净荷部分，净荷可能包含完整或部分应用消息。&lt;br&gt;消息：一系列帧，与应用消息对等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;是否把消息分帧由客户端和服务器实现决定，应用并不需要关注WebSocket帧和如何分帧，因为客户端（如浏览器）和服务端为完成该工作。那么客户端和服务端是按照什么规则进行分帧的呢？RFC 6455规定的分帧规则如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;一个未分帧的消息包含单个帧，FIN设置为1，opcode非0。&lt;/li&gt;
&lt;li&gt;一个分帧了的消息包含：开始于：单个帧，FIN设为0，opcode非0；后接 ：0个或多个帧，FIN设为0，opcode设为0；终结于：单个帧，FIN设为1，opcode设为0。一个分帧了消息在概念上等价于一个未分帧的大消息，它的有效载荷长度等于所有帧的有效载荷长度的累加；然而，有扩展时，这可能不成立，因为扩展定义了出现的Extension data的解释。例如，Extension data可能只出现在第一帧，并用于后续的所有帧，或者Extension data出现于所有帧，且只应用于特定的那个帧。在缺少Extension data时，下面的示例示范了分帧如何工作。举例：如一个文本消息作为三个帧发送，第一帧的opcode是0x1，FIN是0，第二帧的opcode是0x0，FIN是0，第三帧的opcode是0x0，FIN是1。 　&lt;/li&gt;
&lt;li&gt;控制帧可能被插入到分帧了消息中，控制帧必须不能被分帧。如果控制帧不能插入，例如，如果是在一个大消息后面，ping的延迟将会很长。因此要求处理消息帧中间的控制帧。&lt;/li&gt;
&lt;li&gt;消息的帧必须以发送者发送的顺序传递给接受者。&lt;/li&gt;
&lt;li&gt;一个消息的帧必须不能交叉在其他帧的消息中，除非有扩展能够解释交叉。&lt;/li&gt;
&lt;li&gt;一个终端必须能够处理消息帧中间的控制帧。&lt;/li&gt;
&lt;li&gt;一个发送者可能对任意大小的非控制消息分帧。&lt;/li&gt;
&lt;li&gt;客户端和服务器必须支持接收分帧和未分帧的消息。&lt;/li&gt;
&lt;li&gt;由于控制帧不能分帧，中间设施必须不尝试改变控制帧。&lt;/li&gt;
&lt;li&gt;中间设施必须不修改消息的帧，如果保留位的值已经被使用，且中间设施不明白这些值的含义。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在遵循了上述分帧规则之后，一个消息的所有帧属于同样的类型，由第一个帧的opcdoe指定。由于控制帧不能分帧，消息的所有帧的类型要么是文本、二进制数据或保留的操作码中的一个。&lt;/p&gt;
&lt;p&gt;虽然客户端和服务端都遵循同样的分帧规则，但也是有些差异的。在客户端往服务端发送数据时，为防止客户端中运行的恶意脚本对不支持WebSocket 的中间设备进行缓存投毒攻击（cache poisoning attack），发送帧的净荷都要使用帧首部中指定的值加掩码。被标记的帧必须设置MASK域为1，Masking-key必须完整包含在帧里，它用于标记Payload data。Masking-key是由客户端随机选择的32位值，标记键应该是不可预测的，给定帧的Masking-key必须不能简单到服务器或代理可以预测Masking-key是用于一序列帧的，不可预测的Masking-key是阻止恶意应用的作者从wire上获取数据的关键。由于客户端发送到服务端的信息需要进行掩码处理，所以客户端发送数据的分帧开销要大于服务端发送数据的开销，服务端的分帧开销是2~10 Byte，客户端是则是6~14 Byte。&lt;/p&gt;
&lt;h5 id=&quot;控制帧&quot;&gt;控制帧&lt;/h5&gt;&lt;p&gt;控制帧由操作码标识，操作码的最高位是1。当前为控制帧定义的操作码有0x8（关闭）、0x9（Ping）和0xA（Pong），操作码0xB-0xF是保留的，未定义。控制帧用来交流WebSocket的状态，能够插入到消息的多个帧的中间。所有的控制帧必须有一个小于等于125字节的有效载荷长度，必须不能被分帧。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;关闭：操作码为0x8。关闭帧可能包含一个主体（帧的应用数据部分）指明关闭的原因，如终端关闭，终端接收到的帧太大，或终端接收到的帧不符合终端的预期格式。从客户端发送到服务器的关闭帧必须标记，在发送关闭帧后，应用程序必须不再发送任何数据。如果终端接收到一个关闭帧，且先前没有发送关闭帧，终端必须发送一个关闭帧作为响应。终端可能延迟发送关闭帧，直到它的当前消息发送完成。在发送和接收到关闭消息后，终端认为WebSocket连接已关闭，必须关闭底层的TCP连接。服务器必须立即关闭底层的TCP连接；客户端应该等待服务器关闭连接，但并非必须等到接收关闭消息后才关闭，如果它在合理的时间间隔内没有收到反馈，也可以将TCP关闭。如果客户端和服务器同时发送关闭消息，两端都已发送和接收到关闭消息，应该认为WebSocket连接已关闭，并关闭底层TCP连接。&lt;/li&gt;
&lt;li&gt;Ping：操作码为0x9。一个Ping帧可能包含应用程序数据。当接收到Ping帧，终端必须发送一个Pong帧响应，除非它已经接收到一个关闭帧。它应该尽快返回Pong帧作为响应。终端可能在连接建立后、关闭前的任意时间内发送Ping帧。注意：Ping帧可作为keepalive或作为验证远程终端是否可响应的手段。&lt;/li&gt;
&lt;li&gt;Pong：操作码为0xA。Pong 帧必须包含与被响应Ping帧的应用程序数据完全相同的数据。如果终端接收到一个Ping 帧，且还没有对之前的Ping帧发送Pong 响应，终端可能选择发送一个Pong 帧给最近处理的Ping帧。一个Pong 帧可能被主动发送，这作为单向心跳。对主动发送的Pong 帧的响应是不希望的。&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&quot;数据帧&quot;&gt;数据帧&lt;/h5&gt;&lt;p&gt;数据帧携带需要发送的目标数据，由操作码标识，操作码的最高位是0。当前为数据帧定义的（文本），0x2（二进制），操作码0x3-0x7为以后的非控制帧保留，未定义。&lt;/p&gt;
&lt;p&gt;操作码决定了数据的解释：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;文本：操作码为0x1。有效载荷数据是UTF-8编码的文本数据。特定的文本帧可能包含部分的UTF-8 序列，然而，整个消息必须包含有效的UTF-8，当终端以UTF-8解释字节流时发现字节流不是一个合法的UTF-8流，那么终端将关闭连接。&lt;/li&gt;
&lt;li&gt;二进制：操作码为0x2。有效载荷数据是任意的二进制数据，它的解释由应用程序层唯一决定。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;协议扩展&quot;&gt;协议扩展&lt;/h4&gt;&lt;p&gt;从上述的数据分帧格式可以知道，有很多扩展位预留，WebSocket 规范允许对协议进行扩展，可以使用这些预留位在基本的WebSocket 分帧层之上实现更多的功能。&lt;/p&gt;
&lt;p&gt;下面是负责制定WebSocket 规范的HyBi Working Group进行的两项扩展：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;多路复用扩展（A Multiplexing Extension for WebSockets）：这个扩展可以将WebSocket 的逻辑连接独立出来，实现共享底层的TCP 连接。每个WebSocket 连接都需要一个专门的TCP 连接，这样效率很低。多路复用扩展解决了这个问题。它使用“信道ID”扩展每个WebSocket 帧，从而实现多个虚拟的WebSocket 信道共享一个TCP 连接。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;压缩扩展（Compression Extensions for WebSocket）：给WebSocket 协议增加了压缩功能。基本的WebSocket 规范没有压缩数据的机制或建议，每个帧中的净荷就是应用提供的净荷。虽然这对优化的二进制数据结构不是问题，但除非应用实现自己的压缩和解压缩逻辑，否则很多情况下都会造成传输载荷过大的问题。实际上，压缩扩展就相当于HTTP 的传输编码协商。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;要使用扩展，客户端必须在第一次的Upgrade 握手中通知服务器，服务器必须选择并确认要在商定连接中使用的扩展。下面就是对升级协商的介绍。&lt;/p&gt;
&lt;h4 id=&quot;升级协商&quot;&gt;升级协商&lt;/h4&gt;&lt;p&gt;从上面的介绍可知，WebSocket具有很大的灵活性，提供了很多强大的特性：基于消息的通信、自定义的二进制分帧层、子协议协商、可选的协议扩展等等。上面也讲到，客户端和服务端需先通过HTTP方式协商适当的参数后才可建立连接，完成协商之后，所有信息的发送和接收不再和HTTP相关，全由WebSocket自身的机制处理。当然，完成最初的连接参数协商并非必须使用HTTP协议，它只是一种实现方案，可以有其他选择。但使用HTTP协议完成最初的协商，有以下好处：让WebSockets 与现有HTTP 基础设施兼容：WebSocket 服务器可以运行在80 和443 端口上，这通常是对客户端唯一开放的端口；可以重用并扩展HTTP 的Upgrade 流，为其添加自定义的WebSocket 首部，以完成协商。&lt;/p&gt;
&lt;p&gt;在协商过程中，用到的一些头域如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sec-WebSocket-Version：客户端发送，表示它想使用的WebSocket 协议版本（13表示RFC 6455）。如果服务器不支持这个版本，必须回应自己支持的版本。&lt;/li&gt;
&lt;li&gt;Sec-WebSocket-Key：客户端发送，自动生成的一个键，作为一个对服务器的“挑战”，以验证服务器支持请求的协议版本；&lt;/li&gt;
&lt;li&gt;Sec-WebSocket-Accept：服务器响应，包含Sec-WebSocket-Key 的签名值，证明它支持请求的协议版本；&lt;/li&gt;
&lt;li&gt;Sec-WebSocket-Protocol：用于协商应用子协议：客户端发送支持的协议列表，服务器必须只回应一个协议名；&lt;/li&gt;
&lt;li&gt;Sec-WebSocket-Extensions：用于协商本次连接要使用的WebSocket 扩展：客户端发送支持的扩展，服务器通过返回相同的首部确认自己支持一或多个扩展。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在进行HTTP Upgrade之前，客户端会根据给定的URI、子协议、扩展和在浏览器情况下的origin，先打开一个TCP连接，随后再发起升级协商。升级协商具体如下：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GET /socket HTTP/&lt;span class=&quot;number&quot;&gt;1.1&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 请求的方法必须是GET，HTTP版本必须至少是1.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: thirdparty.comOrigin: http:&lt;span class=&quot;comment&quot;&gt;//example.com&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Connection: Upgrade &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Upgrade: websocket &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 请求升级到WebSocket 协议&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Version: &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 客户端使用的WebSocket 协议版本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ== &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 自动生成的键，以验证服务器对协议的支持，其值必须是nonce组成的随机选择的16字节的被base64编码后的值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Protocol: appProtocol, appProtocol-v2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 可选的应用指定的子协议列表&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Extensions: x-webkit-deflate-message, x-custom-extension &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 可选的客户端支持的协议扩展列表，指示了客户端希望使用的协议级别的扩展&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;在安全工程中，Nonce是一个在加密通信只能使用一次的数字。在认证协议中，它往往是一个随机或伪随机数，以避免重放攻击。Nonce也用于流密码以确保安全。如果需要使用相同的密钥加密一个以上的消息，就需要Nonce来确保不同的消息与该密钥加密的密钥流不同。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;与浏览器中客户端发起的任何连接一样，WebSocket 请求也必须遵守同源策略：浏览器会自动在升级握手请求中追加Origin 首部，远程服务器可能使用CORS 判断接受或拒绝跨源请求。要完成握手，服务器必须返回一个成功的“Switching Protocols”（切换协议）响应，具体如下：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HTTP/&lt;span class=&quot;number&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;101&lt;/span&gt; Switching Protocols &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 101 响应码确认升级到WebSocket 协议&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Upgrade: websocket&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Connection: UpgradeAccess-Control-Allow-Origin: http:&lt;span class=&quot;comment&quot;&gt;//example.com &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// CORS 首部表示选择同意跨源连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo= &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 签名的键值验证协议支持&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Protocol: appProtocol-v2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 服务器选择的应用子协议&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Extensions: x-custom-extension &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 服务器选择的WebSocket 扩展&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;所有兼容RFC 6455 的WebSocket 服务器都使用相同的算法计算客户端挑战的答案：将Sec-WebSocket-Key 的内容与标准定义的唯一GUID 字符串拼接起来，计算出SHA1 散列值，结果是一个base-64 编码的字符串，把这个字符串发给客户端即可。Sec-WebSocket-Accept 这个头域的 ABNF [RFC2616]定义如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Sec-WebSocket-Accept = base64-value-non-empty&amp;#10;base64-value-non-empty = (1*base64-data [ base64-padding ]) |&amp;#10;base64-padding&amp;#10;base64-data = 4base64-character&amp;#10;base64-padding = (2base64-character &amp;#34;==&amp;#34;) | &amp;#10;(3base64-character &amp;#34;=&amp;#34;)&amp;#10;base64-character = ALPHA | DIGIT | &amp;#34;+&amp;#34; | &amp;#34;/&amp;#34;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果客户端发送的key值为：”dGhlIHNhbXBsZSBub25jZQ==”，服务端将把”258EAFA5-E914-47DA-95CA-C5AB0DC85B11” 这个唯一的GUID与它拼接起来，就是”dGhlIHNhbXBsZSBub25jZQ==258EAFA5-E914-47DA-95CAC5AB0DC85B11”，然后对其进行SHA-1哈希，结果为”0xb3 0x7a 0x4f 0x2c 0xc0 0x62 0x4f 0x16 0x90 0xf6 0x46 0x06 0xcf 0x38 0x59 0x45 0xb2 0xbe 0xc4 0xea”，再进行base64-encoded即可得”s3pPLMBiTxaQ9kYGzzhZRbK+xOo=”。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;成功的WebSocket 握手必须是客户端发送协议版本和自动生成的挑战值，服务器返回101 HTTP 响应码（Switching Protocols）和散列形式的挑战答案，确认选择的协议版本。&lt;/p&gt;
&lt;p&gt;一旦客户端打开握手发送出去，在发送任何数据之前，客户端必须等待服务器的响应。客户端必须按如下步骤验证响应：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;如果从服务器接收到的状态码不是101，按HTTP【RFC2616】程序处理响应。在特殊情况下，如果客户端接收到401状态码，可能执行认证；服务器可能用3xx状态码重定向客户端（但不要求客户端遵循他们）。否则按下面处理。&lt;/li&gt;
&lt;li&gt;如果响应缺失Upgrade头域或Upgrade头域的值没有包含大小写不敏感的ASCII 值”websocket”，客户端必须使WebSocket连接失败。&lt;/li&gt;
&lt;li&gt;如果响应缺失Connection头域或其值不包含大小写不敏感的ASCII值”Upgrade”，客户端必须使WebSocket连接失败。&lt;/li&gt;
&lt;li&gt;如果响应缺失Sec-WebSocket-Accept头域或其值不包含 [Sec-WebSocket-Key] （作为字符串，非base64解码的）+ “258EAFA5-E914-47DA-95CA-C5AB0DC85B11” 的base64编码 SHA-1值，客户端必须使WebSocket连接失败。&lt;/li&gt;
&lt;li&gt;如果响应包含Sec-WebSocket-Extensions头域，且其值指示使用的扩展不出现在客户端发送的握手（服务器指示的扩展不是客户端要求的），客户端必须使WebSocket连接失败。&lt;/li&gt;
&lt;li&gt;如果响应包含Sec-WebSocket-Protocol头域，且这个头域指示使用的子协议不包含在客户端的握手（服务器指示的子协议不是客户端要求的），客户端必须使WebSocket连接失败。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果客户端完成了对服务端响应的升级协商验证，该连接就可以用作双向通信信道交换WebSocket 消息。从此以后，客户端与服务器之间不会再发生HTTP 通信，一切由WebSocket 协议接管。&lt;/p&gt;
&lt;h3 id=&quot;使用场景及性能&quot;&gt;使用场景及性能&lt;/h3&gt;&lt;p&gt;Websocket协议具有极简的API，开发者可以很简便的调用，而且提供了二进制分帧、可扩展性以及子协议协商等强大特性，使得WebSocket 成为在浏览器中采用自定义应用协议的最佳选择。但，在计算机世界里，任何技术和理论一般都是为解决特定问题而生的，并不是普世化的解决方案，WebSocket亦是如此。WebSocket 不能取代XHR 或SSE，何时以及如何使用，毋庸置疑会对性能产生巨大影响，要获得最佳性能，我们必须善于利用它的长处！下面将对现有的一些协议与WebSocket 对比进行一个大致介绍。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB21QdsgKJ8puFjy1XbXXagqVXa_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;请求和响应流&quot;&gt;请求和响应流&lt;/h4&gt;&lt;p&gt;XHR 是专门为“事务型”请求/ 响应通信而优化的：客户端向服务器发送完整的、格式良好的HTTP 请求，服务器返回完整的响应。这里不支持请求流，在Streams API 可用之前，没有可靠的跨浏览器响应流API。 SSE 可以实现服务器到客户端的高效、低延迟的文本数据流：客户端发起 SSE 连接，服务器使用事件源协议将更新流式发送给客户端。客户端在初次握手后，不能向服务器发送任何数据。 WebSocket 是唯一一个能通过同一个TCP 连接实现双向通信的机制，客户端和服务器随时可以交换数据。因此，WebSocket 在两个方向上都能保证文本和二进制应用数据的低延迟交付。&lt;/p&gt;
&lt;p&gt;客户端到服务端传递消息的总时延由以下四个部分构成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;传播延迟：消息从发送端到接收端需要的时间，是信号传播距离和速度的函数，传播时间取决于距离和信号通过的媒介，播速度通常不超过光速；&lt;/li&gt;
&lt;li&gt;传输延迟：把消息中的所有比特转移到链路中需要的时间，是消息长度和链路速率的函数，由传输链路的速率决&lt;/li&gt;
&lt;li&gt;定，与客户端到服务器的距离无关；&lt;/li&gt;
&lt;li&gt;处理延迟：处理分组首部、检查位错误及确定分组目标所需的时间，常由硬件完成，因此相应的延迟一般非常短；&lt;/li&gt;
&lt;li&gt;排队延迟：如果分组到达的速度超过了路由器的处理能力，那么分组就要在入站缓冲区排队，到来的分组排队等待处理的时间就是排队延迟。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;无论是什么样的传输机制，都不会减少客户端与服务器间的往返次数，数据包的传播延迟都一样。但，采用不同的传输机制可以有不同的排队延迟。对XHR 轮询而言，排队延迟就是客户端轮询间隔：服务器上的消息可用之后，必须等到下一次客户端XHR 请求才能发送。相对来说，SSE 和WebSocket 使用持久连接，这样服务器（和客户端——如果是WebSocket）就可以在消息可用时立即发送它，消除了消息的排队延迟，也就使得总的传输延迟更小。&lt;/p&gt;
&lt;h4 id=&quot;消息开销&quot;&gt;消息开销&lt;/h4&gt;&lt;p&gt;在完成最初的升级协商之后，客户端和服务器即可通过WebSocket 协议双向交换数据，消息分帧之后每帧会添加2~14 字节的开销；SSE 会给每个 消息添加 5 字节，但仅限于 UTF-8 内容(SSE 不是为传输二进制载荷而设计的！如果有必要，可以把二进制对象编码为base64 形式，然后再使用SSE)； HTTP 1.x 请求(XHR 及其他常规请求)会携带 500~800 字节的 HTTP 元数据，加上cookie； HTTP 2.0 压缩 HTTP 元数据，可以显著减少开销，如果请求都不修改首部，那么开销可以低至8 字节。WebSocket专门为双向通信而设计，开销很小，在实时通知应用开发中是不错的选择。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;上述开销不包括IP、TCP 和TLS 分帧的开销，后者一共会给每个消息增加60~100 字节，无论使用的是什么应用协议。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;效率及压缩&quot;&gt;效率及压缩&lt;/h4&gt;&lt;p&gt;在使用HTTP协议传输数据时，每个请求都可以协商最优的传输编码格式（如对文本数据采用gzip 压缩）；SSE 只能传输UTF-8 格式数据，事件流数据可以在整个会话期间使用gzip 压缩；WebSocket 可以传输文本和二进制数据，压缩整个会话行不通，二进制的净荷也可能已经压缩过了！&lt;/p&gt;
&lt;p&gt;鉴于WebSocket的特殊性，它需要实现自己的压缩机制，并针对每个消息选择应用。HyBi 工作组正在为WebSocket 协议制定以消息为单位的压缩扩展，但这个扩展尚未得到任何浏览器支持。目前来说，除非应用通过细致优化自己的二进制净荷实现自己的压缩逻辑，同时也针对文本消息实现自己的压缩逻辑，否则传输数据过程中一定会产生很大的字节开销！&lt;/p&gt;
&lt;h4 id=&quot;自定义应用协议&quot;&gt;自定义应用协议&lt;/h4&gt;&lt;p&gt;HTTP已经诞生了数十年，具有广泛的应用，各种优化专门的优化机制也已经被浏览器及服务器等设备实施，XHR 请求自然而然就继承了所有这些功能。然而，对于只使用HTTP协议完成升级协商的WebSocket来说，流式数据处理可以让我们在客户端和服务器间自定义协议，但也会错过浏览器提供的很多服务，应用可能必须实现自已的逻辑来填充某些功能空白，比如缓存、状态管理、元数据交付等等。&lt;/p&gt;
&lt;h4 id=&quot;部署WebSocket&quot;&gt;部署WebSocket&lt;/h4&gt;&lt;p&gt;HTTP 是专为短时突发性传输设计的，很多服务器、代理和其他中间设备的HTTP 连接空闲超时设置都很激进。这就与WebSocket的长时连接、实时双向通信相悖，部署时需要关注下面的三个方面：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;位于各自网络中的路由器、负载均衡器和代理；&lt;/li&gt;
&lt;li&gt;外部网络中透明、确定的代理服务器（如 ISP 和运营商的代理）；&lt;/li&gt;
&lt;li&gt;客户网络中的路由器、防火墙和代理。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;鉴于用户所处的网络环境是各不相同的，不受开发者所控制。某些网络甚至会完全屏蔽WebSocket通信，有些设备也不支持WebSocket协议，这时就需要采用备用机制，使用其他技术来实现类似与WebSocket的通信(如socket.io等)。虽然，我们无法处理网络中的中间设备，但对于处在我们自己掌控下的基础设施还是可以做一些工作的，可以对通信路径上的每一台负载均衡器、路由器和Web 服务器针对长时连接进行调优。然而，长时连接和空闲会话会占用所有中间设备及服务器的内存和套接字资源，开销很大，部署WebSocket、SSE及HTTP 2.0等赖于长时会话的协议都会对运维提出新的挑战。在使用WebSocket的过程中，也需要做到优化二进制净荷和压缩 UTF-8 内容以最小化传输数据、监控客户端缓冲数据的量、切分应用消息避免队首阻塞、合用的情况下利用其他传输机制等。&lt;/p&gt;
&lt;h3 id=&quot;总结&quot;&gt;总结&lt;/h3&gt;&lt;p&gt;WebSocket 协议为实时双向通信而设计，提供高效、灵活的文本和二进制数据传输，同时也错过了浏览器为HTTP提供的一些服务，在使用时需要应用自己实现。在进行应用数据传输时，需要根据不同的场景选择恰当的协议，WebSocket 并不能取代HTTP、XHR 或SSE，关键还是要利用这些机制的长处以求得最佳性能。&lt;/p&gt;
&lt;p&gt;Socket.IO&lt;/p&gt;
&lt;p&gt;鉴于现在不同的平台及浏览器版本对WebSocket支持的不同，有开发者做了一个叫做socket.io 的为实时应用提供跨平台实时通信的库，我们可以使用它完成向WebSocket的切换。socket.io 旨在使实时应用在每个浏览器和移动设备上成为可能，模糊不同的传输机制之间的差异。socket.io 的名字源于它使用了浏览器支持并采用的 HTML5 WebSocket 标准，因为并不是所有的浏览器都支持 WebSocket ，所以该库支持一系列降级功能：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Websocket&lt;/li&gt;
&lt;li&gt;Adobe:registered: Flash:registered: Socket&lt;/li&gt;
&lt;li&gt;AJAX long polling&lt;/li&gt;
&lt;li&gt;AJAX multipart streaming&lt;/li&gt;
&lt;li&gt;Forever Iframe&lt;/li&gt;
&lt;li&gt;JSONP Polling&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在大部分情境下，你都能通过这些功能选择与浏览器保持类似长连接的功能。具体细节请看&lt;a href=&quot;http://socket.io/docs/。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://socket.io/docs/。&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;参考资料&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://chimera.labs.oreilly.com/books/1230000000545/ch17.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;WEB性能权威指南-WebSocket&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6455#page-14&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RFC6455&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.fzb.me/2015-3-24-websocket-protocol-abstract.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Websocket摘要&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MDN-Websocket API&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.ietf.org/rfc/rfc5234.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ABNF语法规范&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.qcloud.com/community/article/111&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTTP1.1 学习笔记&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.qcloud.com/community/article/82&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTTP 2.0 简明笔记&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;补充&quot;&gt;补充&lt;/h2&gt;&lt;h3 id=&quot;WebSocket_数据类型&quot;&gt;WebSocket 数据类型&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Blob&lt;/li&gt;
&lt;li&gt;ArrayBuffer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果传输的是文件数据建议使用&lt;code&gt;Blob&lt;/code&gt;类型&lt;br&gt;如果传输的数据需要进行字节操作建议使用&lt;code&gt;ArrayBuffer&lt;/code&gt;类型&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近应用中正好使用到&lt;code&gt;WebSocket&lt;/code&gt;, &lt;code&gt;腾讯Bugly&lt;/code&gt;就发表了这篇文章, 虽然也不是非常全面但是把&lt;code&gt;WebSocket&lt;/code&gt;的基本概念和使用都说到了, 还是相当受用, 故转载过来.&lt;br&gt;随后我会把把一些我遇到的转载文章中没有提及的问题补充到本文末尾. &lt;a href=&quot;http://t.cn/RiCKZ0R&quot;&gt;原文地址-&amp;gt;&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="HTML5" scheme="http://huyaohui.com/categories/HTML5/"/>
    
    
      <category term="HTML5" scheme="http://huyaohui.com/tags/HTML5/"/>
    
      <category term="WebSocket" scheme="http://huyaohui.com/tags/WebSocket/"/>
    
  </entry>
  
  <entry>
    <title>Cocos Creator hot update</title>
    <link href="http://huyaohui.com/2017/02/25/Cocos-Creator-hot-update/"/>
    <id>http://huyaohui.com/2017/02/25/Cocos-Creator-hot-update/</id>
    <published>2017-02-25T08:05:35.000Z</published>
    <updated>2017-02-25T09:07:37.000Z</updated>
    
    <content type="html">&lt;p&gt;因为官方文档中有一些说的不是很明白的地方, 所以特写这篇文章对官方的热更新方案作一个补充.&lt;br&gt;同时也避免自己以后再次掉到坑里去.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;前言&quot;&gt;前言&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;本篇文档基于 Cocos Creator v0.8 完成&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;之所以这篇文档的标题为教程，是因为目前 Cocos Creator 资源热更新的工作流还没有彻底集成到编辑器中，不过引擎本身对于热更新的支持是完备的，所以借助一些外围脚本和一些额外的工作就可以达成。&lt;/p&gt;
&lt;p&gt;本篇文档的范例工程可以从 &lt;a href=&quot;https://github.com/cocos-creator/tutorial-hot-update&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github 仓库&lt;/a&gt;获取。&lt;/p&gt;
&lt;h2 id=&quot;使用场景和设计思路&quot;&gt;使用场景和设计思路&lt;/h2&gt;&lt;p&gt;资源热更新的使用场景相信游戏开发者都非常熟悉，对于已发布的游戏，在游戏内通过从服务器动态下载新的游戏内容，来时刻保持玩家对游戏的新鲜感，是保持一款游戏长盛不衰非常重要的手段。当然热更新还有一些其他的用途，不过在此不再深入讨论，我们下面将主要讨论 Cocos Creator 对热更新支持的原理和手段。&lt;/p&gt;
&lt;p&gt;Cocos Creator 中的热更新主要源于 Cocos 引擎中的 AssetsManager 模块对热更新的支持。它有个非常重要的特点：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;服务端和本地均保存完整版本的游戏资源&lt;/strong&gt;，热更新过程中通过比较服务端和本地版本的差异来决定更新哪些内容。这样即可天然支持跨版本更新，比如本地版本为 A，远程版本是 C，则直接更新 A 和 C 之间的差异，并不需要生成 A 到 B 和 B 到 C 的更新包，依次更新。所以，在这种设计思路下，新版本的文件以离散的方式保存在服务端，更新时以文件为单位下载。&lt;/p&gt;
&lt;p&gt;除此之外，由于 WEB 版本可以通过服务器直接进行版本更新，所以资源热更新只适用于原生发布版本。AssetsManager 类也只在 jsb 命名空间下，在使用的时候需要注意判断运行环境。&lt;/p&gt;
&lt;h2 id=&quot;Manifest_文件&quot;&gt;Manifest 文件&lt;/h2&gt;&lt;p&gt;对于不同版本的文件级差异，AssetsManager 中使用 Manifest 文件来进行版本比对。本地和远端的 Manifest 文件分别标示了本地和远端的当前版本包含的文件列表和文件版本，这样就可以通过比对每个文件的版本来确定需要更新的文件列表。&lt;/p&gt;
&lt;p&gt;Manifest 文件中包含以下几个重要信息：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;远程资源包的根路径&lt;/li&gt;
&lt;li&gt;远程 Manifest 文件地址&lt;/li&gt;
&lt;li&gt;远程 Version 文件地址（非必需）&lt;/li&gt;
&lt;li&gt;主版本号&lt;/li&gt;
&lt;li&gt;文件列表：以文件路径来索引，包含文件版本信息，一般推荐用文件的 md5 校验码来作为版本号&lt;/li&gt;
&lt;li&gt;搜索路径列表&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;其中 Version 文件内容是 Manifest 文件内容的一部分，不包含文件列表。由于 Manifest 文件可能比较大，每次检查更新的时候都完整下载的话可能影响体验，所以开发者可以额外提供一个非常小的 Version 文件。AssetsManager 会首先检查 Version 文件提供的主版本号来判断是否需要继续下载 Manifest 文件并更新。&lt;/p&gt;
&lt;h2 id=&quot;在_Cocos_Creator_项目中支持热更新&quot;&gt;在 Cocos Creator 项目中支持热更新&lt;/h2&gt;&lt;p&gt;在这篇教程中，将提出一种针对 Cocos Creator 项目可行的热更新方案，不过我们将在 Cocos2d-x 的未来版本中开放 Downloader 的 JavaScript 接口，届时用户可以自由开发自己的热更新方案。&lt;/p&gt;
&lt;p&gt;在开始详细讲解之前，开发者可以看一下 Cocos Creator 发布原生版本后的目录结构，这个目录结构和 Cocos2d-x JS 项目的目录是完全一致的。以前没有接触过 Cocos2d-x 的用户可以参考&lt;a href=&quot;http://www.cocos.com/doc/article/index?type=cocos2d-x&amp;amp;url=/doc/cocos-docs-master/manual/framework/cocos2d-js/4-essential-concepts/4-1-cocos2d-js-project/zh.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;项目结构文档&lt;/a&gt;。对于 Cocos Creator 来说，所有 JS 脚本将会打包到 src 目录中，其他 Assets 资源将会被导出到 res 目录。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ps: 这里的 src 和 res 目录指的是在默认构建的情况下 build/jsb-default 目录下的 src 和 res 目录&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;基于这样的项目结构，本篇教程中的热更新思路很简单：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;基于原生打包目录中的 res 和 src 目录生成本地 Manifest 文件。&lt;/li&gt;
&lt;li&gt;创建一个热更新组件来负责热更新逻辑。&lt;/li&gt;
&lt;li&gt;游戏发布后，若需要更新版本，则生成一套远程版本资源，包含 res 目录、src 目录和 Manifest 文件，将远程版本部署到服务端。&lt;/li&gt;
&lt;li&gt;当热更新组件检测到服务端 Manifest 版本不一致时，就会开始热更新&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;教程所使用的范例工程是基于 21 点范例修改而来的，为了展示热更新的过程，将工程中的 table 场景（牌桌场景）删除，设为 1.0.0 版本。并在 &lt;code&gt;remote-assets&lt;/code&gt; 目录中保存带有 table 场景的完整版本，设为 1.1.0 版本。游戏开始时会检查远程是否有版本更新，如果发现远程版本则提示用户更新，更新完成后，用户重新进入游戏即可进入牌桌场景。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;，项目中包含的 &lt;code&gt;remove-assets&lt;/code&gt; 为 debug 模式，开发者在测试的时候必须使用 debug 模式构建项目才有效，否则 release 模式的 jsc 文件优先级会高于 &lt;code&gt;remove-assets&lt;/code&gt; 中的资源而导致脚本失效。&lt;/p&gt;
&lt;h3 id=&quot;使用_Version_Generator_来生成_Manifest_文件&quot;&gt;使用 Version Generator 来生成 Manifest 文件&lt;/h3&gt;&lt;p&gt;在范例工程中，我们提供了一个 &lt;a href=&quot;https://github.com/cocos-creator/tutorial-hot-update/blob/master/version_generator.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;version_generator.js 文件&lt;/a&gt;，这是一个用于生成 Manfiest 文件的 NodeJS 脚本。使用方式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#62; node version_generator.js -v 1.0.0 -u http://your-server-address/tutorial-hot-update/remote-assets/ -s native/package/ -d assets/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下面是参数说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-v&lt;/code&gt; 指定 Manifest 文件的主版本号。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-u&lt;/code&gt; 指定服务器远程包的地址，这个地址需要和最初发布版本中 Manifest 文件的远程包地址一致，否则无法检测到更新。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-s&lt;/code&gt; 本地原生打包版本的目录相对路径。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-d&lt;/code&gt; 保存 Manifest 文件的地址。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Ps:&lt;br&gt;-s 默认情况下是: build/jsb-default/ 目录&lt;/p&gt;
&lt;p&gt;构建过程:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;先构建点击构建项目&lt;/li&gt;
&lt;li&gt;替换命令参数并执行命令&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;需要注意的是, 以上操作最好在你项目准备上线是, 重新执行一次, 原因是需要更新manifest文件, 如果不更新, 虽然不会出现什么问题, 但是当你下次热更新时, 会把不需要热更新的文件也更新下来, 导致不必要的开销&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;热更新组件&quot;&gt;热更新组件&lt;/h3&gt;&lt;p&gt;在范例工程中，热更新组件的实现位于 &lt;a href=&quot;https://github.com/cocos-creator/tutorial-hot-update/blob/master/assets/scripts/module/HotUpdate.js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;assets/scripts/module/HotUpdate.js&lt;/code&gt;&lt;/a&gt; 中，开发者可以参考这种实现，也可以自由得按自己的需求修改。&lt;/p&gt;
&lt;p&gt;除此之外，范例工程中还搭配了一个 &lt;code&gt;Canvas/update&lt;/code&gt; 节点用于提示更新和显示更新进度供参考。&lt;/p&gt;
&lt;h3 id=&quot;部署远程服务器&quot;&gt;部署远程服务器&lt;/h3&gt;&lt;p&gt;为了让游戏可以检测到远程版本，可以在本机上模拟一个远程服务器，搭建服务器的方案多种多样（比如 Python &lt;a href=&quot;https://docs.python.org/2/library/simplehttpserver.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;SimpleHTTPServer&lt;/a&gt;），这里不做讨论，开发者可以使用自己习惯的方式。搭建成功后，访问远程包和 Manifest 文件的地址与范例工程中不同，所以需要修改以下几个地方来让游戏可以成功找到远程包：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;assets/project.manifest&lt;/code&gt;：游戏的本地 Manifest 文件中的 &lt;code&gt;packageUrl&lt;/code&gt;、&lt;code&gt;remoteManifestUrl&lt;/code&gt; 和 &lt;code&gt;remoteVersionUrl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;remote-assets/project.manifest&lt;/code&gt;：远程包的 Manifest 文件中的 &lt;code&gt;packageUrl&lt;/code&gt;、&lt;code&gt;remoteManifestUrl&lt;/code&gt; 和 &lt;code&gt;remoteVersionUrl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;remote-assets/version.manifest&lt;/code&gt;：远程包的 Version 文件中的 &lt;code&gt;packageUrl&lt;/code&gt;、&lt;code&gt;remoteManifestUrl&lt;/code&gt; 和 &lt;code&gt;remoteVersionUrl&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;Ps: 服务器随便用什么都行, 只要能对外访问就好&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;打包原生版本&quot;&gt;打包原生版本&lt;/h3&gt;&lt;p&gt;下载完成范例工程后，可以用 Cocos Creator 直接打开这个工程。打开&lt;code&gt;构建发布&lt;/code&gt;面板，构建原生版本，建议使用 Windows / Mac 来测试。&lt;/p&gt;
&lt;p&gt;构建成功原生版本之后，打开原生发布包的地址，给 &lt;code&gt;main.js&lt;/code&gt; 附加上搜索路径设置的逻辑：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 在 main.js 的开头添加如下代码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (cc.sys.isNative) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; hotUpdateSearchPaths = cc.sys.localStorage.getItem(&lt;span class=&quot;string&quot;&gt;&#39;HotUpdateSearchPaths&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (hotUpdateSearchPaths) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jsb.fileUtils.setSearchPaths(&lt;span class=&quot;built_in&quot;&gt;JSON&lt;/span&gt;.parse(hotUpdateSearchPaths));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;或者直接使用项目仓库根目录下的 &lt;code&gt;main.js&lt;/code&gt; 覆盖原生打包文件夹内的 &lt;code&gt;main.js&lt;/code&gt;。注意，每次使用 Cocos Creator 构建后，都需要重新修改 &lt;code&gt;main.js&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;这一步是必须要做的原因是，热更新的本质是用远程下载的文件取代原始游戏包中的文件。Cocos2d-x 的搜索路径恰好满足这个需求，它可以用来指定远程包的下载地址作为默认的搜索路径，这样游戏运行过程中就会使用下载好的远程版本。另外，这里搜索路径是在上一次更新的过程中使用 &lt;code&gt;cc.sys.localStorage&lt;/code&gt;（它符合 WEB 标准的 &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/API/Window/localStorage&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Local Storage API&lt;/a&gt;）固化保存在用户机器上，&lt;code&gt;HotUpdateSearchPaths&lt;/code&gt; 这个键值是在 &lt;code&gt;HotUpdate.js&lt;/code&gt; 中指定的，保存和读取过程使用的名字必须匹配。&lt;/p&gt;
&lt;p&gt;此外，打开工程过程中如果遇到这个警告可以忽略：&lt;code&gt;loader for [.manifest] not exists!&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ps: 这里已经有热更新插件可以解决了, 不需要手动修改, 可无视这段&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;运行范例工程&quot;&gt;运行范例工程&lt;/h3&gt;&lt;p&gt;如果一切正常，此时运行原生版本的范例工程，就会发现检测到新版本，提示更新，更新之后会自动重启游戏，此时可进入 table 场景。&lt;/p&gt;
&lt;h2 id=&quot;结语&quot;&gt;结语&lt;/h2&gt;&lt;p&gt;以上介绍的是目前一种可能的热更新方案，Cocos Creator 在未来版本中提供更成熟的热更新方案，直接集成到编辑器中。当然，也会提供底层 Downloader API 来允许用户自由实现自己的热更新方案，并通过插件机制在编辑器中搭建完整可视化的工作流。这篇教程和范例工程提供给大家参考，并不是官方方案，也鼓励开发者针对自己的工作流进行定制。如果有问题和交流也欢迎反馈到&lt;a href=&quot;http://www.cocoachina.com/bbs/thread.php?fid-71.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;论坛&lt;/a&gt;中。&lt;/p&gt;
&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://www.cocos.com/doc/article/index?type=cocos2d-x&amp;amp;url=/doc/cocos-docs-master/manual/framework/html5/v3/assets-manager/zh.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;资源管理器 Assets Manager 文档&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;Ps: 我非要吐槽一下这个文档链接不看, Cocos官方文档中很多像这样的链接都是打不开的, 要么就是打开后没东西, 囧..&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;补充说明&quot;&gt;补充说明&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;除首次发布项目需要吧&lt;code&gt;project.manifest&lt;/code&gt; &lt;code&gt;-d&lt;/code&gt; 参数设置为 &lt;code&gt;assets/&lt;/code&gt;, 之后的热更新, 都不需要再设置这个参数了, 默认会生成到&lt;code&gt;remote-assets&lt;/code&gt;目录下, 原因是当你修改了重新构建后他仍然会被热更新到客户端, 但是这个文件实际上不会再被用到&lt;/li&gt;
&lt;li&gt;执行完&lt;code&gt;node&lt;/code&gt;命令后需要把&lt;code&gt;build/jsb-default&lt;/code&gt;目录下的&lt;code&gt;src&lt;/code&gt;和&lt;code&gt;res&lt;/code&gt;目录拷贝出来, 连同生成的&lt;code&gt;project.manifest&lt;/code&gt;和&lt;code&gt;version.manifest&lt;/code&gt;文件一起放到web服务器下&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;已知问题&quot;&gt;已知问题&lt;/h2&gt;&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;当重复点击检查更新是, 会出现无法检查的问题, 但是第一次是没有问题的&lt;/li&gt;
&lt;li&gt;在&lt;code&gt;XCode&lt;/code&gt;上调试时,  如果你重新编译, 会变成没有热更新的状态, 但是你点击更新有会提示已经是最新版本了&lt;br&gt; 这个问题, 不知道是什么原因, 但是目前已知的信息来看, 提示更新是因为本地数据仍然存在, 但是重新编译导致热更新失败比知道是什么原因&lt;br&gt; 不过这并不是什么问题, 一般用户也不可能冲洗编译的, 如果删除了应用重新安装, 那么本地的数据也会被删除掉, 这样也是没问题的&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;因为官方文档中有一些说的不是很明白的地方, 所以特写这篇文章对官方的热更新方案作一个补充.&lt;br&gt;同时也避免自己以后再次掉到坑里去.&lt;/p&gt;
    
    </summary>
    
      <category term="CocosCreator" scheme="http://huyaohui.com/categories/CocosCreator/"/>
    
    
      <category term="Cocos2dx" scheme="http://huyaohui.com/tags/Cocos2dx/"/>
    
      <category term="CocosCreator" scheme="http://huyaohui.com/tags/CocosCreator/"/>
    
      <category term="Game" scheme="http://huyaohui.com/tags/Game/"/>
    
  </entry>
  
  <entry>
    <title>Unity和Cocos2d-x越渐流行，国内公司开发自研游戏引擎的意义</title>
    <link href="http://huyaohui.com/2017/02/23/Unity%E5%92%8CCocos2d-x%E8%B6%8A%E6%B8%90%E6%B5%81%E8%A1%8C%EF%BC%8C%E5%9B%BD%E5%86%85%E5%85%AC%E5%8F%B8%E5%BC%80%E5%8F%91%E8%87%AA%E7%A0%94%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E7%9A%84%E6%84%8F%E4%B9%89/"/>
    <id>http://huyaohui.com/2017/02/23/Unity和Cocos2d-x越渐流行，国内公司开发自研游戏引擎的意义/</id>
    <published>2017-02-23T10:21:12.000Z</published>
    <updated>2017-02-23T10:37:19.000Z</updated>
    
    <content type="html">&lt;p&gt;该篇文章来自至&lt;code&gt;cocos&lt;/code&gt;贴吧, 里面说到自研引擎相关的问题, 也是我一直想说的, 遂转载过来.&lt;br&gt;原文貌似来自知乎: &lt;a href=&quot;https://www.zhihu.com/question/23881759&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.zhihu.com/question/23881759&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;A回答&quot;&gt;A回答&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;我觉得比我早回答的人都已经说了很多了，我就说一点我看到的东西吧。&lt;/p&gt;
&lt;p&gt;去年到今年大半年都从事有关引擎和前端适配的工作，给我的感觉就是这两个引擎以目前的势头来说必定会席卷整个业界。&lt;/p&gt;
&lt;p&gt;但是如果从我的工作上来看的话，一个开发公司往往要的不是一个单纯的引擎，而是一个解决方案，所以Cocos2d-x相比于u3d还是有很大差距的，在3D方面的工作我不了解，所以对U3D不做评价。而在2D游戏的制作方面，采用Cocos2d-x带来的问题也会不少，最为突出的还是美术和程序之间的矛盾。最为诟病的是官方出的那个编辑器，虽然引擎是开源的，但是编辑器是闭源的，而且还做的很烂（相比于传统老牌Flash来说）。在一个项目要动工的时候，必须去权衡这个编辑器不能提供的功能所带来的损失，截止我不参与这项工作的时候，官方编辑器能支持的东西还是很少，很多项目上要用的也没有，因此而转向我原来参与的编辑器适配的技术，希望能够找到一个功能完善（如Flash）的编辑器，通过一个通用的适配器来适配上各种引擎。这个愿景是美好的。&lt;/p&gt;
&lt;p&gt;但是，最终我不得不承认，由于很多数据架构的问题，在编辑器和引擎之间想要搭建通用的适配器解决方案几乎是一件不可能完成的事情，虽然我硬着头皮解决了大多数，但是最终的效果还是非常不理想。相反在之前自研的引擎上，由于采用的方案就是类似Flash的，很顺理成章地适配的比较好。&lt;/p&gt;
&lt;p&gt;举这样一个栗子就是想说明，一个引擎再优秀，当项目需求发生变化时，也不可能做出万全的准备，各种各样的需求也就催生出各种各样的解决方案，这些方案里面就不乏自研引擎。感觉这个就好像是即使在windows统一天下的时候，也还存在着各种linux，正式他们不放弃，才得以发展。&lt;/p&gt;
&lt;p&gt;存在即合理。从技术研究上讲我是很喜欢公司做这种基础建设的，虽然研究了好久的东西最终还是被砍了TAT&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;B回答&quot;&gt;B回答&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;我们团队08年顺应端游大潮，出来创业，本人负责改引擎。当时手握的一款05年前的商业引擎，连shader系统都没有，于是剃掉渲染层和一些老旧的部件重做。终于到了10年游戏出来了，当时的市面上国产网游整个场景用动态阴影的并不多，更流行的做法是只是人物做成动态，毕竟网游需要照顾低端配置，我们能上得益于深度定制引擎所带来的效能提升，这种提升是完全依赖于当时的游戏类型的，估计自研的优势也在于此。 举些例子，比如固定视角时，地形的像素面积过大，可以通过编写美术工具来限制层数，废弃多遍渲染。又比如，如果玩家视野有限，用多层阴影略显浪费，但单层又有些不够用，于是可以定制一个梯形变形+渐变的解决方案。深度定制还有个好处是可以满足美术的特殊需求，比如某些奇怪的光泽，某些奇怪的朦胧的雾或者水下的感觉，美术们都很感性，但需要你的理性实现他们。&lt;/p&gt;
&lt;p&gt;接着后话，游戏代理给了某知名网游公司，一直不温不火。团队快饿死了，于是饿死之前做了款全3D的，在此之前我的理想游戏挣钱了是全新开发一款全3d的引擎，但既然是要饿死了也没这些想法了，直接把这款完全为2.5d定制的引擎硬改成3d，效率勉强撑得住，12年游戏又上了，牛逼哄哄滴注册个名著的名字，然后依然不温不火。公司被收购，我们一帮核心成员带着遗憾离开，多少理想热血已成往事。&lt;/p&gt;
&lt;p&gt;再接着，再次组建团队，当然规模小了，但还是端游，周边项目组都是些用unity的年轻人， 我自己因为人手不足也写起了逻辑，写起了ai. 讨论起了游戏策划，更多的困扰是经济以及前途的压力，以及各种烦人的人事。 当年怀揣一本doom启示录以引擎程序员为骄傲杀入行业，如今觉得真的到了离开的时候。&lt;br&gt;也许我在软件园门口买烧饼的时候，能和顾客们讨论讨论PSSM，呵呵。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;C回答&quot;&gt;C回答&lt;/h2&gt;&lt;p&gt;分几个角度来说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;一、我认为，Unity3D将无可挽回的，或者说，势在必得的，成为接下来很多年内，世界移动领域游戏引擎市场霸主。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;回顾历史，正如同咱们经历过一次又一次的互联网时代变革一样，x86，windows，Google，facebook，twitter，当一个具备一定规模的产品在一定领域达成霸主地位之后，其它的同类产品从技术积累上、推广成本上、对用户的掌握程度上等等方面的差距均会无可挽回的越拉越大。即使对于引擎这种核心技术较多的产品，这种差距也不是一两个明星级别的程序员可以挽回的。不论是易用性、性能优化、提供更多功能、覆盖更多平台，这些对于引擎开发团队来说，都是赤裸裸的成本。随着时间的推移，这个门槛会越来越高，高到后来者根本没有办法企及的程度。&lt;br&gt;这就正如你打算现在开一家公司，研发一个操作系统去销售，即使你投入数以亿计的资金，可能你也刚刚攻关完微软早在十几年前就在实验室得出结论的问题。这还仅仅是技术，比起微软完备的推广、销售渠道，你在创业初期多半还需要自己上门推广；比起微软完备的亿级用户的体验收集分析系统，你可能不得不邀请数以十计的朋友或家人体验你的产品。这一切的门槛，都是无法挽回的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;二、我认为，cocos2d将在2D游戏研发领域持续的占据一定的市场，但在3D领域会败的体无完肤。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cocos2d与Unity3D的关系某种程度上类似linux与windows的关系。前者打着开源的旗号，由社区发展而来，后者从诞生开始就是商业闭源的。根据程序员的劣根性，开源会让他们产生一种虚假的掌控感，让他们以为，如果引擎是开源的，那么在引擎遇到BUG的时候，他们就可以去查看代码并修复。尽管这种感觉在大多数时候是错误的（这里不深入讨论了），即使在小部分时候正确，带来的好处也远不如使用商业引擎降低的成本，但这有助于保证一部分忠实用户，一旦用户花费了大量的学习成本去学习一个引擎，在没有特别的必要性的情况下，他转投其它类似产品的可能性是很小的。另一方面，Unity3D在2D领域多少还有一些水土不服的现状，它并没有完好的提供大部分2D游戏研发者所适应的工作模式，它的体积庞大，不能满足众多小渠道瘦身包的要求。它的架构和设计严丝合缝，因此并不容易满足一部分特殊的需求。所以在需求多变的2D游戏领域，目前cocos2d才是当之无愧的霸主，Unity3D并不容易吃下这部分市场。&lt;br&gt;但是在3D领域，cocos3d落后的太多，不论是资源管理、场景管理、渲染框架，这在OpenGL ES 2.0普及的时代可能还不明显，但是随着OpenGL ES 3.0的发布到普及，技术门槛会大幅的提高，cocos3dx将沦为一个只能画画简单场景的小众引擎，时间的差距和投入的差距会让它跟Unity3D无法抗衡。&lt;br&gt;另一方面，cocos2d的结构较为松散，比起Unity3D富有设计感的API，cocos2d更像一个功能堆砌的产物。对于小规模的项目来说，问题可能并不明显，只要少量的增加程序员（或者让他们加班！？）就能解决问题，但是随着项目规模的扩大，参与人数的增加，混乱和无尽的BUG是我能看到的唯一结局。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;三、我认为，国产自研引擎尤其是商业自研引擎在一段时间内还将继续持续存在。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;且不说楼上有人提到的“自研情节”，单纯从商业角度来分析一下。&lt;br&gt;1、引擎市场是一个对技术支持等服务要求非常高的市场。对于一个非英语母语的国家来说，本地化服务是一个非常重要的服务。在Unity3D真正成长为一个强大的跨国企业之前，还有充足的时间留给国产引擎公司存活，并且很可能成长为类似百度在搜索领域这样独霸一方的角色。某种程度上，我认为搜狐畅游的Genesis-3D打的是这个算盘，结果怎样还需观察。&lt;br&gt;2、正如同有人提到的，像Unity3D这样通用化的引擎，还是很难为一个特定的游戏类型提供足够的支撑服务。对于一个特定的游戏类型，在Unity3D完美覆盖之前，还有充足的时间留给一个特定的引擎成长，建立稳定的社区，拥有稳定的用户。典型的代表有橙光文字游戏制作工具。&lt;br&gt;3、对于一个一定规模的公司来说，拥有自己的引擎，拥有一个属于自己的公司的技术支撑团队，就目前来看依然是有价值的。这不但会大大降低引擎学习研究适应的风险，也有助于这家公司在某些细分领域建立自己的技术门槛，甚至还有利于降低核心员工流失率。&lt;br&gt;4、对于一些具备核心技术人员的小型团队，只要不奢望一个大而全的引擎解决方案，拥有一个自己的引擎（不是一个庞然大物，而是一个小清新的工具&amp;amp;库集合和自我的积累）依然是一个既有助于调动核心技术人员积极性，又能快速响应和满足当下并不复杂的需求的方案。这个思路的典型代表是云风的Ejoy2D。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;四、引擎研发团队还有更多新的机会。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1、船小好调头，任何一个大的引擎，达到一定的规模，它登陆一个新的平台或环境都会有比较大的时间成本。相比起来，小规模引擎快速登陆一个平台，在新的平台上快速抢占市场，会是比较大的机会。这个方案的典型代表是Unity3D自己。在几年前，提到游戏引擎的时候人们想到的都是Unreal、Crystal，而那时候的Unity3D只是一个活在浏览器插件里的、主要面向甚至不完全是游戏的，极小众的引擎。但是Unity3D抓住了智能手机浪潮的先机，快速抢占了市场，不但成就了新一轮的神话，甚至在PC、主机等平台上产生了反攻之势。这件事是否会重演？谁也不知道。&lt;br&gt;2、服务，服务，还是服务。对于一部分客户来说，他们不关心这个引擎的核心多么有技术含量，所用的算法有多么高大上，他们最关心的，是他们面临的需求和问题能否得到解决。比起十几年的技术积累，丰富的文档资料，他们更想要的是一封快速回复的邮件，一个电话，甚至是一次上门的培训或技术支撑。想要做好服务，你需要是一个有一定技术积累的团队，但你甚至未必需要有一个自己的引擎。想想吧，当windows大潮来临的时候，真正赚钱的是投入几千万几亿研发一个新操作系统试图跟windows正面抗衡的公司，还是那些卖盗版碟，搞windows office培训班的团队？&lt;br&gt;3、适应新的互联网时代社会化大生产模式。作为一个引擎团队，你具备的可能是技术实力、研发能力，有可能你认为自己不适合去做什么经销培训的事情，那么一定还有一件事情你可以做，就是借助社区和平台，进行互联网式的分工协作。一个别人无法完成的需求，一个别人无法实现的技术难题，如果对于你来说是迎刃而解的，那么不必拥有自己的引擎，你也可以在互联网时代获得你自己的立足之地。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;原贴地址: &lt;a href=&quot;http://tieba.baidu.com/p/4055902638&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://tieba.baidu.com/p/4055902638&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;该篇文章来自至&lt;code&gt;cocos&lt;/code&gt;贴吧, 里面说到自研引擎相关的问题, 也是我一直想说的, 遂转载过来.&lt;br&gt;原文貌似来自知乎: &lt;a href=&quot;https://www.zhihu.com/question/23881759&quot;&gt;https://www.zhihu.com/question/23881759&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Think" scheme="http://huyaohui.com/categories/Think/"/>
    
    
      <category term="Cocos2d-x" scheme="http://huyaohui.com/tags/Cocos2d-x/"/>
    
      <category term="Game" scheme="http://huyaohui.com/tags/Game/"/>
    
      <category term="Unity" scheme="http://huyaohui.com/tags/Unity/"/>
    
  </entry>
  
  <entry>
    <title>做游戏究竟需要哪些技能呢</title>
    <link href="http://huyaohui.com/2017/02/22/%E5%81%9A%E6%B8%B8%E6%88%8F%E7%A9%B6%E7%AB%9F%E9%9C%80%E8%A6%81%E5%93%AA%E4%BA%9B%E6%8A%80%E8%83%BD%E5%91%A2/"/>
    <id>http://huyaohui.com/2017/02/22/做游戏究竟需要哪些技能呢/</id>
    <published>2017-02-22T06:03:08.000Z</published>
    <updated>2017-02-22T06:20:55.000Z</updated>
    
    <content type="html">&lt;p&gt;师傅领进门，修行靠个人。&lt;br&gt;可是独立游戏领域，大多是独立游戏爱好者凭自己的兴趣做做。你从一个100%的纯新人，从一个普通的游戏玩家，该如何入门呢？本帖就此展开一些讨论，希望能帮助到一些新人朋友。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;哪些现有的知识能帮助我进行更好的游戏开发&quot;&gt;哪些现有的知识能帮助我进行更好的游戏开发&lt;/h2&gt;&lt;p&gt;虽说是纯新人，但是作为一个拥有正常智力的人，总归是有很多现成的技能的。而游戏开发是一项非常综合的工作，她的涉及面非常之广，甚至让我很难一下想全。所以这里只能简单罗列几点我想到的。&lt;/p&gt;
&lt;h3 id=&quot;编程技能（逻辑思维）&quot;&gt;编程技能（逻辑思维）&lt;/h3&gt;&lt;p&gt;当大家在此吧讨论“游戏”的时候，99.99%是在讨论电子游戏，而电子游戏的诞生100%离不开编程。&lt;br&gt;策划、美术或许决定了一个游戏是否好玩、是否吸引人。但是请别忘了，在那之前，程序决定了一个游戏是否存在于这个世界上。&lt;br&gt;有很多吧友的本质工作是IT相关的在校学生或者从业人员。他们本身已经具备了一定的开发能力，这对独立游戏的开发是很有帮助的。&lt;br&gt;更多的人可能只学过一点点C、C++、Java的皮毛，大致知道个if、else，数组神马的大概有个映像。你和他说什么继承、多态，要么不知道，要么学过忘了。我想很多人应该在这个level，不过鼓舞人心的是，这些简单的“映像”非常有用，它决定了你在百度相关问题的时候，能否准确地找到关键字。&lt;br&gt;还有部分纯新人，可能编程连碰都没有碰过，不过别担心。只要你有良好的逻辑思维能力，学会简单的编程并不是什么难事。现在网络这么发达，自学编程的人成千上万，别人能做到，你一定也可以。如果你是理科生，有最基本的数学基础、简单的物理常识。那说明你的逻辑思维能力并不弱。相信我，只要愿意学，你会成为一个优秀的程序员的。&lt;br&gt;如果你说我是文科生/女生，逻辑什么的也不是我的强项。。。别灰心，多来吧里逛逛，看看能不能抓到一两个聊得来的程序员吧。&lt;/p&gt;
&lt;h3 id=&quot;多媒体技能&quot;&gt;多媒体技能&lt;/h3&gt;&lt;p&gt;主要是绘画，或者说美术。&lt;br&gt;最佳的解决方案是，你本身就是游戏美术。那样最好了，即使你一开始这也不会那也不会，相信我，你的老板，你的客户会逼你一样样学会的。&lt;br&gt;比较符合现实而且又理想一点的方案是，你虽然不是美工出身，但是却有良好的绘画才能。相信我，这真的非常有用。至少，你可以以独立游戏美工的身份，去找一个足够靠谱的程序员队友。如果有条件能找到一些学习资料，购买适合的硬件（如手绘板）进行进一步学习的话，你很快就能成长成为一个合格的独立游戏美术。&lt;br&gt;不过更符合现实的是，你并不会画画。这很正常，我对这一块也是一窍不通，大多数（超过一半）的独立游戏开发者和你有类似的处境。你有海量的方法来弥补这一不足，最最简单最最直接的方法就是寻找现成的素材。&lt;/p&gt;
&lt;p&gt;当然，除了绘画以外。视频处理、音乐、乐器等等。都是非常有用的多媒体技能，游戏在这一块的要求也非常高。&lt;br&gt;总而言之，如果你有扎实的多媒体功底，自然会为你的游戏加分不少。&lt;/p&gt;
&lt;h3 id=&quot;策划类技能&quot;&gt;策划类技能&lt;/h3&gt;&lt;p&gt;说白了，就是如何设计出一个好玩的、有趣的游戏。&lt;br&gt;独立游戏大多由个人或者2~4人的超小团队所开发。所以通常来说没有专门一人担任策划，策划的工作，通常有主程或者主美兼职。&lt;br&gt;那些技能属于策划类技能呢。如作文、编剧这类文学技能就属于策划类技能，它能帮助你更好的设计出符合游戏主题的剧情。另外还有一点就是，玩游戏。玩其他游戏的过程，也为我们积累了不少游戏设计方面的经验。且不说设计成怎么样一定创新、好玩，但是做成怎么样绝对是坑，总归还是能有个大体上的判断。&lt;/p&gt;
&lt;h3 id=&quot;(0)百度的技能&quot;&gt;(0)百度的技能&lt;/h3&gt;&lt;p&gt;没错，这里的标题序列变成了0。因为一旦有了它，你可以学到123。至于你能不能真的学到，那取决于你是否有耐心、有恒心。相信有过独立游戏开发经历的人都知道，绝大多数时候，做游戏就是考验一个人耐心的时候。&lt;br&gt;你可以找人教你写程序，你可以找人教你画画，你可以请人帮你做策划。但是，在互联网上，大家也就是个网友、吧友的关系，不可能有人愿意时时刻刻等着你问东问西。&lt;br&gt;但是，请记住，这世界上还有一位非常强大、万能的老师，他7*24小时随叫随到，耐心解决各种白痴问题，请记住她的名字——百度。（她还有个美国同行叫谷歌，至于怎么翻墙上谷歌，问百度）&lt;br&gt;哪怕你什么都不会，只要你有了百度，你可以尽情地搜索《XXX教程》，你会发现一搜一大把。&lt;br&gt;如果你对自己的智商没有信心，你可以搜索《XXX零起点教程》、《XXX小白教程》、《XXX中文教程》，一切随你喜好，尽管放心的搜吧，度娘不会嫌弃你的。&lt;br&gt;甚至在你遇到具体问题的时候，你可以直接搜索你的问题。比如“Java的数组怎么用”、“什么是交叉数组”、“C#的委托是什么”。你大可放心地搜，因为在互联网极度发达的今天，已经有千千万万的小白帮你把你可能遇到的90%以上的问题问过了。对于一些有共性的问题，已经有大牛总结好发成博客放在网上了。而这一切，就TM等你去搜了，你要是搜都懒得搜，一搜一大把的问题还在这问问问，那你最好赶紧给我滚粗。&lt;/p&gt;
&lt;h2 id=&quot;具体如何做&quot;&gt;具体如何做&lt;/h2&gt;&lt;p&gt;OK，说完了加分技能，在来说说作为新人小白，具体该怎么做。&lt;br&gt;首先、先给我想清楚两个问题：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1) 我要做一款怎样的游戏？&lt;br&gt;2) 我为什么要做这款游戏？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这两个问题可以说明很多，先请你静下心来，仔细把这两个问题想好，吧答案记在心里。然后我就告诉你接下来怎么做。&lt;/p&gt;
&lt;h3 id=&quot;选择一款适合自己的游戏引擎&quot;&gt;选择一款适合自己的游戏引擎&lt;/h3&gt;&lt;p&gt;除非是成熟的、有一定技术功底的程序员。否则，请选用现有的游戏框架。&lt;br&gt;原因，省功夫、省麻烦，出了问题也方便百度。&lt;br&gt;不论你在程序上到达了怎样的高度，Unity始终是一个可选的选项。功能、跨平台性能强的不像话，还NM有免费版，配合海量插件（包括最近更新的官方2D插件）简直就是游戏引擎界的大BOSS。用的人很多，教程也有不少（不过说句实在话，绝大多数教程都是给程序员看的）。如果你想以小白的身份入门，我推荐此贴——&lt;br&gt;&lt;a href=&quot;http://inpla.net/forum.php?mod=viewthread&amp;amp;tid=6125&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://inpla.net/forum.php?mod=viewthread&amp;amp;tid=6125&lt;/a&gt;&lt;br&gt;星球酋长D哥的作品，有传闻说他可能会更新，具体不知道。&lt;/p&gt;
&lt;p&gt;不过对于新人，真心还是希望能先从2D做起。&lt;br&gt;如果你愿意在做游戏的同时学习一些编程知识，方便今后能开发出更NB、更精彩的游戏。我推荐Cocos2D-x（语言C++），功能强大，用的人不少、教程多。Greenfoot比较冷门，不过非常适合喜欢Java的新人。Flash、VB等也是不错的选择，不过总觉得有点落后。希望Flash和VB程序员不要喷我。&lt;/p&gt;
&lt;p&gt;如果你对程序并不感冒，只是想做出自己心中的游戏。那你也有海量的解决方案可供选择。在这种情况下，引擎的选择很大程度上取决于你想要做什么类型的游戏。如果你想做RPG，RPGMaker是很不错的选择。如果你想做STG，我记得有个叫STGMaker的，虽说有点旧做得也很不错。ACT（主要指格斗类的游戏）也有一个专门的，名字忘了，大家可以自行百度，关键字选用 《XXX（类型）游戏引擎》。对于这种定制程度较高的游戏引擎，其优点在于使用方便，出东西快。但是缺点也是显而易见的，不易扩展，难以突破引擎自身的条条框框，做出你想要、而它却没有的功能。对于程序员，还是别用了。&lt;/p&gt;
&lt;p&gt;另外还有一种引擎介于两者之间，如GameMaker，Stencyl等等等等。它们并不为专门种类的游戏定制，相对非常灵活，而且可以避免大量代码的编写。拥有为数不少的现有插件和学习资料。相比于给程序员用的引擎，它们更方便、更直观；相比于给小白用的引擎，它们更灵活，更强大。&lt;/p&gt;
&lt;p&gt;至于游戏引擎的话题就说到这里，欢迎各位补充。&lt;br&gt;对于新人，选择时请先各种百度。&lt;/p&gt;
&lt;h3 id=&quot;不要换来换去&quot;&gt;不要换来换去&lt;/h3&gt;&lt;p&gt;很多人纠结于用什么引擎。呵呵，选择多了问题也跟着多了。对此我只想说，条条大路通罗马。很多道理都是想通的，你用这个工具做好了一款游戏，明天换一个不过就是几天的事情去从头学习、百度一下。&lt;br&gt;但你如果总觉得这个引擎有缺陷、那个引擎不适合。&lt;br&gt;在此，我可以非常明确地告诉你，你的感觉并不真实。事实是，你的性格有缺陷，你这个人不适合游戏开发。&lt;/p&gt;
&lt;h3 id=&quot;不要在意版权的事、不要在意钱&quot;&gt;不要在意版权的事、不要在意钱&lt;/h3&gt;&lt;p&gt;我之前已经说过了，游戏开发需要很多技能的支持。程序、美术、音乐、策划等等等等。很难有人能精通所有。所以在绝大多数时候，我们需要现有的素材支持。&lt;/p&gt;
&lt;p&gt;天朝一个盗版、山寨现象猖獗的国家，绝大多数的独立游戏开发者（包括新人）都有不俗的版权意识。他们意识到不是随便网上找个素材就能放在自己的游戏里用的。而我今天却要告诉所有新人，别太在意版权的事。&lt;br&gt;我这么说，不是鼓励大家用盗版、偷素材，而是希望新人朋友们认清一个事实：完成一个独立游戏很难。作为新人，你所想到的90%以上的游戏创意，已经超过了你的能力范围（即使是在几年的入门学习之后，依然有很多是你做不到的）。&lt;/p&gt;
&lt;p&gt;而作为独立游戏的生产者，我们所开发的游戏的最终归宿（如果它最终有被做出来的话），也就是给爱好者们玩玩（绝大多数情况下是自己玩玩）。所以，作为不盈利的游戏开发者，你绝对没有必要为了担心惹上版权上的问题而避免使用现成的素材，放心大胆地去用就好了。&lt;/p&gt;
&lt;p&gt;退一步讲，可能也有人会做美梦，想着哪天做的游戏成名了，能赚大钱。呵呵，我其实也想过，但是那很难。何况，你的游戏真要火了，换换素材也不是多难的事儿。&lt;br&gt;不过我再次还想提醒新人一点，一开始别太在意能不能赚钱的事儿。这样的想法不但不会帮助你完成作品，还会影响你的游戏创作，同时也会影响到你的游戏开发体验。作为新人，自知之明是很重要的，第一款游戏就能火的我是没听说过，所以，还请先做出点东西来吧。&lt;/p&gt;
&lt;h3 id=&quot;素材收集&quot;&gt;素材收集&lt;/h3&gt;&lt;p&gt;费了这么多口舌说第三点，无非是希望新人朋友在收集游戏素材的时候，能抛开一些没必要的包袱。而这一层，则主要说说怎么收集素材。&lt;/p&gt;
&lt;p&gt;问题回归到“我想做一款怎么样的游戏”这个问题上。&lt;br&gt;如果你想做的是“XXX同人游戏”或者“一款类似于XXX”的游戏，那么恭喜你，在素材的问题上，你会轻松很多。因为你可以借用XXX的素材。至于怎么得到这些素材，有技术的可以去原来的游戏里提取。不过我的做法通常是吧“XXX 素材”的字样告诉度娘。&lt;/p&gt;
&lt;p&gt;如果你心中的游戏并没有以现实中的某款游戏为原型，那么，又该如何去寻找一些现有的、可用的素材呢。老实说，你如果直接搜索 “XXX类游戏的素材”可能很难有所斩获。此时，你需要一些素材网站的帮助。&lt;br&gt;这里推荐一下国内的知名游戏素材网66rpg，网址好像变了，自己百度下。&lt;br&gt;PS：66原本是各类游戏素材的完美聚集地，同时也是RPGMaker用户的聚集地，那里有很多RPGMaker的教程和学习资料。如果你想做简单的RPG或者文字类游戏，66+RPGMaker或橙光是你的不二选择。&lt;br&gt;不过，最近66再推《橙光文字游戏制作精灵》现在首页点进去都是这个，大家可以在导航栏点论坛，然后在进入素材资源的主站。&lt;/p&gt;
&lt;p&gt;除了66之外，我所知道的其他国内资源站貌似都倒了。所以，很多时候需要去国外的资料站上下东西。最简单而且通用的做法是，用谷歌搜索“Game Image”或者“Game Sound”/“Game Music”。不过我更喜欢在前面加上“Free”的字样。这样可以搜到很多外国大大共享的免费资源，真是妙极了。&lt;br&gt;这种做法的缺点也有，大大们自己共享的素材风格各异，很难找到成套的。&lt;/p&gt;
&lt;p&gt;至于音乐、音效一块，我主要还是在66上down。国外的声音素材网大多要收费，虽说有些时候，一首0.99美元，其实也就几块钱，便宜很。但是我又没有外国银行卡，人家又不支持支付宝，所以我通常还是会去偷。至于怎么偷，别问我，问度娘。&lt;br&gt;PS：大家有什么好的声音来源可以共享一下。@独立游戏音乐 不知道是不是这个ID&lt;/p&gt;
&lt;h3 id=&quot;合理组队&quot;&gt;合理组队&lt;/h3&gt;&lt;p&gt;经常看到有找人的帖子，不少是叫你进一个QQ群。&lt;br&gt;不知道大家进过这种群没有，一群大水笔在里面成天到晚BB，最后啥也做不出来。&lt;br&gt;招人的时候美其名曰“共同进步”，其实人多了反而容易推卸责任。黄图、恶心图满天飞，你真想讨论点和做游戏相关的，没几句就被打水笔刷没了。&lt;/p&gt;
&lt;p&gt;这里介绍一些自己的经验。我与他人的合作，要么就是现实中的朋友，每天可以见面讨论。要么就是组一个专门的办公群，只把和制作游戏相关的人加进来，防止划水。&lt;/p&gt;
&lt;p&gt;我非常想要说明的一点就是，独立游戏的制作，组队并不是必须的。你如果再程序上有缺陷，可以采用更加定制化的引擎；你如果不擅长画图，可以借助现有的素材。&lt;br&gt;多人组队大家取长补短虽然听上去很美，但是实际情况往往是交流成本增加、办事效率下降。而且，现在专职做独立游戏人并不多，大家的日常生活，谁还没点突发事件。今天我忙一天，明天你忙一天。几天下来，做游戏的热情也消磨的差不多了。&lt;br&gt;就我个人而言，也和别人合作过几次。有吧里的，也有外面认识的，甚至显示生活中认识的美术。有被人坑的，也有坑别人的（这里@Joker123458，他在暑假被我坑了一次）。最终能做出点东西。哪怕是小demo的，还真不多。所以，新人朋友们，还是好好单干吧，有问题主要还是靠百度。&lt;/p&gt;
&lt;p&gt;PS，作为吧主的友情提醒：&lt;br&gt;本吧禁止无脑招人、组队贴。如果诚心组队的，请先介绍自己的游戏、说明当前的开发程度、说明需要怎样的人才。严禁胡说一通，直接甩个群号乱招的。&lt;/p&gt;
&lt;h3 id=&quot;持之以恒&quot;&gt;持之以恒&lt;/h3&gt;&lt;p&gt;怎么解决问题、怎么用百度、怎么搜素材、怎么组队上面都说了。最后一点就是持之以恒。&lt;br&gt;做一个游戏并不能一蹴而就，对新人而言尤其如此。可能你做了几周甚至几个月，才做出一些很基础、很白痴的功能。请不要灰心，也不要气馁，我曾经3天才写出一个能用的血条。万事开头难，大家都是这样过来的。&lt;br&gt;在制作独立游戏的过程中，你可能会感到失望、感到孤独。但是请相信，只要你坚持下来，你终将收获一份快乐。而这种快乐，是你花多少钱，都无法得到的。&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;原贴地址: &lt;a href=&quot;http://tieba.baidu.com/p/2767234675&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://tieba.baidu.com/p/2767234675&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;师傅领进门，修行靠个人。&lt;br&gt;可是独立游戏领域，大多是独立游戏爱好者凭自己的兴趣做做。你从一个100%的纯新人，从一个普通的游戏玩家，该如何入门呢？本帖就此展开一些讨论，希望能帮助到一些新人朋友。&lt;/p&gt;
    
    </summary>
    
      <category term="Think" scheme="http://huyaohui.com/categories/Think/"/>
    
    
      <category term="Game" scheme="http://huyaohui.com/tags/Game/"/>
    
  </entry>
  
  <entry>
    <title>Libqgit2 clone error &quot;unable to lock mwindow mutex&quot;</title>
    <link href="http://huyaohui.com/2017/01/08/Libqgit2-clone-error-unable-to-lock-mwindow-mutex/"/>
    <id>http://huyaohui.com/2017/01/08/Libqgit2-clone-error-unable-to-lock-mwindow-mutex/</id>
    <published>2017-01-08T07:40:31.000Z</published>
    <updated>2017-01-08T08:23:09.000Z</updated>
    
    <content type="html">&lt;p&gt;首先说明一下这个error已经困扰了我两个多月了，求助了不少人，也找了N多资料都没能找到答案，关键是google都没能发现任何相关资料，简直崩溃。&lt;br&gt;不过今天终于才勉强解决了，但是感觉我的处理方式应该有问题，不过毕竟能用暂时就不纠结这么多了，下面具体说下我的解决方案，挺有意思的&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;找到解决方案过程&quot;&gt;找到解决方案过程&lt;/h2&gt;&lt;p&gt;在找到解决方案前，尝试了无数次的重新编译，换版本编译，得到的结果仍然是同样的蛋疼。&lt;br&gt;并且，我发现仅仅是&lt;code&gt;clone&lt;/code&gt;会出现这个错误，&lt;code&gt;init&lt;/code&gt;并不会发生崩溃，当时我就在想会不会不是&lt;code&gt;libqgit2&lt;/code&gt;的问题呢，因为使用&lt;code&gt;ctest -V&lt;/code&gt;测试是&lt;code&gt;clone&lt;/code&gt;是可以成功的。&lt;br&gt;由此推断出，应该是&lt;code&gt;QT Creator&lt;/code&gt;的问题（还有一个件事也能佐证我这个猜测，就是期间我使用了一个&lt;a href=&quot;http://github.com/qtpm/qtpm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;qtpm&lt;/a&gt;的包管理工具去安装&lt;code&gt;libqgit2&lt;/code&gt;是可以正常&lt;code&gt;clone&lt;/code&gt;的，但是这个东西不能导入&lt;code&gt;QT Creator&lt;/code&gt;而写项目关注的人也不多，遂放弃），但是到底是什么问题我并不清楚，我也不是很懂&lt;code&gt;QT&lt;/code&gt;和编译相关的东西。&lt;br&gt;为此我还在&lt;a href=&quot;http://stackoverflow.com/questions/41297760/unable-to-lock-mwindow-mutex&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;stackoverflow&lt;/a&gt;上提交了我这个问题，但是并没人鸟我，囧…&lt;br&gt;到最后，是在没办法，就使用这个错误中的关键词在项目源代码中所有，但是一无所得，后来我想到是不是不是&lt;code&gt;libqgit2&lt;/code&gt;的问题是&lt;code&gt;libgit2&lt;/code&gt;的问题呢，我一搜索，瞬间懵逼了，这个错误能再&lt;code&gt;libgit2&lt;/code&gt;的源码中找到，瞬间燃气了星星之火，感觉有希望了，遂去翻阅&lt;code&gt;libgit2&lt;/code&gt;的文档，然而可想而知我又懵逼了，并没有找到相关的文档&lt;br&gt;好吧心想硬着头皮去看源代码吧，这一看又看到希望了，里面的注释有说到这些方法使用来锁定window用的，但我根本就没有用到它的window啊，我有我自己的图形库，并不需要它去锁定什么window。&lt;br&gt;我这样一想，能不能把这些东西删除掉的内部实现注释掉呢，想想反正死马当活马医了，本以为会是一堆报错来打我脸，没想到居然行了，行了，了，天不亡我&lt;/p&gt;
&lt;h2 id=&quot;修改如下&quot;&gt;修改如下&lt;/h2&gt;&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim libgit2/src/mwindow.c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 注释到所有 git__mwindow_mutex 相关的判断&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 会有几处，我这里全部注释掉了&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// if (git_mutex_lock(&amp;amp;git__mwindow_mutex)) &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//  giterr_set(GITERR_THREAD, &quot;unable to lock mwindow mutex&quot;);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//  return;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;一直以为是&lt;code&gt;libqgit2&lt;/code&gt;或者是&lt;code&gt;QT Creator&lt;/code&gt;的问题，但是…&lt;/li&gt;
&lt;li&gt;不要过分相信权威（&lt;code&gt;libqgit2&lt;/code&gt;已经没人维护了，让我一直以为是它出了问题）&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;首先说明一下这个error已经困扰了我两个多月了，求助了不少人，也找了N多资料都没能找到答案，关键是google都没能发现任何相关资料，简直崩溃。&lt;br&gt;不过今天终于才勉强解决了，但是感觉我的处理方式应该有问题，不过毕竟能用暂时就不纠结这么多了，下面具体说下我的解决方案，挺有意思的&lt;/p&gt;
    
    </summary>
    
      <category term="GitNoteR" scheme="http://huyaohui.com/categories/GitNoteR/"/>
    
    
      <category term="C/CPP" scheme="http://huyaohui.com/tags/C-CPP/"/>
    
      <category term="Qt" scheme="http://huyaohui.com/tags/Qt/"/>
    
      <category term="libgit2" scheme="http://huyaohui.com/tags/libgit2/"/>
    
      <category term="libqgit2" scheme="http://huyaohui.com/tags/libqgit2/"/>
    
  </entry>
  
  <entry>
    <title>A simple C++ framework based on file</title>
    <link href="http://huyaohui.com/2016/12/26/A-simple-CPP-framework-based-on-file/"/>
    <id>http://huyaohui.com/2016/12/26/A-simple-CPP-framework-based-on-file/</id>
    <published>2016-12-26T12:49:12.000Z</published>
    <updated>2016-12-26T13:55:00.000Z</updated>
    
    <content type="html">&lt;p&gt;A simple C++ framework based on file.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;瞎扯淡&quot;&gt;瞎扯淡&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;前段时间(其实离现在已经不短了)印象笔记免费用户限制客户端同步个数, 像我这样 WindowsPC, WindowsBook, WindowsPad, WindowsPhoen, iPhone, MacBook, AndroidPad这么多设备需要同(我真不是装逼, 好吧我在装逼), 两台设备配额肯定不够的啊, 有木有, 别跟我说可以付费啊, 付费就不限制了, 反正我就不付费. &lt;/p&gt;
&lt;p&gt;于是乎就突发奇想, 自己开发一个笔记应用, 那么问题来了, 得需要服务器呢, 怎么办, 想来想去, 想到不是有git吗? 我可以用git来做服务器存储笔记文件啊, 我真他妈是个天才, 恩, 我差点就信了. &lt;/p&gt;
&lt;p&gt;经过一段时间的构思, 想起如果使用数据库的话, 会生成字节码文件, 这可不妙, git 对处理字节码可不在行, 思前想后, 最终决定使用纯纯文本文件为存储源, 存储数据, 反正也不会有很大的数据量, 于是乎就google了一番, 没找到相关的开源库, 心想这下坑爹了. 最终没办法, 只能自学了C++开始写这个库, 不要问我为什么不用自己擅长的语言写, 我要跨平台啊, 啊, 啊, 啊… 跨平台的话, 除了C/C++, 我还没有找到很好的选择. 这个项目我是准备支持全平台的, 好吧, 给自己挖了个巨坑… 反正无所谓了, 挖了就挖了, 填补填的上就看造化了.&lt;/p&gt;
&lt;p&gt;废话就这么多了, 下面是文档和开源地址&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;GitHub&quot;&gt;GitHub&lt;/h2&gt;&lt;h2 id=&quot;Get_Started&quot;&gt;Get Started&lt;/h2&gt;&lt;h3 id=&quot;Use&quot;&gt;Use&lt;/h3&gt;&lt;p&gt;Drag &lt;code&gt;src/*&lt;/code&gt; to your projects&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; &quot;FdbrQueryBuilder.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;namespace&lt;/span&gt; FileDBR;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; argc, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; * argv[])&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;FdbrQueryBuilder &lt;span class=&quot;title&quot;&gt;queryBuilder&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&quot;/Users/MakeHui/Desktop/&quot;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Definition&quot;&gt;Definition&lt;/h3&gt;&lt;p&gt;Create table and delete table&lt;/p&gt;
&lt;h4 id=&quot;createTable&quot;&gt;createTable&lt;/h4&gt;&lt;p&gt;Create table&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;bool createTable(string table, vector&amp;lt;string&amp;gt; columns)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;columns: create column name&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: bool&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;bool&lt;/span&gt; data = queryBuilder.createTable(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field3&quot;&lt;/span&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;deleteTable&quot;&gt;deleteTable&lt;/h4&gt;&lt;p&gt;Delete table&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;bool createTable(string table)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: bool&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;bool&lt;/span&gt; data = queryBuilder.deleteTable(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Where&quot;&gt;Where&lt;/h3&gt;&lt;p&gt;In the basic use. You can use symbols to filter parameters.&lt;/p&gt;
&lt;h4 id=&quot;equality&quot;&gt;equality&lt;/h4&gt;&lt;p&gt;field1 = 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// or&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 =&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;not_equal&quot;&gt;not equal&lt;/h4&gt;&lt;p&gt;field1 != 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 !=&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;greater&quot;&gt;greater&lt;/h4&gt;&lt;p&gt;field1 &amp;gt; 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 &amp;gt;&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;lesser&quot;&gt;lesser&lt;/h4&gt;&lt;p&gt;field1 &amp;lt; 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 &amp;lt;&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;greater_or_equal&quot;&gt;greater or equal&lt;/h4&gt;&lt;p&gt;field1 &amp;gt;= 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 &amp;gt;=&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;lesser_or_equal&quot;&gt;lesser or equal&lt;/h4&gt;&lt;p&gt;field1 &amp;lt;= 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 &amp;lt;=&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;like&quot;&gt;like&lt;/h4&gt;&lt;p&gt;field1 like 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 ~&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;not_like&quot;&gt;not like&lt;/h4&gt;&lt;p&gt;field1 not like 123&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1 !~&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Query&quot;&gt;Query&lt;/h3&gt;&lt;p&gt;Some to the query method in common use.&lt;/p&gt;
&lt;h4 id=&quot;select&quot;&gt;select&lt;/h4&gt;&lt;p&gt;Select data from table&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;vector&amp;lt;map&amp;lt;string, string&amp;gt;&amp;gt; select(string table, vector&amp;lt;string&amp;gt; columns = {}, map&amp;lt;string, string&amp;gt; where = {}, map&amp;lt;string, string&amp;gt; order = {})&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;columns: The target columns of data will be fetched&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;order: Sorting conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: vector&amp;lt;map&amp;lt;string, string&amp;gt;&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt;&amp;gt; data = queryBuilder.select(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;DESC&quot;&lt;/span&gt;&amp;#125;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;insert&quot;&gt;insert&lt;/h4&gt;&lt;p&gt;Insert new records in table&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;bool insert(string table, map&amp;lt;string, string&amp;gt; datas)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;datas: The data will be inserted into table&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: bool&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;bool&lt;/span&gt; data = queryBuilder.insert(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field3&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;456&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;update&quot;&gt;update&lt;/h4&gt;&lt;p&gt;Modify data in table&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;unsigned int update(string table, map&amp;lt;string, string&amp;gt; datas, map&amp;lt;string, string&amp;gt; where = {})&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;datas: The data that will be modified&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: The number of rows affected&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; data = queryBuilder.update(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;111&quot;&lt;/span&gt;&amp;#125;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;del&quot;&gt;del&lt;/h4&gt;&lt;p&gt;Delete data from table&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;unsigned int del(string table, map&amp;lt;string, string&amp;gt; where = {})&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: The number of rows affected&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; data = queryBuilder.del(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;get&quot;&gt;get&lt;/h4&gt;&lt;p&gt;Get only one record from table&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;map&amp;lt;string, string&amp;gt; get(string table, vector&amp;lt;string&amp;gt; columns = {}, map&amp;lt;string, string&amp;gt; where = {}, map&amp;lt;string, string&amp;gt; order = {})&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;columns: The target columns of data will be fetched&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;order: Sorting conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return map&amp;lt;string, string&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt; data = queryBuilder.get(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;123&quot;&lt;/span&gt;&amp;#125;&amp;#125;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;ASC&quot;&lt;/span&gt;&amp;#125;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;has&quot;&gt;has&lt;/h4&gt;&lt;p&gt;Determine whether the target data existed&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;bool has(string table, map&amp;lt;string, string&amp;gt; where = {})&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: bool&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;bool&lt;/span&gt; data = queryBuilder.has(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;count&quot;&gt;count&lt;/h4&gt;&lt;p&gt;Counts the number of rows&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;unsigned int count(string table, map&amp;lt;string, string&amp;gt; where = {});&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: unsigned int&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; data = queryBuilder.count(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;max&quot;&gt;max&lt;/h4&gt;&lt;p&gt;Get the maximum value for the column and support string&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;string max(string table, string column, map&amp;lt;string, string&amp;gt; where = {})&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;column: The target column will be calculated&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: string&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; data = queryBuilder.max(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;min&quot;&gt;min&lt;/h4&gt;&lt;p&gt;Get the minimum value for the column and support string&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;string min(string table, string column, map&amp;lt;string, string&amp;gt; where = {});&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;column: The target column will be calculated&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: string&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; data = queryBuilder.min(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;avg&quot;&gt;avg&lt;/h4&gt;&lt;p&gt;Get the average value for the column&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;long double avg(string table, string column, map&amp;lt;string, string&amp;gt; where = {});&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;column: The target column will be calculated&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: long double&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; data = queryBuilder.avg(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;sum&quot;&gt;sum&lt;/h4&gt;&lt;p&gt;Get the total value for the column&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;long double sum(string table, string column, map&amp;lt;string, string&amp;gt; where = {});&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;table: The table name&lt;/li&gt;
&lt;li&gt;column: The target column will be calculated&lt;/li&gt;
&lt;li&gt;where: Query conditions&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;li&gt;return: long double&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; data = queryBuilder.sum(&lt;span class=&quot;string&quot;&gt;&quot;tablename.fdbr&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;field2&quot;&lt;/span&gt;, &amp;#123;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;field1&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;100&quot;&lt;/span&gt;&amp;#125;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;License&quot;&gt;License&lt;/h2&gt;&lt;p&gt;FileDBR is under the LGPLv2.1 license.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;A simple C++ framework based on file.&lt;/p&gt;
    
    </summary>
    
      <category term="GitNoteR" scheme="http://huyaohui.com/categories/GitNoteR/"/>
    
    
      <category term="C/CPP" scheme="http://huyaohui.com/tags/C-CPP/"/>
    
      <category term="FileDBR" scheme="http://huyaohui.com/tags/FileDBR/"/>
    
      <category term="Library" scheme="http://huyaohui.com/tags/Library/"/>
    
  </entry>
  
  <entry>
    <title>CMake 编译 Qt 安装第三方 libqgit2 扩展</title>
    <link href="http://huyaohui.com/2016/11/11/CMake-%E7%BC%96%E8%AF%91-Qt-%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9-libqgit2-%E6%89%A9%E5%B1%95/"/>
    <id>http://huyaohui.com/2016/11/11/CMake-编译-Qt-安装第三方-libqgit2-扩展/</id>
    <published>2016-11-11T08:33:25.000Z</published>
    <updated>2017-01-08T07:36:59.000Z</updated>
    
    <content type="html">&lt;p&gt;虽然非常不愿意踏上编译这条不归路, 谁叫我爱折腾跨平台呢.&lt;br&gt;之前一直在搞 Cordova, 不过现在彻底对 H5 跨平台绝望了, 这里不做过多说明了, 可能以后会单独拿出来说道说道.&lt;br&gt;该扯得蛋也扯完了, ok, 进入正题, 编译 Qt 扩展, 坑坑坑…&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;这里我以编译&lt;code&gt;libqgit2&lt;/code&gt;为例说明&lt;/p&gt;
&lt;h2 id=&quot;下载安装相关依赖&quot;&gt;下载安装相关依赖&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://download.qt.io/official_releases/qt/5.7/5.7.0/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;download.qt.io 下载 qt-opensource-mac-x64-clang-5.7.0.dmg 安装包&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/anselmolsm/libqgit2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;anselmolsm/libqgit2 下载libqgit2源码&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/libgit2/libgit2/releases?after=v0.23.1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;libgit2/libgit2/releases 下载 libgit2 v0.23.0源码&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;安装_Qt&quot;&gt;安装 Qt&lt;/h3&gt;&lt;p&gt;傻瓜式安装 Pass…&lt;/p&gt;
&lt;p&gt;Ps: 不要忘记了安装目录, 要不就要悲剧了, 不过你不可能这么蠢的对不…&lt;/p&gt;
&lt;h3 id=&quot;编译准备&quot;&gt;编译准备&lt;/h3&gt;&lt;p&gt;先列出几个遇到的错误, 编译最坑的莫过于各种依赖了, 而且安装方式还不一样&lt;/p&gt;
&lt;h4 id=&quot;Building_with_Qt4_support&quot;&gt;Building with Qt4 support&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-- Building with Qt4 support&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CMake Error at /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/Cellar/cmake/&lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;/share/cmake/Modules/FindQt4.cmake:&lt;span class=&quot;number&quot;&gt;1328&lt;/span&gt; (message):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Found unsuitable Qt version &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt; from NOTFOUND, this code requires Qt &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;.x&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Call Stack (most recent call first):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  CMakeLists.txt:&lt;span class=&quot;number&quot;&gt;57&lt;/span&gt; (find_package)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-- Configuring incomplete, errors occurred!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;See also &lt;span class=&quot;string&quot;&gt;&quot;/Users/MakeHui/Downloads/libqgit2-master/build/CMakeFiles/CMakeOutput.log&quot;&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;错误原因: 是找不到 Qt 库&lt;br&gt;解决方法: 需要指定 Qt 库的路径&lt;/p&gt;
&lt;h4 id=&quot;No_libgit2_found&quot;&gt;No libgit2 found&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;FATAL_ERROR &lt;span class=&quot;string&quot;&gt;&quot;No libgit2 found!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Install the libgit2 development files to your system.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Alternatively define LIBGIT2_SRC_DIR to point to a libgit2 source directory.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;错误原因: 找不到 libgit2 库&lt;br&gt;解决方法: 有两种解决方法&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装&lt;code&gt;libgit2&lt;/code&gt;库, 但是千万别&lt;code&gt;brew install libgit2&lt;/code&gt;这样安装(这个非常坑爹, 差点搞的但都碎了), 原因是这样安装的一定是最新版, 但是&lt;code&gt;libqgit2&lt;/code&gt;这个库不支持最新版本的&lt;code&gt;libgit2&lt;/code&gt;, 够囧吧(主要还是没什么人维护了, 库原地址: &lt;a href=&quot;https://github.com/KDE/libqgit2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/KDE/libqgit2&lt;/a&gt; 有能力的可以去贡献代码)&lt;/li&gt;
&lt;li&gt;指定 &lt;code&gt;LIBGIT2_SRC_DIR&lt;/code&gt; 参数, 也就是指定&lt;code&gt;libgit2&lt;/code&gt;源代码的位置, 直接一并编译安装, 或者你先去手动编译安装一个低版本的&lt;code&gt;libgit2&lt;/code&gt;库同样没问题, 这里我推荐直接包含在&lt;code&gt;libqgit2&lt;/code&gt;中编译&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;Could_NOT_find_Doxygen&quot;&gt;Could NOT find Doxygen&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个错误不是很懂什么意思, 不过直接&lt;code&gt;brew install doxygen&lt;/code&gt;完事&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/29846214/could-not-find-doxygen-missing-doxygen-executable-in-mac-os-x&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/29846214/could-not-find-doxygen-missing-doxygen-executable-in-mac-os-x&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;修改_CMakeLists-txt_文件&quot;&gt;修改 CMakeLists.txt 文件&lt;/h4&gt;&lt;p&gt;添加下面两行&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; (CMAKE_PREFIX_PATH &lt;span class=&quot;string&quot;&gt;&quot;/Applications/Qt/5.7/clang_64&quot;&lt;/span&gt;)         &lt;span class=&quot;comment&quot;&gt;# Qt 库的路径&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; (LIBGIT2_SRC_DIR &lt;span class=&quot;string&quot;&gt;&quot;/Users/MakeHui/Downloads/libgit2-0.23.0&quot;&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;# libgit2 源码的路径&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;编译&quot;&gt;编译&lt;/h3&gt;&lt;p&gt;上面的准备工作完成后执行下面的命令开始编译&lt;br&gt;Ps: 先切换到&lt;code&gt;libqgit2&lt;/code&gt;源文件根目录&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Building (out of source build):&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &amp;gt; mkdir build &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &amp;gt; cmake .. &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &amp;gt; cmake --build .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Testing: 可不检查&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &amp;gt; ctest -V&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Install:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &amp;gt; cmake --build . --target install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;默认安装路径: &lt;code&gt;/usr/local&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;使用&quot;&gt;使用&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;创建项目Libqgit2Test&lt;/li&gt;
&lt;li&gt;打开Libqgit2Test.pro&lt;/li&gt;
&lt;li&gt;右键 -&amp;gt; Add Library… -&amp;gt; External library -&amp;gt; continue -&amp;gt; 选择库安装路径 -&amp;gt; continue&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;win32:CONFIG(release, debug|release): LIBS += -L$$PWD/../../../../../usr/local/lib/release/ -lqgit2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/../../../../../usr/local/lib/debug/ -lqgit2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;:unix: LIBS += -L$$PWD/../../../../../usr/local/lib/ -lqgit2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INCLUDEPATH += $$PWD/../../../../../usr/local/include&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DEPENDPATH += $$PWD/../../../../../usr/local/include&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;clone远程仓库&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;auto&lt;/span&gt; repository = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; LibQGit2::Repository();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    repository-&amp;gt;clone(&lt;span class=&quot;string&quot;&gt;&quot;http://git.famishare.cn/MakeHui/test2.git&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;/Users/MakeHui/Desktop/test3&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; LibQGit2::Exception&amp;amp; e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    qDebug() &amp;lt;&amp;lt; e.message();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qDebug() &amp;lt;&amp;lt; repository-&amp;gt;listReferences();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://doc.qt.io/qt-5/cmake-manual.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://doc.qt.io/qt-5/cmake-manual.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.claves.me/2015/04/29/cmake/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.claves.me/2015/04/29/cmake/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/listensong/p/4316944.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/listensong/p/4316944.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://svn.osgeo.org/ossim/trunk/ossim_package_support/cmake/CMakeModules/FindQt5.cmake&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://svn.osgeo.org/ossim/trunk/ossim_package_support/cmake/CMakeModules/FindQt5.cmake&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/15639781/how-to-find-qt5-cmake-module-on-windows&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/15639781/how-to-find-qt5-cmake-module-on-windows&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cppblog.com/Error/archive/2013/04/13/199407.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cppblog.com/Error/archive/2013/04/13/199407.aspx&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/u010598445/article/details/46729705&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/u010598445/article/details/46729705&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/29846214/could-not-find-doxygen-missing-doxygen-executable-in-mac-os-x&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/29846214/could-not-find-doxygen-missing-doxygen-executable-in-mac-os-x&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/33728905/qt-creator-project-error-xcode-not-set-up-properly-you-may-need-to-confirm-t&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/33728905/qt-creator-project-error-xcode-not-set-up-properly-you-may-need-to-confirm-t&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;虽然非常不愿意踏上编译这条不归路, 谁叫我爱折腾跨平台呢.&lt;br&gt;之前一直在搞 Cordova, 不过现在彻底对 H5 跨平台绝望了, 这里不做过多说明了, 可能以后会单独拿出来说道说道.&lt;br&gt;该扯得蛋也扯完了, ok, 进入正题, 编译 Qt 扩展, 坑坑坑…&lt;/p&gt;
    
    </summary>
    
      <category term="Qt" scheme="http://huyaohui.com/categories/Qt/"/>
    
    
      <category term="C/CPP" scheme="http://huyaohui.com/tags/C-CPP/"/>
    
      <category term="CMake" scheme="http://huyaohui.com/tags/CMake/"/>
    
      <category term="Qt" scheme="http://huyaohui.com/tags/Qt/"/>
    
      <category term="libgit2" scheme="http://huyaohui.com/tags/libgit2/"/>
    
      <category term="libqgit2" scheme="http://huyaohui.com/tags/libqgit2/"/>
    
  </entry>
  
  <entry>
    <title>简单使用 Apache JMeter 进行压力测试</title>
    <link href="http://huyaohui.com/2016/09/15/%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8-Apache-JMeter-%E8%BF%9B%E8%A1%8C%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/"/>
    <id>http://huyaohui.com/2016/09/15/简单使用-Apache-JMeter-进行压力测试/</id>
    <published>2016-09-15T15:50:10.000Z</published>
    <updated>2016-09-16T13:53:42.000Z</updated>
    
    <content type="html">&lt;p&gt;Jmeter是一个非常流行的性能测试工具, 开源，跨平台,且功能强大, 使用也非常方便, 仅需要安装&lt;code&gt;Java&lt;/code&gt;环境支持即可运行.&lt;br&gt;说到我为什么用它, 挺囧的, 没有找到&lt;code&gt;Mac&lt;/code&gt;上比较好用的测试工具, 虽然有 &lt;code&gt;ab&lt;/code&gt;, &lt;code&gt;http_load&lt;/code&gt;这样的控制台工具已经很好用了, 但是你要给你的领导看, 总不能直接截个控制台的图就行了吧, 怎么的也得图文并茂写上三五页的测试报告方能令你的领导满意对吧. 幸运的是&lt;code&gt;Apache JMeter&lt;/code&gt;完全能满足我的需要. 升职加薪, 出任CTO赢取白富美, 走上人生巅峰, 指日可待啊!(喂, 大兄弟醒醒, 起来加班了)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;下载_安装_Apache_JMeter&quot;&gt;下载 安装 Apache JMeter&lt;/h2&gt;&lt;p&gt;Mac 上一条命令搞定, so, easy, 前提是你安装了&lt;code&gt;homebrew&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew install jmeter&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;启动JMeter&quot;&gt;启动JMeter&lt;/h2&gt;&lt;p&gt;命令行执行下面命令, 就会启动一个图形界面了&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;jmeter&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;运行预准备&quot;&gt;运行预准备&lt;/h2&gt;&lt;p&gt;现在来对LinuxEye进行压力测试，压力测试对象为随机的几个网页链接，这几个链接是写在一个文本文件中的，在压力测试的时候会随机读取。&lt;/p&gt;
&lt;h3 id=&quot;建立一个线程组&quot;&gt;建立一个线程组&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2drpQXqLB11BjSspkXXcy9pXa_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;为什么要建立线程组？原因很简单，因为我们要模拟多个线程（用户）来访问LinuxEye。线程属性部分中，线程数是启动多少个线程，我这里填写的是10，Ramp-Up Period (in seconds)表示线程之间间隔多少时间允许，单位是秒，比如如果填写10，那么10/10=1表示10个线程间每隔1秒钟请求网站。循环次数：60个线程运行完毕算是一次，循环次数就是这样的一个请求过程运行多少次，我这里测试就填写的是2。每次修改一个设置后，别忘记了保存一下。&lt;/p&gt;
&lt;h3 id=&quot;设置请求服务器、压力链接等信息&quot;&gt;设置请求服务器、压力链接等信息&lt;/h3&gt;&lt;p&gt;接下来很自然的是，我们要测试的网站地址是什么？链接是什么？所以现在我们就来设置这些信息。右键点击我们刚创建的线程组，在弹出的菜单中，选择添加-&amp;gt;Sampler-&amp;gt;Http请求，弹出如下图界面：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2qLpQXr2B11BjSsplXXcMDVXa_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;假如你只是对一个链接进行压力测试，直接填写一个链接就ok，比如 &lt;a href=&quot;http://www.linuxeye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.linuxeye.com&lt;/a&gt;, 但是大多数情况下都不是这样的，我们这里需要多个链接，就如同刚开始讲到的那样，我们要将多个链接保存到一个文本文件中，然后随机读取进行压力测试。我们可以这么做，如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2UpNQXATB11BjSspbXXbhcVXa_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在选择一个功能下拉列表中选择_StringFromFile，然后在本机新建一个测试文件C:\Users\root\Desktop\apache-jmeter-2.9\test.txt，在第一行（你也可以不在第一行）的值中填写测试文件的路径，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2WkXQXBjC11BjSszdXXbGFpXa_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后点击“生成”按钮，在生成按钮的左边文本框中将生成一个字符串如：&lt;/p&gt;
&lt;p&gt;${__StringFromFile(C:\Users\root\Desktop\apache-jmeter-2.9\test.txt,,,)}&lt;/p&gt;
&lt;p&gt;在test.txt测试文件中，我们每行写一个URL链接，如下格式：&lt;/p&gt;
&lt;p&gt;/command&lt;br&gt;/linuxrumen&lt;br&gt;/program&lt;br&gt;/jianzhan&lt;br&gt;/command/cat.html&lt;br&gt;/command/chmod.html&lt;br&gt;/command/lsattr.html&lt;br&gt;注意，每行前面并没有 &lt;a href=&quot;http://www.linuxeye.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.linuxeye.com&lt;/a&gt; 这样的信息，因为我们在前面已经填写了服务器地址为 www.linuxeye.com, 这里就没必要再为每个url填写这个相同前缀了；另外，上面的url格式也只是个例子，表示域名后的部分。&lt;/p&gt;
&lt;p&gt;这样一来，当我们并非请求的时候，就会从test.txt中随机选择url来进行压力测试。&lt;/p&gt;
&lt;p&gt;另外值得注意的一个地方是，如果参数中有中文的情况，运行的时候可能会出现乱码，这个时候就需要注意你在Jmeter中的编码设置与你要请求的网页编码是一致的。&lt;/p&gt;
&lt;p&gt;路径文本框下面的选项，可以按默认的就成，Use multipart/form-data for HTTP POST是当请求中有附件的情况，一般情况下都不用选中的。&lt;/p&gt;
&lt;h3 id=&quot;查看运行结果&quot;&gt;查看运行结果&lt;/h3&gt;&lt;p&gt;鼠标右键点击线程组，在弹出的菜单中选择添加-&amp;gt;监听器-&amp;gt;用表格查询结果，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2IF8QXyYC11Bjy1zbXXbYLFXa_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;属性如下&quot;&gt;属性如下&lt;/h2&gt;&lt;p&gt;列举几个常用监听器索性说明&lt;/p&gt;
&lt;h3 id=&quot;查看结果树&quot;&gt;查看结果树&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2MutRXsHA11Bjy0FiXXckfVXa_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Sample：每个请求的序号&lt;/li&gt;
&lt;li&gt;Start Time：每个请求开始时间&lt;/li&gt;
&lt;li&gt;Thread Name：每个线程的名称&lt;/li&gt;
&lt;li&gt;Label：Http请求名称&lt;/li&gt;
&lt;li&gt;Sample Time：每个请求所花时间，单位毫秒&lt;/li&gt;
&lt;li&gt;Status：请求状态，如果为勾则表示成功，如果为叉表示失败。&lt;/li&gt;
&lt;li&gt;Bytes：请求的字节数&lt;/li&gt;
&lt;li&gt;如果Status为叉，那很显然请求是失败了，但如果是勾，也并不能认为请求就一定完全成功了，因为还得看Bytes的字节数是否是所请求网页的正常大小值，如果不是则说明发生了丢包现象，也不是完全成功。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在下面还有几个参数: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;样本数目：也就是上面所说的请求个数，成功的情况下等于你设定的并发数目乘以循环次数&lt;/li&gt;
&lt;li&gt;平均：每个线程请求的平均时间&lt;/li&gt;
&lt;li&gt;最新样本：表示服务器响应最后一个请求的时间&lt;/li&gt;
&lt;li&gt;偏离：服务器响应时间变化、离散程度测量值的大小，或者，换句话说，就是数据的分布（这个我不是很理解）。&lt;/li&gt;
&lt;li&gt;线程组：测试里每个任务都要线程去处理，所有我们后来的任务必须在线程组下面创建。可以在“Test Plan（鼠标右击） -&amp;gt; 添加  -&amp;gt;Threads(Users) -&amp;gt; 线程组”来建立它，然后在线程组面板里有几个输入栏：线程数、Ramp-Up Period(in seconds)、循环次数，其中Ramp-Up Period(in seconds)表示在这时间内创建完所有的线程。如有8个线程，Ramp-Up = 200秒，那么线程的启动时间间隔为200/8=25秒，这样的好处是：一开始不会对服务器有太大的负载。&lt;/li&gt;
&lt;li&gt;取样器（Sampler）：可以认为所有的测试任务都由取样器承担，有很多种，如：HTTP请求。&lt;/li&gt;
&lt;li&gt;断言：对取样器返回的请求结果给出判断是否正确。&lt;/li&gt;
&lt;li&gt;monitor：它的功能是对取样器的请求结果显示、统计一些数据（吞吐量、KB/S……）等&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;集合报告&quot;&gt;集合报告&lt;/h3&gt;&lt;p&gt;PS: 我的测试结果删了, 就不重跑一边截图了, 反正也就是标记一下给自己看&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;#Samples: 也就是图形报表中的样本数目，总共发送到服务器的样本数目。&lt;/li&gt;
&lt;li&gt;Average: 也就是图形报表中的平均值，是总运行时间除以发送到服务器的请求数。&lt;/li&gt;
&lt;li&gt;Median: 也就是图形报表中的中间值，是代表时间的数字，有一半的服务器响应时间低于该值而另一半高于该值。&lt;/li&gt;
&lt;li&gt;90%line: 是指90%请求的响应时间比所得数值还要小。&lt;/li&gt;
&lt;li&gt;95%line: 同上&lt;/li&gt;
&lt;li&gt;99%line: 同上&lt;/li&gt;
&lt;li&gt;Min: 服务器响应的最短时间。&lt;/li&gt;
&lt;li&gt;Max: 服务器响应的最长时间。&lt;/li&gt;
&lt;li&gt;Error%: 请求的错误百分比。&lt;/li&gt;
&lt;li&gt;Throughput: 也就是图形报表中的吞吐量，这里是服务器每单位时间处理的请求数，注意查看是秒或是分钟。&lt;/li&gt;
&lt;li&gt;KB/sec: 是每秒钟请求的字节数。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;图形结果&quot;&gt;图形结果&lt;/h3&gt;&lt;p&gt;PS: 我的测试结果删了, 就不重跑一边截图了, 反正也就是标记一下给自己看&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;数据: 数据分布图&lt;/li&gt;
&lt;li&gt;平均: 总运行时间除以发送到服务器的请求数&lt;/li&gt;
&lt;li&gt;中值: 代表时间的数字，有一半的服务器响应时间低于该值而另一半高于该值&lt;/li&gt;
&lt;li&gt;偏离: 表示服务器响应时间变化、离散程度测量值的大小，或者，换句话说，就是数据的分布&lt;/li&gt;
&lt;li&gt;吞吐量: 服务器每分钟处理的请求数&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;p&gt;功欲善其事, 必先利其器. 合理使用工具, 不重复造轮子, 有利于提升工作效率和和生活品质. 比如说这篇文章内容大部分来自参考内资料中的内容, 我只是对里面的内容进行了一定的修改和补充而已, 甚是美哉.&lt;br&gt;这里需要说明下, 本文章算是转载地址在下面&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://jmeter.apache.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://jmeter.apache.org/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://blog.linuxeye.com/335.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://blog.linuxeye.com/335.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/fnng/archive/2012/12/21/2828440.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/fnng/archive/2012/12/21/2828440.html&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Jmeter是一个非常流行的性能测试工具, 开源，跨平台,且功能强大, 使用也非常方便, 仅需要安装&lt;code&gt;Java&lt;/code&gt;环境支持即可运行.&lt;br&gt;说到我为什么用它, 挺囧的, 没有找到&lt;code&gt;Mac&lt;/code&gt;上比较好用的测试工具, 虽然有 &lt;code&gt;ab&lt;/code&gt;, &lt;code&gt;http_load&lt;/code&gt;这样的控制台工具已经很好用了, 但是你要给你的领导看, 总不能直接截个控制台的图就行了吧, 怎么的也得图文并茂写上三五页的测试报告方能令你的领导满意对吧. 幸运的是&lt;code&gt;Apache JMeter&lt;/code&gt;完全能满足我的需要. 升职加薪, 出任CTO赢取白富美, 走上人生巅峰, 指日可待啊!(喂, 大兄弟醒醒, 起来加班了)&lt;/p&gt;
    
    </summary>
    
      <category term="Software" scheme="http://huyaohui.com/categories/Software/"/>
    
    
      <category term="Apache" scheme="http://huyaohui.com/tags/Apache/"/>
    
      <category term="JMeter" scheme="http://huyaohui.com/tags/JMeter/"/>
    
      <category term="Software" scheme="http://huyaohui.com/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>Nginx配置性能优化</title>
    <link href="http://huyaohui.com/2016/07/16/Nginx%E9%85%8D%E7%BD%AE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    <id>http://huyaohui.com/2016/07/16/Nginx配置性能优化/</id>
    <published>2016-07-16T07:30:40.000Z</published>
    <updated>2016-08-12T10:39:47.000Z</updated>
    
    <content type="html">&lt;p&gt;在大多数情况下, 一个常规安装的Nginx已经可以满足大部分的需求了. 然而如果你想压榨出Nginx的所有性能, 就需要了解哪些指令会影响Nginx性能, 这里将会简单粗暴的方法来提升Nginx的性能, 可能不会去深入解释各个配置项之间的联系. 经过一系列的网上搜索资料和测试, 我大概整理了一些能够提升Nginx性能的方法和参数, 这里写出来供大家参考. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;默认配置&quot;&gt;默认配置&lt;/h2&gt;&lt;p&gt;这里先贴出Nginx安装完的默认配置, 方便到时候做对比&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# For more information on configuration, see:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   * Official English Documentation: http://nginx.org/en/docs/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   * Official Russian Documentation: http://nginx.org/ru/docs/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user  nginx;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;worker_processes  1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error_log  /var/log/nginx/error.log;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#error_log  /var/log/nginx/error.log  notice;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#error_log  /var/log/nginx/error.log  info;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pid        /var/run/nginx.pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;events &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    worker_connections  1024;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    include       /etc/nginx/mime.types;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default_type  application/octet-stream;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    access_log  /var/log/nginx/access.log  main;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sendfile        on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #tcp_nopush     on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #keepalive_timeout  0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    keepalive_timeout  65;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #gzip  on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # Load modular configuration files from the /etc/nginx/conf.d directory.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # See http://nginx.org/en/docs/ngx_core_module.html#include&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # for more information.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    include /etc/nginx/conf.d/*.conf;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    index   index.html index.htm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        listen       80;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        server_name  localhost;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        root         /usr/share/nginx/html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #charset koi8-r;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #access_log  /var/log/nginx/host.access.log  main;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        # redirect server error pages to the static page /40x.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        error_page  404              /404.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        location = /40x.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        # redirect server error pages to the static page /50x.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        error_page   500 502 503 504  /50x.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        location = /50x.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        # proxy the PHP scripts to Apache listening on 127.0.0.1:80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #location ~ \.php$ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #    proxy_pass   http://127.0.0.1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #location ~ \.php$ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #    root           html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #    fastcgi_pass   127.0.0.1:9000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #    fastcgi_index  index.php;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #    include        fastcgi_params;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        # deny access to .htaccess files, if Apache&#39;s document root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        # concurs with nginx&#39;s one&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #location ~ /\.ht &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #    deny  all;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # another virtual host using mix of IP-, name-, and port-based configuration&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    listen       8000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    listen       somename:8080;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    server_name  somename  alias  another.alias;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    root         html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # HTTPS server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    listen       443;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    server_name  localhost;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    root         html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    ssl                  on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    ssl_certificate      cert.pem;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    ssl_certificate_key  cert.key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    ssl_session_timeout  5m;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    ssl_protocols  SSLv2 SSLv3 TLSv1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    ssl_ciphers  HIGH:!aNULL:!MD5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    ssl_prefer_server_ciphers   on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;优化后的配置&quot;&gt;优化后的配置&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 运行用户&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user  www www;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 启动进程, 通常设置成和cpu的数量相等&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;worker_processes  4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 记录最少的错误信息, 节省磁盘IO上的损耗&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error_log  /var/log/nginx/error.log crit;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pid        /var/run/nginx.pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 指定最大可打开文件个是, 这里直接设置成系统最大文件打开数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;worker_rlimit_nofile 65535;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;events&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # epoll是多路复用IO(I/O Multiplexing)中的一种方式,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 仅用于linux2.6以上内核,可以大大提高nginx的性能&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 这个也是Windows系统上是用Nginx就是渣渣的原因, Windows不支持epoll模式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    use epoll;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #单个后台worker process进程的最大并发链接数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 这里照样设置成系统最大文件打开数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    worker_connections 65535;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 前排说明: 经测试http中的配置, 貌似并没有对提升Nginx性能有多大帮助&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 这里建议还是使用默认值吧, 不过我这里仍然把收集到的一些信息列出来, 方便有心人查阅&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 设定mime类型,类型由mime.type文件定义&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    include       mime.types;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default_type  application/octet-stream;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 设定日志格式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    log_format &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #sendfile 指令指定 nginx 是否调用 sendfile 函数（zero copy 方式）来输出文件，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #对于普通应用，必须设为 on,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #如果用来进行下载等应用磁盘IO重负载应用，可设置为 off，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #以平衡磁盘与网络I/O处理速度，降低系统的uptime.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sendfile on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 告诉nginx不要缓存数据, 而是一段一段的发送--当需要及时发送数据时, 就应该给应用设置这个属性, 这样发送一小块数据信息时就不能立即得到返回值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tcp_nodelay on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 设定请求缓冲&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 这里的配置比较接近默认配置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 如果你内存紧张的话可以大大削减这里buffer的大小&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    server_names_hash_bucket_size 128;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 用于设置客户端请求的Header头缓冲区大小, 一般4KB大小足够了&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 没记错的话默认值好像是1k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client_header_buffer_size 32k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # nginx默认会用client_header_buffer_size这个buffer来读取header值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    large_client_header_buffers 4 32k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 设置客户端能够上传的文件大小, 默认为1m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client_max_body_size 8m;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 连接超时时间&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    keepalive_timeout 60;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # fastcgi相关配置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 指定同FastCGI服务器的连接超时时间&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fastcgi_connect_timeout 300;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 指令为上游服务器设置等待一个FastCGI进程的传送数据时间，如果有一些直到它们运行完才有输出的长时间运行的FastCGI进程，那么可以修改这个值，如果你在上有服务器的error log里面发现一些超时错误，那么可以恰当的增加这个值。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 指令指定请求服务器的超时时间，指完成了2次握手的连接，而不是完整的连接，如果在这期间客户端没有进行数据传递，那么服务器将关闭这个连接。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 在Nginx+FastCGI 配置测试中, 其中在request_terminate_timeout设置为永不超时的情况下，nginx中fastcgi_read_timeout 的设置时间将影响到最终的超时时间。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fastcgi_send_timeout 300;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 前端FastCGI服务器的响应超时时间，如果有一些直到它们运行完才有输出的长时间运行的FastCGI进程，或者在错误日志中出现前端服务器响应超时错误，可能需要调整这个值。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fastcgi_read_timeout 300;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 读取fastcgi应答第一部分需要多大缓冲区，该值表示使用1个64kb的缓冲区读取应答第一部分(应答头),可以设置为fastcgi_buffers选项缓冲区大小&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fastcgi_buffer_size 64k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 指定本地需要多少和多大的缓冲区来缓冲fastcgi应答请求，假设一个php或java脚本所产生页面大小为256kb,那么会为其分配4个64kb的缓冲来缓存；若页面大于256kb,那么大于的256kb的部分会缓存到fastcgi_temp指定路径中，这并非是个好办法，内存数据处理快于硬盘，一般该值应该为站点中php/java脚本所产生页面大小中间值，如果站点大部分脚本所产生的页面大小为256kb，那么可把值设置为16 16k,4 64k等&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fastcgi_buffers 4 64k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 默认为fastcgi_buffer的2倍&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fastcgi_busy_buffers_size 128k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 开启压缩&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gzip on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gzip_min_length  1k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gzip_buffers     4 16k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gzip_http_version 1.0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gzip_comp_level 2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gzip_types       text/plain application/x-javascript text/css application/xml;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gzip_vary on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # 导入server配置文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    include /etc/nginx/conf.d/*.conf;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;p&gt;经过一系列的测试发现, 如果只是把Nginx当做普通的web server使用, 默认的配置基本就能满足当前的使用了, 然后就是把&lt;code&gt;worker_rlimit_nofile&lt;/code&gt;, &lt;code&gt;worker_connections&lt;/code&gt;的值根据系统配置进行相应的调整(PS: 我这里比较暴力, 直接开到了最大), 基本就能把性能调到最佳了. 然后就是&lt;code&gt;FastCGI&lt;/code&gt;进程的问题里, 这个到时候另起一篇文章讲. OK, 完美&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://linux008.blog.51cto.com/2837805/547236&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://linux008.blog.51cto.com/2837805/547236&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.nginx.cn/76.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.nginx.cn/76.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://mos.meituan.com/library/30/how-to-optimize-nginx/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://mos.meituan.com/library/30/how-to-optimize-nginx/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.linuxidc.com/Linux/2014-10/108012.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.linuxidc.com/Linux/2014-10/108012.htm&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.2cto.com/os/201407/316653.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.2cto.com/os/201407/316653.html&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在大多数情况下, 一个常规安装的Nginx已经可以满足大部分的需求了. 然而如果你想压榨出Nginx的所有性能, 就需要了解哪些指令会影响Nginx性能, 这里将会简单粗暴的方法来提升Nginx的性能, 可能不会去深入解释各个配置项之间的联系. 经过一系列的网上搜索资料和测试, 我大概整理了一些能够提升Nginx性能的方法和参数, 这里写出来供大家参考. &lt;/p&gt;
    
    </summary>
    
      <category term="Nginx" scheme="http://huyaohui.com/categories/Nginx/"/>
    
    
      <category term="Nginx" scheme="http://huyaohui.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>CentOS6.8 使用非官方源安装LNMP环境 PHP7 MySQL55 Nginx18</title>
    <link href="http://huyaohui.com/2016/06/30/CentOS6.8-%E4%BD%BF%E7%94%A8%E9%9D%9E%E5%AE%98%E6%96%B9%E6%BA%90%E5%AE%89%E8%A3%85LNMP%E7%8E%AF%E5%A2%83-PHP7-MySQL55-Nginx18/"/>
    <id>http://huyaohui.com/2016/06/30/CentOS6.8-使用非官方源安装LNMP环境-PHP7-MySQL55-Nginx18/</id>
    <published>2016-06-30T13:43:25.000Z</published>
    <updated>2016-07-16T08:55:35.000Z</updated>
    
    <content type="html">&lt;p&gt;虽然网上能找到一大堆安装LNMP环境的文章, 讲的都是直接使用CentOS源安装, 最后安装完会发现都是很老的软件了, 叫人吐槽不能.&lt;br&gt;如果使用源码编译又是各种坑, 还好我们还有第三方源可以使用, 接下来我就使用第三方源来安装LNMP (PS: 其实还是有不不少坑的)&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;添加epel源&quot;&gt;添加epel源&lt;/h2&gt;&lt;p&gt;这个第三方源应该不至于不知道吧, 有了他基本就能安装绝大部分的新版软件了, 妈妈在也不用担心编译失败了呢.(念念碎: 编译的苦, 只有真正编译过的人才能体会/(ㄒoㄒ)/~~)&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;.noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;安装软件&quot;&gt;安装软件&lt;/h2&gt;&lt;p&gt;这里只介绍安装: Nginx, PHP, MySQL, 其它的就自行摸索吧, 大同小异. &lt;/p&gt;
&lt;h3 id=&quot;创建web账号&quot;&gt;创建web账号&lt;/h3&gt;&lt;p&gt;这里先创建一个web账号, 用于管理整个web服务&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;useradd www	&lt;span class=&quot;comment&quot;&gt;# 添加用户&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;passwd www	&lt;span class=&quot;comment&quot;&gt;# 设置密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 取消用户ssh登录权限&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;usermod &lt;span class=&quot;operator&quot;&gt;-s&lt;/span&gt; /sbin/nologin www&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 添加SELinux权限 http://stackoverflow.com/questions/6795350/nginx-403-forbidden-for-all-files&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chcon -Rt httpd_sys_content_t /home/www&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 其实这里建议关闭SELinux和iptables(这两个东西可以菜鸟杀手), 这只是临时关闭, 并不建议永久关闭&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如何使用SELinux和iptables就自行google吧, 这里就不进行赘述了&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/iptables stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setenforce &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;安装nginx1-8&quot;&gt;安装nginx1.8&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install -y nginx18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 更改所有者, 上面创建的账号排上用场了&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 也可以不更改, 不过建议更改&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/nginx/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user www www;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 配置虚拟主机, 配置文件这里就不贴出来了, 没上面太大意义&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 我们主要讲如何安装, 和遇到那些坑&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /etc/nginx/conf.d/	&lt;span class=&quot;comment&quot;&gt;# 虚拟主机目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi default.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/nginx restart	&lt;span class=&quot;comment&quot;&gt;# 修改完重启&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 更改nginx所有者&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果不更改的话你会发现, phpinfo的信息无法打印出来, 这个也是小坑了下&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chown -R www:www /var/lib/nginx/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;安装php7和相关扩展&quot;&gt;安装php7和相关扩展&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install -y php70w php70w-fpm php70w-opcache php70w-mysqlnd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 更改所有者, 与上面保持一致&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/php-fpm.d/www.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user = www&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group = www&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/php-fpm restart		&lt;span class=&quot;comment&quot;&gt;# 修改完毕后重启&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;PS: 推荐安装&lt;code&gt;php70w-mysqlnd&lt;/code&gt;, 不要安装&lt;code&gt;php70w-mysql&lt;/code&gt; 我可被坑惨了, 被坑全过程: &lt;a href=&quot;https://segmentfault.com/q/1010000005872893&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;关于php7 设计链接mysqlutf8mb4字符集的问题&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;安装mysql5-5&quot;&gt;安装mysql5.5&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install -y mysql55w mysql55w-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果发现无法安装, 可能是系统中的 mysql-libs 版本不够高, 卸载后再执行上面的安装命令即可&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum remove -y mysql-libs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 设置root密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql_upgrade -u root -p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果发现无法设置密码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/my.cnf 	&lt;span class=&quot;comment&quot;&gt;# 在[mysqld]的段中加上一句: skip-grant-tables&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/mysqld restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; USE mysql;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; UPDATE user SET Password = password ( &lt;span class=&quot;string&quot;&gt;&#39;new-password&#39;&lt;/span&gt; ) WHERE User = &lt;span class=&quot;string&quot;&gt;&#39;root&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; flush privileges;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; \q&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/my.cnf 	&lt;span class=&quot;comment&quot;&gt;# 将刚才在[mysqld]的段中加上的 skip-grant-tables 删除&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/mysqld restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;开机自起&quot;&gt;开机自起&lt;/h3&gt;&lt;p&gt;设置这些软件开机自动启动, 免得重启的时候忘记启动&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chkconfig --levels &lt;span class=&quot;number&quot;&gt;235&lt;/span&gt; mysqld on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chkconfig --levels &lt;span class=&quot;number&quot;&gt;235&lt;/span&gt; nginx on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chkconfig --levels &lt;span class=&quot;number&quot;&gt;235&lt;/span&gt; php-fpm on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;p&gt;整个安装过程看似挺简单的, 但是实际我安装完差不多花了有三个半小时, 主要是其中的几个坑把我坑的不要不要, 不过也挺好的毕竟问题都圆满的解决了, 还是蛮有成就管的, 哈哈…&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-6&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How To Install Linux, nginx, MySQL, PHP (LEMP) stack on CentOS 6&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://webtatic.com/packages/php70/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PHP 7 on CentOS/RHEL 6.8 and 7.2 via Yum&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://webtatic.com/packages/nginx18/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Nginx 1.8 on CentOS/RHEL 7.1 and 6.7 via Yum&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://webtatic.com/packages/mysql55/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MySQL 5.5 on CentOS/RHEL 6.7 and 5.11 via Yum&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/6795350/nginx-403-forbidden-for-all-files&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Nginx 403 forbidden for all files&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://talk.ninghao.net/t/nginxquan-xian-wen-ti-dao-zhi-phpinfoxian-shi-bu-quan-huo-zhe-bu-xian-shi/3073&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Nginx权限问题导致Phpinfo显示不全，或者不显示。&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;虽然网上能找到一大堆安装LNMP环境的文章, 讲的都是直接使用CentOS源安装, 最后安装完会发现都是很老的软件了, 叫人吐槽不能.&lt;br&gt;如果使用源码编译又是各种坑, 还好我们还有第三方源可以使用, 接下来我就使用第三方源来安装LNMP (PS: 其实还是有不不少坑的)&lt;/p&gt;
    
    </summary>
    
      <category term="CentOS" scheme="http://huyaohui.com/categories/CentOS/"/>
    
    
      <category term="CentOS" scheme="http://huyaohui.com/tags/CentOS/"/>
    
      <category term="LNMP" scheme="http://huyaohui.com/tags/LNMP/"/>
    
      <category term="MySQL" scheme="http://huyaohui.com/tags/MySQL/"/>
    
      <category term="Nginx" scheme="http://huyaohui.com/tags/Nginx/"/>
    
      <category term="PHP" scheme="http://huyaohui.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>教你如何取消恶心的迅雷浏览器关联</title>
    <link href="http://huyaohui.com/2016/04/03/%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E5%8F%96%E6%B6%88%E6%81%B6%E5%BF%83%E7%9A%84%E8%BF%85%E9%9B%B7%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%B3%E8%81%94/"/>
    <id>http://huyaohui.com/2016/04/03/教你如何取消恶心的迅雷浏览器关联/</id>
    <published>2016-04-03T14:12:45.000Z</published>
    <updated>2016-04-03T17:50:07.000Z</updated>
    
    <content type="html">&lt;p&gt;还在为可恶的迅雷强制关联浏览器而苦恼吗? 还在为找不到关闭的方法而蛋痛菊紧吗? 大丈夫, 萌大奶, 现在就跟着我的步伐一起来, 左手右手一个慢动作, 右手左手慢动作重播…&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;咳咳… 不扯淡了&lt;/p&gt;
&lt;h2 id=&quot;网上找到的一些方法&quot;&gt;网上找到的一些方法&lt;/h2&gt;&lt;p&gt;在进入正题之前, 还是需要简单说明下, 这里面一些坑爹的地方. &lt;/p&gt;
&lt;h3 id=&quot;设置关闭&quot;&gt;设置关闭&lt;/h3&gt;&lt;p&gt;我只想说哔了哮天犬, 我尝试了N遍, 浪费了长达十几分钟的宝贵的青春, 这里我事先声明我保留起诉迅雷的权利.&lt;br&gt;网上一大推人说这样可行, 估计他们更不就没有尝试过吧…也是呵呵了…&lt;/p&gt;
&lt;h3 id=&quot;设置不关联名单&quot;&gt;设置不关联名单&lt;/h3&gt;&lt;p&gt;这个经测试确实可用, 但是你喵的, 难道我没个网站都要去添加一遍吗? 当我煞笔呢? 瞧不起程序员吗? 这里我事先声明我保留告迅雷起诉的权利.&lt;br&gt;也正是呵呵了. 百度知道被踩了十几次, 无一点赞, 估计当你看到我这&lt;br&gt;篇文章是已经被踩了二十次以上了. 巴嘎巴嘎西落&lt;/p&gt;
&lt;h3 id=&quot;Ctrl_+_鼠标左健&quot;&gt;Ctrl + 鼠标左健&lt;/h3&gt;&lt;p&gt;FK, 逗我呢? 很多网站都不能这样点的好吗? 迅雷官方的大大们, 你们统统都来自异次元吗? 那干嘛不回你的异次元去呢? &lt;/p&gt;
&lt;h2 id=&quot;正确答案&quot;&gt;正确答案&lt;/h2&gt;&lt;p&gt;终于吐槽(啰)槽(嗦)完了, 现在开始说明正式的解决方案. &lt;/p&gt;
&lt;p&gt;启发来自&lt;a href=&quot;http://www.jb51.net/softjc/10405.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;脚本之家&lt;/a&gt;, 里面说到其实迅雷会通过去读配置文件来确定是否有关闭关联浏览器的功能&lt;br&gt;虽然没有找到上面这篇文章里说到了那个配置文件, 但是通过搜索, 找到了类似的文件, 于是经过简单的尝试便找到了具体修改的地方. 如下:&lt;/p&gt;
&lt;h3 id=&quot;文件一&quot;&gt;文件一&lt;/h3&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// to\path\Profiles\BrowserSupport\config.ini&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[IE]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pluginstate=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;repairerrorcode=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lastautorepairtime=1456844869&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[Common]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;version=2.0.0.88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[SmartRepair]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enable=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IE=0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;文件二&quot;&gt;文件二&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// to\path\Profiles\config.ini&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;BrowserSupport&#39;&lt;/span&gt;  &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;string&#39;&lt;/span&gt; &amp;gt;&lt;/span&gt;0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;Browsertips&#39;&lt;/span&gt; &amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;bShow&#39;&lt;/span&gt;  &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;int&#39;&lt;/span&gt; &amp;gt;&lt;/span&gt;0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;lastCloseTime&#39;&lt;/span&gt;  &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;int&#39;&lt;/span&gt; &amp;gt;&lt;/span&gt;0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;Browser&#39;&lt;/span&gt; &amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;PromotionBrowser&#39;&lt;/span&gt;  &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&#39;int&#39;&lt;/span&gt; &amp;gt;&lt;/span&gt;0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;section&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;修改文件权限&quot;&gt;修改文件权限&lt;/h2&gt;&lt;p&gt;最后需要把两个文件的权限改为只读, 防止迅雷还原配置文件&lt;/p&gt;
&lt;h3 id=&quot;总结&quot;&gt;总结&lt;/h3&gt;&lt;p&gt;魔高一尺道高一丈, 这次虽然找到了解决方案, 但不知道这种方法能保持多久时间, 在这里衷心祷告, 诸位厂商大大, 留点节操, 愿我们的子孙能多一片洁白的天空…(手动滑稽)&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;还在为可恶的迅雷强制关联浏览器而苦恼吗? 还在为找不到关闭的方法而蛋痛菊紧吗? 大丈夫, 萌大奶, 现在就跟着我的步伐一起来, 左手右手一个慢动作, 右手左手慢动作重播…&lt;/p&gt;
    
    </summary>
    
      <category term="Windows" scheme="http://huyaohui.com/categories/Windows/"/>
    
    
      <category term="Software" scheme="http://huyaohui.com/tags/Software/"/>
    
      <category term="Thunder" scheme="http://huyaohui.com/tags/Thunder/"/>
    
      <category term="Windows" scheme="http://huyaohui.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>CentOS6.5安装GitLab7.10.4</title>
    <link href="http://huyaohui.com/2016/01/09/CentOS6.5%E5%AE%89%E8%A3%85GitLab7.10.4/"/>
    <id>http://huyaohui.com/2016/01/09/CentOS6.5安装GitLab7.10.4/</id>
    <published>2016-01-09T09:00:41.000Z</published>
    <updated>2016-06-30T10:32:23.000Z</updated>
    
    <content type="html">&lt;p&gt;GitLab，是一个利用 Ruby on Rails 开发的开源应用程序，实现一个自托管的Git项目仓库，可通过Web界面进行访问公开的或者私人项目。&lt;br&gt;它拥有与GitHub类似的功能，能够浏览源代码，管理缺陷和注释。可以管理团队对仓库的访问，它非常易于浏览提交过的版本并提供一个文件历史库。团队成员可以利用内置的简单聊天程序（Wall）进行交流。它还提供一个代码片段收集功能可以轻松实现代码复用，便于日后有需要的时候进行查找。&lt;br&gt;GitLab 要求服务器端采用 Gitolite 搭建(为了方便安装，现已经用gitlab-shell代替Gitolite[1])。&lt;a href=&quot;https://zh.wikipedia.org/wiki/Gitlab&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;-&amp;gt;wikipedia.org&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;GitLab的安装方式&quot;&gt;GitLab的安装方式&lt;/h2&gt;&lt;p&gt;GitLab的两种安装方法&lt;/p&gt;
&lt;h3 id=&quot;编译安装&quot;&gt;编译安装&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;优点：可定制性强。数据库既可以选择MySQL,也可以选择PostgreSQL;服务器既可以选择Apache，也可以选择Nginx。&lt;/li&gt;
&lt;li&gt;缺点：国外的源不稳定，被墙时，依赖软件包难以下载。配置流程繁琐、复杂，容易出现各种各样的问题。依赖关系多，不容易管理，卸载GitLab相对麻烦。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;通过rpm包安装&quot;&gt;通过rpm包安装&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;优点：安装过程简单，安装速度快。采用rpm包安装方式，安装的软件包便于管理。&lt;/li&gt;
&lt;li&gt;缺点：数据库默认采用PostgreSQL，服务器默认采用Nginx，不容易定制。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;安装GitLab_CE_Omnibus包&quot;&gt;安装GitLab CE Omnibus包&lt;/h2&gt;&lt;h3 id=&quot;查看系统版本&quot;&gt;查看系统版本&lt;/h3&gt;&lt;p&gt;在linux终端下，使用cat /etc/issue命令查询当前系统的发行版本，查询到阿里云所安装的linux版本为CentOS release 6.6 (Final)。&lt;/p&gt;
&lt;h3 id=&quot;下载系统对应的安装包&quot;&gt;下载系统对应的安装包&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://about.gitlab.com/downloads/archives/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://about.gitlab.com/downloads/archives/&lt;/a&gt;&lt;br&gt;进入gitlab官方网站,选择对应的操作系统——CentOS 6 (and RedHat/Oracle/Scientific Linux 6)&lt;/p&gt;
&lt;h3 id=&quot;按照官方的提示进行安装&quot;&gt;按照官方的提示进行安装&lt;/h3&gt;&lt;h4 id=&quot;安装配置必要的依赖&quot;&gt;安装配置必要的依赖&lt;/h4&gt;&lt;p&gt;在Centos 6 和 7 中，以下的命令将会打开HTTP和SSH在系统防火墙中的可访问权限。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install openssh-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install postfix&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install cronie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo service postfix start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo chkconfig postfix on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo lokkit &lt;span class=&quot;operator&quot;&gt;-s&lt;/span&gt; http &lt;span class=&quot;operator&quot;&gt;-s&lt;/span&gt; ssh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;下载Omnibus_package包并安装&quot;&gt;下载Omnibus package包并安装&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget https://downloads-packages.s3.amazonaws.com/centos-&lt;span class=&quot;number&quot;&gt;6.6&lt;/span&gt;/gitlab-ce-&lt;span class=&quot;number&quot;&gt;7.10&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;~omnibus-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;.x86_64.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo rpm -i gitlab-ce-&lt;span class=&quot;number&quot;&gt;7.10&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;~omnibus-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;.x86_64.rpm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;Note:由于amazonaws的服务器被墙，下载这个包时可能需要翻墙下载。&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;配置并启动GitLab&quot;&gt;配置并启动GitLab&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;打开&lt;code&gt;/etc/gitlab/gitlab.rb&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;将&lt;code&gt;external_url = &amp;#39;http://git.example.com&amp;#39;&lt;/code&gt;修改为自己的IP地址：&lt;code&gt;http://xxx.xx.xxx.xx&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后执行下面的命令，对GitLab进行编译。&lt;code&gt;sudo gitlab-ctl reconfigure&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;登录GitLab&quot;&gt;登录GitLab&lt;/h4&gt;&lt;p&gt;Username: root&lt;br&gt;Password: 5iveL!fe&lt;/p&gt;
&lt;h2 id=&quot;安装过程中出现的问题&quot;&gt;安装过程中出现的问题&lt;/h2&gt;&lt;h3 id=&quot;在浏览器中访问GitLab出现502错误&quot;&gt;在浏览器中访问GitLab出现502错误&lt;/h3&gt;&lt;p&gt;原因：内存不足。&lt;/p&gt;
&lt;p&gt;解决办法：检查系统的虚拟内存是否随机启动了，如果系统无虚拟内存，则增加虚拟内存，再重新启动系统。&lt;/p&gt;
&lt;h3 id=&quot;80端口冲突&quot;&gt;80端口冲突&lt;/h3&gt;&lt;p&gt;原因：Nginx默认使用了80端口。&lt;/p&gt;
&lt;p&gt;解决办法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;为了使Nginx与Apache能够共存，并且为了简化GitLab的URL地址，Nginx端口保持不变，修改Apache的端口为&lt;code&gt;4040&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;这样就可以直接用使用ip访问Gitlab。&lt;/li&gt;
&lt;li&gt;而禅道则可以使用&lt;code&gt;4040&lt;/code&gt;端口进行访问，像这样：&lt;code&gt;xxx.xx.xxx.xx:4040/zentao&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;具体修改的地方在&lt;code&gt;/etc/httpd/conf/httpd.conf&lt;/code&gt;这个文件中&lt;/li&gt;
&lt;li&gt;找到&lt;code&gt;Listen 80&lt;/code&gt;这一句并将之注释掉&lt;/li&gt;
&lt;li&gt;在底下添加一句&lt;code&gt;Listen 4040&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;保存后执行&lt;code&gt;service httpd restart&lt;/code&gt;重启apache服务即可。&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#Listen 80 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Listen &lt;span class=&quot;number&quot;&gt;4040&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;8080端口冲突&quot;&gt;8080端口冲突&lt;/h3&gt;&lt;p&gt;原因：由于unicorn默认使用的是8080端口。&lt;/p&gt;
&lt;p&gt;解决办法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;打开&lt;code&gt;/etc/gitlab/gitlab.rb&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;去掉&lt;code&gt;# unicorn[&amp;#39;port&amp;#39;] = 8080&lt;/code&gt;的注释，将&lt;code&gt;8080&lt;/code&gt;修改为&lt;code&gt;9090&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;保存后运行&lt;code&gt;sudo gitlab-ctl reconfigure&lt;/code&gt;即可。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;STMP设置&quot;&gt;STMP设置&lt;/h3&gt;&lt;p&gt;配置无效，暂时不知道原因。&lt;/p&gt;
&lt;h3 id=&quot;GitLab头像无法正常显示&quot;&gt;GitLab头像无法正常显示&lt;/h3&gt;&lt;p&gt;原因：gravatar被墙&lt;br&gt;解决办法：&lt;br&gt;编辑 /etc/gitlab/gitlab.rb，将&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# gitlab_rails[&#39;gravatar_plain_url&#39;] = &#39;http://gravatar.duoshuo.com/avatar/%&amp;#123;hash&amp;#125;?s=%&amp;#123;size&amp;#125;&amp;amp;d=identicon&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## 修改为：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_rails[&lt;span class=&quot;string&quot;&gt;&#39;gravatar_plain_url&#39;&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&#39;http://gravatar.duoshuo.com/avatar/%&amp;#123;hash&amp;#125;?s=%&amp;#123;size&amp;#125;&amp;amp;d=identicon&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后在命令行执行：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl reconfigure &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-rake cache:clear RAILS_ENV=production&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;补充&quot;&gt;补充&lt;/h2&gt;&lt;h3 id=&quot;使用过程中_500&quot;&gt;使用过程中 500&lt;/h3&gt;&lt;h4 id=&quot;起初以为是GitLab本身的问题&quot;&gt;起初以为是GitLab本身的问题&lt;/h4&gt;&lt;p&gt;期间试了N中方法, 并没有成功, 这里记录下来一种比较靠谱的说法&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gitlab-rake gitlab:check&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab-rake db:migrate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab-ctl reconfigure&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab-ctl restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;我遇到的实际的原因&quot;&gt;我遇到的实际的原因&lt;/h4&gt;&lt;p&gt;就只是应为我服务器的内存过小&lt;br&gt;真的就只是这个问题而已, 整了好久 %&amp;gt;_&amp;lt;%&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Ps: 推荐内存2GB以上&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;关于第三方有email的问题&quot;&gt;关于第三方有email的问题&lt;/h3&gt;&lt;p&gt;尝试了N久, 并没能成功&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://905010.com/archives/472&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://905010.com/archives/472&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://my.oschina.net/u/1158620/blog/289191?fromerr=hW0nWMlX&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://my.oschina.net/u/1158620/blog/289191?fromerr=hW0nWMlX&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://iceeggplant.blog.51cto.com/1446843/1611147&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://iceeggplant.blog.51cto.com/1446843/1611147&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;系统发件问题&quot;&gt;系统发件问题&lt;/h3&gt;&lt;h4 id=&quot;尽量不要用IP地址访问&quot;&gt;尽量不要用IP地址访问&lt;/h4&gt;&lt;p&gt;原因: IP地址访问会导致发件人的姓名变成&lt;code&gt;gitlab@xx.xx.xx.xx&lt;/code&gt;, 而各大邮箱运营商都是屏蔽IP地址邮箱名的, 应为这个问题搞的我重装了此系统, 悲剧&lt;/p&gt;
&lt;p&gt;解决方法: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;使用域名访问&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/gitlab/gitlab.rb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 将&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;external_url = &lt;span class=&quot;string&quot;&gt;&#39;http://xxx.xx.xxx.xx&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 修改为你的域名, 需要解析&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;external_url = &lt;span class=&quot;string&quot;&gt;&#39;http://git.example.com&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 然后执行下面的命令，对GitLab进行编译。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl reconfigure&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果你非要用ip地址访问&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;一定要把ip地址加到有收件人邮箱的白名单中&lt;br&gt;&lt;code&gt;Ps: 是IP地址不是发件人, 是IP地址不是发件人, 是IP地址不是发件人, 这点非常重要&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000002722631&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原文: GitLab 安装配置笔记&lt;/a&gt;    (Ps: 对文章有删减, 如有侵权, 请及时联系本人)&lt;br&gt;&lt;a href=&quot;https://about.gitlab.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://about.gitlab.com/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://leo108.com/pid-2150.asp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://leo108.com/pid-2150.asp&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://gitlab.com/gitlab-org/gitlab-ce/issues/2052&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://gitlab.com/gitlab-org/gitlab-ce/issues/2052&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;GitLab，是一个利用 Ruby on Rails 开发的开源应用程序，实现一个自托管的Git项目仓库，可通过Web界面进行访问公开的或者私人项目。&lt;br&gt;它拥有与GitHub类似的功能，能够浏览源代码，管理缺陷和注释。可以管理团队对仓库的访问，它非常易于浏览提交过的版本并提供一个文件历史库。团队成员可以利用内置的简单聊天程序（Wall）进行交流。它还提供一个代码片段收集功能可以轻松实现代码复用，便于日后有需要的时候进行查找。&lt;br&gt;GitLab 要求服务器端采用 Gitolite 搭建(为了方便安装，现已经用gitlab-shell代替Gitolite[1])。&lt;a href=&quot;https://zh.wikipedia.org/wiki/Gitlab&quot;&gt;-&amp;gt;wikipedia.org&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="CentOS" scheme="http://huyaohui.com/categories/CentOS/"/>
    
    
      <category term="CentOS" scheme="http://huyaohui.com/tags/CentOS/"/>
    
      <category term="GitLab" scheme="http://huyaohui.com/tags/GitLab/"/>
    
  </entry>
  
  <entry>
    <title>使用 Linux 文件恢复工具</title>
    <link href="http://huyaohui.com/2016/01/03/%E4%BD%BF%E7%94%A8-Linux-%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D%E5%B7%A5%E5%85%B7/"/>
    <id>http://huyaohui.com/2016/01/03/使用-Linux-文件恢复工具/</id>
    <published>2016-01-03T05:22:07.000Z</published>
    <updated>2016-04-03T17:50:39.000Z</updated>
    
    <content type="html">&lt;p&gt;本来从未想过要查找linux数据恢复相关的文章资料, 怎料自己手贱把自己的Blog给&lt;code&gt;rm -rf&lt;/code&gt;了呢? 简直神作了, 虽然并没有把数据恢复回来, 但是经过测试下面的方法是可行的, 就顺手给记录下来, 用于惊醒自己这天所犯下的sb事. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;事件重现&quot;&gt;事件重现&lt;/h1&gt;&lt;p&gt;起因: 本来想备份一下Blog的源代码&lt;/p&gt;
&lt;p&gt;步骤: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;执行命令行执行压缩命令&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zip MakeHui.github.io.zip MakeHui.github.io&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;少输入了&lt;code&gt;-r&lt;/code&gt;, 只备份了个文件夹 o(╯□╰)o&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;于是删除压缩包. (想必大家都知道发生什么事了 %&amp;gt;_&amp;lt;%)&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rm -rf Make[tab]    # &amp;#25105;&amp;#36825;&amp;#37324;&amp;#30452;&amp;#25509;&amp;#25353;tab&amp;#34917;&amp;#20840;&amp;#30340;, &amp;#28982;&amp;#21518;&amp;#24456;&amp;#33258;&amp;#28982;&amp;#30340;&amp;#23601;&amp;#25353;&amp;#20102;enter&amp;#20581;, &amp;#32467;&amp;#26524;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;引以为戒, 引以为戒啊…&lt;/p&gt;
&lt;h1 id=&quot;下面转载文章&quot;&gt;下面转载文章&lt;/h1&gt;&lt;h2 id=&quot;使用_Linux_文件恢复工具&quot;&gt;使用 Linux 文件恢复工具&lt;/h2&gt;&lt;p&gt;Linux 系统管理员守则中有这么一条：“慎用 rm -rf 命令，除非你知道此命令所带来的后果“，不过 Linux 下删除文件并不是真实的删除磁盘分区中的文件，而是将文件的 inode 节点中的扇区指针清除，同时释放这些数据对应的数据块，当释放的数据块被系统重新分配时，那些被删除的数据就会被覆盖，所以误删除数据后，应马上卸载文件所在的分区。然后使用相关工具进行恢复。本文以 Ubuntu 12.04 平台为例介介绍四个（foremost、extundelete、testdisk 和 phtorec）常用的 Linux 删除文件恢复工具的使用方法。&lt;/p&gt;
&lt;h2 id=&quot;Linux_文件恢复的原理&quot;&gt;Linux 文件恢复的原理&lt;/h2&gt;&lt;h3 id=&quot;inode_和_block&quot;&gt;inode 和 block&lt;/h3&gt;&lt;p&gt;首先简单介绍一下 Linux 文件系统的最基本单元：inode。inode 译成中文就是索引节点，每个存储设备（例如硬盘）或存储设备的分区被格式化为文件系统后，应该有两部份，一部份是 inode，另一部份是 block，block 是用来存储数据用的。而 inode 呢，就是用来存储这些数据的信息，这些信息包括文件大小、属主、归属的用户组、读写权限等。inode 为每个文件进行信息索引，所以就有了 inode 的数值。linux 操作系统下可以使用 ls –id 命令来查看文件或者目录的 inode 值，一般”root”目录的 inode 值为 2,一个分区挂载到一个目录下时，这个”root”目录的 inode 值为 2&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mount /dev/sdb2 /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ls -id /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; /tmp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;文件恢复的原理&quot;&gt;文件恢复的原理&lt;/h3&gt;&lt;p&gt;本文要介绍的命令是通过文件系统的 inode 值（一般是 2 ）来获取文件系统信息。在 ext3 和 ext4 文件系统中，每个文件都是通过 inode 来描述其数据存放的具体位置，当文件被删除以后，inode 的数据指针部分被清零，文件目录区没有太多变化。文件的读写都是通过 inode 来实现，当 inode 数据指针被清零以后，即便文件内容还在，也没有办法把文件内容组合出来。当 ext3 和 ext4 文件系统中的元数据 metadata 发生变化时，相应的元数据 metadata 在日志文件会有一份拷贝。比如一个文件被删除了，它的 inode 信息会在日志文件中先保存一份，然后把要删除文件 inode 相关信息清零。这个日志文件是循环使用的，当操作过多时，删除的文件的 inode 日志记录会被新的数据替换，这就彻底丧失了根据 inode 找回数据的机会了。如果是大量文件的删除，这个日志文件会被反复循环利用多次，只留给最后删除的那些文件的恢复机会。&lt;/p&gt;
&lt;h2 id=&quot;使用命令行工具恢复文件&quot;&gt;使用命令行工具恢复文件&lt;/h2&gt;&lt;h3 id=&quot;foremost_和_extundelete_简介&quot;&gt;foremost 和 extundelete 简介&lt;/h3&gt;&lt;p&gt;formost 是一个基于文件头和尾部信息以及文件的内建数据结构恢复文件的命令行工具。这个过程通常叫做数据挖掘（data carvubg）。formost 可以分析由 dd、Safeback、Encase 等生成的镜像文件，也可以直接分析驱动器。文件头和尾可以通过配置文件设置，也可以通过命令行开关使用 formost 内建的文件类型。formost 最初是由美国空军特别调查室（Air Force Office of Special Investigations）和信息系统安全研究中心（The Center for Information Systems Security Studies and Research）开发的，现在使用 GPL 许可。Foremost 支持恢复如下格式：avi, bmp, dll, doc, exe, gif, htm, jar, jpg, mbd, mov, mpg, pdf, png, ppt, rar, rif, sdw, sx, sxc, sxi, sxw, vis, wav, wmv, xls, zip。&lt;br&gt;针对 Linux 下的 ext 文件系统来说，常用的 Linux 文件删除恢复工具有 debugfs、ext3grep、extundelete 等。extundelete 是一个开源的数据恢复工具，支持 ext3、ext4 文件系统，其官方站点位于&lt;a href=&quot;http://extundelete.sourceforce.net/，目前最新稳定版本为&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://extundelete.sourceforce.net/，目前最新稳定版本为&lt;/a&gt; 0.2.0。&lt;br&gt;上面介绍的两种命令行工具 foremost 和 extundelete 二者相比，foremost 支持的文件系统比较多（包括 ext2、 ext3 、vfat、NTFS、ufs、jfs 等）和 extundelete 支持的文件系统较少（ext3、ext4）文件系统。不过 foremost 只能支持恢复特定格式的文件。&lt;/p&gt;
&lt;h3 id=&quot;使用_foremost&quot;&gt;使用 foremost&lt;/h3&gt;&lt;p&gt;首先安装软件包&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apt-get install foremost&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其它 Linux 发行版用户可以在 &lt;a href=&quot;http://foremost.sourceforge.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://foremost.sourceforge.net/&lt;/a&gt; 下载源代码编译安装。下面看看使用方法。&lt;/p&gt;
&lt;h4 id=&quot;恢复单个类型文件&quot;&gt;恢复单个类型文件&lt;/h4&gt;&lt;p&gt;笔者删除一个 USB（/dev/sdba1）存储器中一个 png 文件然后使用 formost 恢复。&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rm -f /dev/sdb1/photo1.png&amp;#10;foremost -t png -i /dev/sdb1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;恢复完成后会在当前目录建立一个 output 目录，在 output 目录下会建立 png 子目录下会包括所有可以恢复的 png 格式的文件。&lt;br&gt;需要说明的是 png 子目录下会包括的 png 格式的文件名称已经改变，另外 output 目录下的 audit.txt 文件是恢复文件列表。&lt;/p&gt;
&lt;h4 id=&quot;恢复多个类型文件&quot;&gt;恢复多个类型文件&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;foremost -v -T -t doc,pdf,jpg,gif -i /dev/sda6 -o /media/disk/Recover&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;恢复完成后会在当前目录建立一个 output 目录，在 output 目录下会建立四个子目录（/doc,/pdf,/jpg,/gif），分别包括四种类型文件。另外 output 目录下的 audit.txt 文件是恢复文件列表。&lt;/p&gt;
&lt;h3 id=&quot;使用_extundelete&quot;&gt;使用 extundelete&lt;/h3&gt;&lt;p&gt;首先安装软件包&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apt-get install extundelete&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其它 Linux 发行版用户可以在&lt;a href=&quot;http://extundelete.sourceforce.net/下载源代码编译安装。下载安装&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://extundelete.sourceforce.net/下载源代码编译安装。下载安装&lt;/a&gt; extundelete 之前要安装两个软件包 e2fsprogs 和 e2fslibs。下面看看使用方法&lt;/p&gt;
&lt;h4 id=&quot;模拟数据误删除环境&quot;&gt;模拟数据误删除环境&lt;/h4&gt;&lt;p&gt;这里我们使用一个分区/dev/sdd1 挂在在/backupdate 上，建立一个测试目录/delete 并建立一文件：del1.txt 。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mkdir –p /backupdate/deldate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mkfs.ext4 /dev/sdd1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mount /dev/sdd1 /backupdate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#cd /backupdate/deldate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# touch del1.txt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# echo &quot; test 1&quot; &amp;gt; del1.txt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;获取文件校验码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# md5sum del1.txt| | |    &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;number&quot;&gt;66&lt;/span&gt;fb6627dbaa37721048e4549db3224d  del1.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;删除文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# rm -fr /backupdate/*   &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;卸载文件系统或者挂载为只读&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# umount /backupdate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;查询恢复数据信息，注意这里的--inode &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; 这里会扫描分区 ：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# extundelete /dev/sdd1 --inode 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;File name| | | |        | Inode number | Deleted status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Directory block &lt;span class=&quot;number&quot;&gt;8657&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.| | | | | |  &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;..| | | | | | &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lost+found| | | | | &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;|      Deleted&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;del1.txt| | | | |       &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;|      Deleted&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;上面标记为 Deleted 是已经删除的文件或目录&lt;br&gt;开始恢复文件&lt;br&gt;默认恢复到当前目录下的 RECOVERED_FILES 目录中去。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# extundelete /dev/sdd1 --restore-file del1.txt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果恢复一个目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# extundelete /dev/sdd1 --restore-directory /backupdate/deldate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;恢复所有文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# extundelete /dev/sdd1 --restore-all&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;获取恢复文件校验码，对比检测是否恢复成功&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# md5sum RECOVERED_FILES/ del1.txt| | |  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;66&lt;/span&gt;fb6627dbaa37721048e4549db3224d  RECOVERED_FILES/del1.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;查看校验码与之前的是否完全一致。&lt;br&gt;应用总结：笔者在现实使用过程中发现 extundelete 还是有很大的不完整性,基于整个磁盘的恢复功能较为强大,基于目录和文件的恢复还不够强大。在 Linux 下误删除了文件，当发现数据丢失以后，不要进行任何操作，保留现场。要想办法把数据丢失的文件系统经过 dd 命令或者 AIR(Automated Image Restore，&lt;a href=&quot;http://cdnetworks-kr-2.dl.sourceforge.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://cdnetworks-kr-2.dl.sourceforge.net/&lt;/a&gt; )工具到另外的存储空间上作为最原始的备份，以便数据恢复专家现场诊断恢复。&lt;br&gt;使用 scalpel&lt;br&gt;以上介绍的工具主要使用在 ext3 和 ext4 的文件系统，如果用户使用的那些没有日志机制的旧有文件系统，可以使用 scalpel 工具。scalpel 是一种快速文件恢复工具，它通过读取文件系统的数据库来恢复文件。它是独立于文件系统的。&lt;br&gt;用户可以在&lt;a href=&quot;http://www.digitalforensicssolutions.com/Scalpel/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.digitalforensicssolutions.com/Scalpel/&lt;/a&gt; 下载源代码编译安装。下面看看使用方法：&lt;br&gt;使用 scalpel 工具之前，首先要修改配置文件： /etc/scalpel/scalpel.conf。&lt;br&gt;例如用户要恢复所有删除 pdf 文件，那么要在/etc/scalpel/scalpel.conf 把包括 pdf 文件格式的两行之前的# 去掉。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[...]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| pdf     y       &lt;span class=&quot;number&quot;&gt;5000000&lt;/span&gt; %PDF  %EOF\x0d  REVERSE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| pdf     y       &lt;span class=&quot;number&quot;&gt;5000000&lt;/span&gt; %PDF  %EOF\x0a  REVERSE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[...]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后保存文件。&lt;br&gt;下面看看使用方法&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# scalpel /dev/sdb1 -o /RECOVERY/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其中/dev/sdb1 是目标驱动器，/RECOVERY/ 是恢复文件存储目录。目录下的 audit.txt 文件是恢复文件列表。&lt;/p&gt;
&lt;h2 id=&quot;使用字符终端工具_testdisk_和_phtorec&quot;&gt;使用字符终端工具 testdisk 和 phtorec&lt;/h2&gt;&lt;h3 id=&quot;testdisk_简介&quot;&gt;testdisk 简介&lt;/h3&gt;&lt;p&gt;testdisk 是分区表恢复、raid 恢复、分区恢复的开源免费工具（testdisk 支持如下文件系统: FAT12/FAT16/FAT32/NTFS/ext2/ext3/ext4）。testdisk 支持的功能: 修复分区表, 恢复已删除分区，用 FAT32 备份表恢复启动扇区，重建 FAT12/FAT16/FAT32 启动扇区，修复 FAT 表，重建 NTFS 启动扇区，用备份表恢复 NTFS 启动扇区，用 mft 镜像表(mft mirror)修复 mft 表，查找 ext2/ext3 备份的 superblock，从 FAT,NTFS 及 ext2 文件系统恢复删除文件，从已删除的 FAT,NTFS 及 ext2/ext3 分区复制文件。&lt;/p&gt;
&lt;h3 id=&quot;使用方法&quot;&gt;使用方法&lt;/h3&gt;&lt;h4 id=&quot;首先安装&quot;&gt;首先安装&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# scalpel /dev/sdb1 -o /RECOVERY/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其它 Linux 发行版用户可以在&lt;a href=&quot;http://www.cgsecurity.org/wiki/TestDisk_Download&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cgsecurity.org/wiki/TestDisk_Download&lt;/a&gt; 下载源代码编译安装。下载安装 testdisk 之前要安装几个软件包 libjpeg8 ，libncursesw5， libuuid1， zlib1g 。下面看看使用方法&lt;/p&gt;
&lt;h4 id=&quot;启动_testdisk&quot;&gt;启动 testdisk&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#testdisk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;testdisk 启动后的工作界面首先是选择恢复操作中的 log 文件（testdisk.log）的纪录方式见图 1。&lt;/p&gt;
&lt;h5 id=&quot;图_1-选择恢复操作中的_log_文件的纪录方式&quot;&gt;图 1.选择恢复操作中的 log 文件的纪录方式&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB21c9JjXXXXXbnXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 1 选择恢复操作中的 log 文件的纪录方式&quot;&gt;&lt;br&gt;［Create］新建&lt;br&gt;［Append］追加&lt;br&gt;［No Log］不纪录&lt;br&gt;选择了 log 文件的记录方式后、系统显示处于连接状态的磁盘设备见图 2。&lt;/p&gt;
&lt;h5 id=&quot;图_2-处于连接状态的磁盘设备&quot;&gt;图 2.处于连接状态的磁盘设备&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2VSe0jXXXXXctXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 2 处于连接状态的磁盘设备&quot;&gt;&lt;br&gt;在列出的磁盘设备中，选择要恢复的分区，然后选择磁盘分区的种类。若是 ext4 文件系统的话,请选择 [None ] Non partitioned media 见图 3&lt;/p&gt;
&lt;h5 id=&quot;图_3-选择_[None_]_Non_partitioned_media&quot;&gt;图 3.选择 [None ] Non partitioned media&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2T4KLjXXXXXaLXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;说明：一般选择[Intel] Intel/PC partition（如果是 GPT 分区，请选择 EFI GPT），对于 ext4 文件系统选择 [Intel] Intel/PC partition 也能正确识别,只是分析硬盘時比较慢。&lt;br&gt;下面的画面中选择［Analyse］，对分区进行分析见图 4。&lt;/p&gt;
&lt;h5 id=&quot;图_4-对分区进行分析&quot;&gt;图 4.对分区进行分析&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB26LSGjXXXXXb2XpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 4 对分区进行分析&quot;&gt;&lt;br&gt;下面显示了当前分区的状态。这是软件分析的当前分区表的分区结果，我们选择“Deep Search”进行一次深入检测见图 5。&lt;/p&gt;
&lt;h5 id=&quot;图_5-选择“Deep_Search”进行一次深入检测&quot;&gt;图 5.选择“Deep Search”进行一次深入检测&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2X4SNjXXXXXaAXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 5 选择“Deep Search”进行一次深入检测&quot;&gt;&lt;br&gt;下面是检测完成界面见图 6&lt;/p&gt;
&lt;h5 id=&quot;图_6-检测完成界面&quot;&gt;图 6.检测完成界面&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB29fmQjXXXXXXRXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 6 检测完成界面&quot;&gt;&lt;br&gt;在这个画面时,按 P 键就可以列出硬盘上的文件见图 7&lt;/p&gt;
&lt;h5 id=&quot;图_7-红色的文件名称就是已经被删除的文件&quot;&gt;图 7.红色的文件名称就是已经被删除的文件&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2XWLXjXXXXXavXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 7 红色的文件名称就是已经被删除的文件&quot;&gt;&lt;br&gt;红色的文件名称就是已经被删除的文件,选择好你要恢复的文件后,按 c 键之后,它就会问你要复制到哪个目录,这时请选择你要 复制的目地地(destination)即可。&lt;/p&gt;
&lt;h3 id=&quot;photorec_简介&quot;&gt;photorec 简介&lt;/h3&gt;&lt;p&gt;photorec 是一款用于恢复硬盘、光盘中丢失的视频、文档、压缩包等文件，或从数码相机存储卡中恢复丢失图片的数据恢复软件（因此，该软件命名为 photo recovery 这个名字)。 photorec 忽略文件系统，能直接从介质底层恢复数据，因此，在介质的文件系统严重破坏或被重新格式化后，它也能进行数据恢复。出于安全考虑, photorec 以只读方式来访问您要恢复数据所在的磁盘或存储卡介质。提示: 一旦发现丢失或意外删除了某个图片、文件， 请不要继续往该存储设备或磁盘保存新文件；否则您可能会覆盖原来的数据。 这意味着您在使用 photorec 时，您千万不要将恢复的文件写入到原数据所存储的同一分区。&lt;/p&gt;
&lt;h3 id=&quot;使用_photorec_恢复文件&quot;&gt;使用 photorec 恢复文件&lt;/h3&gt;&lt;p&gt;photorec 是 testdisk 的伴侣程序，安装 testdisk 后 photorec 就可以使用了。&lt;/p&gt;
&lt;h4 id=&quot;启动_photorec&quot;&gt;启动 photorec&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# photorec&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;图 8 中显示了已连接磁盘设备，准备恢复的文件在那个设备上就选择它，然后在选择 Proceed 按钮继续下一步。&lt;/p&gt;
&lt;h5 id=&quot;图_8-已连接磁盘设备&quot;&gt;图 8.已连接磁盘设备&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB27kaQjXXXXXabXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 8 已连接磁盘设备&quot;&gt;&lt;br&gt;接下来，选择恢复的磁盘分区格式。这里选择 ext4 见图 9。&lt;/p&gt;
&lt;h5 id=&quot;图_9-选择恢复的磁盘分区格式&quot;&gt;图 9.选择恢复的磁盘分区格式&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2vva.jXXXXXaSXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 9 选择恢复的磁盘分区格式&quot;&gt;&lt;br&gt;画面下方［File Opt］中有可供恢复的文件种类提供被选择见图 10。&lt;/p&gt;
&lt;h5 id=&quot;图_10-可供恢复的文件种类&quot;&gt;图 10.可供恢复的文件种类&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2wUiIjXXXXXbrXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 10 可供恢复的文件种类&quot;&gt;&lt;br&gt;说明：如果只是 root 据某些文件签名要恢复部分文件类型，那么可以按 s 取消全部勾选，然后移动光标到要恢复的文件类型，可按空格来选择高亮选中的类型。&lt;br&gt;下面设定要分析的磁盘空间区域，可整个分区搜索，也可只搜索自由空间（相当于未分配簇）见图 11 。&lt;/p&gt;
&lt;h5 id=&quot;图_11-设定要分析的磁盘空间区域&quot;&gt;图 11.设定要分析的磁盘空间区域&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB20R2cjXXXXXXBXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 11 设定要分析的磁盘空间区域&quot;&gt;&lt;br&gt;下面选择分区所使用的文件系统类型，然后设定导出的文件目录，一般输入 Y 并回车即可。图 12 是恢复完成界面。&lt;/p&gt;
&lt;h5 id=&quot;图_12-恢复完成&quot;&gt;图 12.恢复完成&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2bb18jXXXXXbiXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;图 12 恢复完成&quot;&gt;&lt;br&gt;恢复完了选择 Quit 退出 PhtoRec。被恢复的文件是 recup_dir.x 的若干数字子组合为文件名被保存在当前目录的/recup_dir 子目录下的。&lt;/p&gt;
&lt;h3 id=&quot;功能对比&quot;&gt;功能对比&lt;/h3&gt;&lt;h4 id=&quot;表_1-Linux_删除文件恢复工具&quot;&gt;表 1.Linux 删除文件恢复工具&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;工具名称/功能对比&lt;/th&gt;
&lt;th&gt;工作界面&lt;/th&gt;
&lt;th&gt;功能简介&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;foremost&lt;/td&gt;
&lt;td&gt;命令行&lt;/td&gt;
&lt;td&gt;formost 是一个基于文件头和尾部信息以及文件的内建数据结构恢复文件的命令行工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;extundelete&lt;/td&gt;
&lt;td&gt;命令行&lt;/td&gt;
&lt;td&gt;Extundelete 是 ext3、ext4 文件系统的恢复工具&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;scalpel&lt;/td&gt;
&lt;td&gt;命令行&lt;/td&gt;
&lt;td&gt;scalpel 是一种快速文件恢复工具，它通过读取文件系统的数据库来恢复文件。它是独立于文件系统的&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;testdisk&lt;/td&gt;
&lt;td&gt;字符终端&lt;/td&gt;
&lt;td&gt;Testdisk 支持分区表恢复、raid 恢复、分区恢复&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;phtorec&lt;/td&gt;
&lt;td&gt;字符终端&lt;/td&gt;
&lt;td&gt;photorec 用来恢复硬盘、光盘中丢失的视频、文档、压缩包等文件，或从数码相机存储卡中恢复丢失的图片&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;p&gt;可以使用 testdisk 进行文件恢复的场合，也就是硬盘上的分区（该分区有原有数据纪录）已经损坏的情形。但是如果损坏之后，重新再次做成了新分区的话，文件恢复的可能性比较小，很困难。photorec 不仅针对 硬盘、USB 设备、CD-ROM、SD 卡，而且还可以对其它存储设备进行应用。因此大多数常用的文件如果被误操作的话，均可利用其来进行恢复，只不过它的初衷是针对照片而制作的。&lt;/p&gt;
&lt;h1 id=&quot;参考资料&quot;&gt;参考资料&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/linux/1312_caoyq_linuxrestore/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.ibm.com/developerworks/cn/linux/1312_caoyq_linuxrestore/&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本来从未想过要查找linux数据恢复相关的文章资料, 怎料自己手贱把自己的Blog给&lt;code&gt;rm -rf&lt;/code&gt;了呢? 简直神作了, 虽然并没有把数据恢复回来, 但是经过测试下面的方法是可行的, 就顺手给记录下来, 用于惊醒自己这天所犯下的sb事. &lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://huyaohui.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://huyaohui.com/tags/Linux/"/>
    
      <category term="Software" scheme="http://huyaohui.com/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>iOS Swift 使用ShareSDK完成第三方登录和分享</title>
    <link href="http://huyaohui.com/2016/01/03/iOS-Swift-%E4%BD%BF%E7%94%A8ShareSDK%E5%AE%8C%E6%88%90%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95%E5%92%8C%E5%88%86%E4%BA%AB/"/>
    <id>http://huyaohui.com/2016/01/03/iOS-Swift-使用ShareSDK完成第三方登录和分享/</id>
    <published>2016-01-03T05:19:08.000Z</published>
    <updated>2016-04-05T09:19:00.000Z</updated>
    
    <content type="html">&lt;p&gt;关于第三方分享和登录本身就是一个挺大的坑, Swift的第三方分享和登录就更不用说了, 坑上加坑, 这里记录下来是如何把ShareSDK给集成到项目中去的&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;也好久没有更新Blog了, 今天终于有时间来填上这个坑了, 顺便一提, 过完年这段时间都没怎么写iOS了, 也就是维护维护以前的代码, 也不知道这次能不能, 完成这个demo的继承, 哎.. 无所谓了, 不成就删了这篇文章了, 就这么愉快的决定了.&lt;br&gt;还有一点需要说明下, 我使用的是shareSDK2.x版本不是最新版, 原因是最新版, 我按照官方的集成方法集成失败了, 现在也没能找到什么原因, 不过也就这样了, 反正2.x能用对吧. &lt;/p&gt;
&lt;h2 id=&quot;准备&quot;&gt;准备&lt;/h2&gt;&lt;p&gt;这里就不墨迹的去说明如何去下载安装包了, 看下面的参考资料就好了, 里面有相关说明, 我这里就不再赘述了. 见谅&lt;/p&gt;
&lt;p&gt;下载到的文件如下图:&lt;br&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2lv82mpXXXXb0XpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;配置&quot;&gt;配置&lt;/h2&gt;&lt;h3 id=&quot;把下载到的ShareSDK包拖动到项目目录中&quot;&gt;把下载到的ShareSDK包拖动到项目目录中&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2vFWompXXXXcNXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;添加相关依赖库&quot;&gt;添加相关依赖库&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2rUyHmpXXXXXsXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;JavaScriptCore&lt;/span&gt;.framework&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;ImageIO&lt;/span&gt;.framework&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;CoreLocation&lt;/span&gt;.framework&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;MessageUI&lt;/span&gt;.framework&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Social&lt;/span&gt;.framework&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Accounts&lt;/span&gt;.framework&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// xcode7之前后缀为 *.dylib&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;libicucore.tbd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;libz.tbd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;libstdc++.tbd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;libsqlite3.dylib&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2chSzmpXXXXa.XXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;新建Bridging_Header文件&quot;&gt;新建Bridging Header文件&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB20.iAmpXXXXaPXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Ps: 命名规则 projectNmae-Bridging-Header.h      // 并不是必须得这样写, 只是官方推荐这样写&lt;/p&gt;
&lt;h3 id=&quot;设置桥接&quot;&gt;设置桥接&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2txJ4mpXXXXbrXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Ps: 里面填写的路径是相对于你项目根路径bridging-header文件的路径   // 是实际的在finder中的路径而不是在Xcode中所看到的路径&lt;/p&gt;
&lt;h3 id=&quot;配置bridging-header文件&quot;&gt;配置bridging-header文件&lt;/h3&gt;&lt;p&gt;把需要桥接的累写入bridging-header文件内, 这样就可以通过Swift进行访问了&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ShareSDK主文件 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;lt;&lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;/&lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//微信SDK头文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;WXApi.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;WXApiObject.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//新浪微博SDK头文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;WeiboSDK.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//QQ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;lt;&lt;span class=&quot;type&quot;&gt;TencentOpenAPI&lt;/span&gt;/&lt;span class=&quot;type&quot;&gt;QQApiInterface&lt;/span&gt;.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;lt;&lt;span class=&quot;type&quot;&gt;TencentOpenAPI&lt;/span&gt;/&lt;span class=&quot;type&quot;&gt;TencentOAuth&lt;/span&gt;.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;配置AppDelegate&quot;&gt;配置AppDelegate&lt;/h3&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;func&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ShareSDK 后台的开发者KEY&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.registerApp(&lt;span class=&quot;string&quot;&gt;&quot;807e39c0a100&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 下面分别要填写的String类型的值, 都是需要到个个平台太去申请的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 微信&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectWeChatWithAppId(&lt;span class=&quot;string&quot;&gt;&quot;wx7259198a010a442b&quot;&lt;/span&gt;, appSecret: &lt;span class=&quot;string&quot;&gt;&quot;d4624c36b6795d1d99dcf0547af5443d&quot;&lt;/span&gt;, wechatCls: &lt;span class=&quot;type&quot;&gt;WXApi&lt;/span&gt;.classForCoder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//微信好友&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectWeChatSessionWithAppId(&lt;span class=&quot;string&quot;&gt;&quot;wx7259198a010a442b&quot;&lt;/span&gt;, wechatCls:&lt;span class=&quot;type&quot;&gt;WXApi&lt;/span&gt;.classForCoder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//微信朋友圈&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectWeChatTimelineWithAppId(&lt;span class=&quot;string&quot;&gt;&quot;wx7259198a010a442b&quot;&lt;/span&gt;, wechatCls: &lt;span class=&quot;type&quot;&gt;WXApi&lt;/span&gt;.classForCoder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 新浪微博&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectSinaWeiboWithAppKey(&lt;span class=&quot;string&quot;&gt;&quot;2883129486&quot;&lt;/span&gt;, appSecret: &lt;span class=&quot;string&quot;&gt;&quot;ae926077609479eb7b46417dd0adfb06&quot;&lt;/span&gt;, redirectUri: &lt;span class=&quot;string&quot;&gt;&quot;http://www.sina.com&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//QQ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectQQWithAppId(&lt;span class=&quot;string&quot;&gt;&quot;101165144&quot;&lt;/span&gt;, qqApiCls:&lt;span class=&quot;type&quot;&gt;QQApiInterface&lt;/span&gt;.classForCoder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//QQ空间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectQZoneWithAppKey(&lt;span class=&quot;string&quot;&gt;&quot;101165144&quot;&lt;/span&gt;, appSecret: &lt;span class=&quot;string&quot;&gt;&quot;b8e4e1e7af7bb07e647e036c34b868bd&quot;&lt;/span&gt;, qqApiInterfaceCls: &lt;span class=&quot;type&quot;&gt;QQApiInterface&lt;/span&gt;.classForCoder(), tencentOAuthCls: &lt;span class=&quot;type&quot;&gt;TencentOAuth&lt;/span&gt;.classForCoder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectQQWithQZoneAppKey(&lt;span class=&quot;string&quot;&gt;&quot;101165144&quot;&lt;/span&gt;, qqApiInterfaceCls: &lt;span class=&quot;type&quot;&gt;QQApiInterface&lt;/span&gt;.classForCoder(), tencentOAuthCls: &lt;span class=&quot;type&quot;&gt;TencentOAuth&lt;/span&gt;.classForCoder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 腾讯微博&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectTencentWeiboWithAppKey(&lt;span class=&quot;string&quot;&gt;&quot;101165144&quot;&lt;/span&gt;, appSecret: &lt;span class=&quot;string&quot;&gt;&quot;b8e4e1e7af7bb07e647e036c34b868bd&quot;&lt;/span&gt;, redirectUri: &lt;span class=&quot;string&quot;&gt;&quot;http://www.sharesdk.cn&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//链接微信&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//短信&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectSMS()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//连接邮件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.connectMail()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 如果不重写这两个方法, 在分享成功后无法收到应用回调, 到诊无法获取到信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;func&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(application: UIApplication, handleOpenURL url: NSURL)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.handleOpenURL(url, wxDelegate: &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;func&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(application: UIApplication, openURL url: NSURL, sourceApplication: String?, annotation: AnyObject)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.handleOpenURL(url, sourceApplication: sourceApplication, annotation: annotation, wxDelegate: &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;配置info-plist&quot;&gt;配置info.plist&lt;/h3&gt;&lt;h4 id=&quot;添加URLSchemes&quot;&gt;添加URLSchemes&lt;/h4&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- URLSchemes 生成规则 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 微信: 微信开放平台AppKey --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- QQ: QQ + 16进制的AppID(如果AppID转换的16进制数不够8位则在前面补0, 转换后的字母要大写) --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- QQ空间: tencent + 腾讯开放平台AppID --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 微博: 使用web分享无需Schemes --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;CFBundleURLTypes&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;CFBundleTypeRole&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;Editor&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;CFBundleURLSchemes&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;wx7259198a010a442b&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;CFBundleTypeRole&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;Editor&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;CFBundleURLSchemes&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;QQ41C4787D&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;CFBundleTypeRole&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;Editor&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;CFBundleURLSchemes&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;tencent101165144&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;添加白名单&quot;&gt;添加白名单&lt;/h4&gt;&lt;p&gt;原因: &lt;a href=&quot;http://wiki.mob.com/ios9-对sharesdk的影响（适配ios-9必读）/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://wiki.mob.com/ios9-对sharesdk的影响（适配ios-9必读）/&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;LSApplicationQueriesSchemes&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqqOpensdkSSoLogin&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqzone&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;sinaweibo&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;alipayauth&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;alipay&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;safepay&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqq&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqqapi&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqqopensdkapiV3&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqqopensdkapiV2&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqqapiwallet&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqqwpa&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;mqqbrowser&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;wtloginmqq2&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;weixin&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;wechat&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;array&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;使用ShareSDK&quot;&gt;使用ShareSDK&lt;/h2&gt;&lt;p&gt;我平常用到的有三块, 这里我一一列举出来, 其它没用到过的功能, 就不会出现在下面了, 可能以后用到了, 会回来更新这篇文章的&lt;/p&gt;
&lt;h3 id=&quot;判断是否安装客户端&quot;&gt;判断是否安装客户端&lt;/h3&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; !&lt;span class=&quot;type&quot;&gt;WXApi&lt;/span&gt;.isWXAppInstalled() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;没有安装微信~&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; !&lt;span class=&quot;type&quot;&gt;QQApi&lt;/span&gt;.isQQInstalled() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;没有安装QQ~&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;分享&quot;&gt;分享&lt;/h3&gt;&lt;p&gt;不那么多废话了, 直接上代码, 注释有说明&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; url = &lt;span class=&quot;string&quot;&gt;&quot;http://huyaohui.com/Niconiconi/&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// var image: ISSCAttachment = ShareSDK.imageWithUrl(urlString)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; image: &lt;span class=&quot;type&quot;&gt;ISSCAttachment&lt;/span&gt;? = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; title: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;来自SwiftShareSDK分享&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; description: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;あの日見た花の名前を僕達はまだ知らない。 http://huyaohui.com/Niconiconi/&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; defaultContent: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;这里是默认输入的内容&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 构造分享内容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; publishContent = &lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.content(title, defaultContent: defaultContent, image: image, title: title, url: url, description: description, mediaType: &lt;span class=&quot;type&quot;&gt;SSPublishContentMediaTypeNews&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.showShareActionSheet(&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, shareList: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, content: publishContent, statusBarTips: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, authOptions: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, shareOptions: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123; (type: &lt;span class=&quot;type&quot;&gt;ShareType&lt;/span&gt;, state: &lt;span class=&quot;type&quot;&gt;SSResponseState&lt;/span&gt;, statusInfo: &lt;span class=&quot;type&quot;&gt;ISSPlatformShareInfo&lt;/span&gt;!, error: &lt;span class=&quot;type&quot;&gt;ICMErrorInfo&lt;/span&gt;!, end: &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt;) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Void&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 判断分享时的状态&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; state.rawValue == &lt;span class=&quot;type&quot;&gt;SSResponseStateBegan&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;开始分享~&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; state.rawValue == &lt;span class=&quot;type&quot;&gt;SSResponseStateSuccess&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;success~&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; state.rawValue == &lt;span class=&quot;type&quot;&gt;SSResponseStateFail&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;分享失败~&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(error)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; state.rawValue == &lt;span class=&quot;type&quot;&gt;SSResponseStateCancel&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;用户点击取消分享~&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 判断用户分享到那个平台&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; type.rawValue == &lt;span class=&quot;type&quot;&gt;ShareTypeSinaWeibo&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;新浪微博分享&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; type.rawValue == &lt;span class=&quot;type&quot;&gt;ShareTypeTencentWeibo&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;腾讯微博分享&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; type.rawValue == &lt;span class=&quot;type&quot;&gt;ShareTypeQQ&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;QQ分享&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; type.rawValue == &lt;span class=&quot;type&quot;&gt;ShareTypeQQSpace&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;QQ空间分享&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; type.rawValue == &lt;span class=&quot;type&quot;&gt;ShareTypeWeixiSession&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;微信好友分享&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; type.rawValue == &lt;span class=&quot;type&quot;&gt;ShareTypeWeixiTimeline&lt;/span&gt;.rawValue &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;微信朋友圈分享&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ... 其它选项&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;第三方登录&quot;&gt;第三方登录&lt;/h3&gt;&lt;p&gt;其实第三方登录就只是拿到一个回调的uid而已, 然后保存这个uid作为表示就行了&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 需要调用的第三方平台&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// var shareType: ShareType = ShareTypeQQSpace&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; shareType: &lt;span class=&quot;type&quot;&gt;ShareType&lt;/span&gt; = &lt;span class=&quot;type&quot;&gt;ShareTypeWeixiTimeline&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;ShareSDK&lt;/span&gt;.getUserInfoWithType(shareType, authOptions: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123; (result, userinfo: &lt;span class=&quot;type&quot;&gt;ISSPlatformUser&lt;/span&gt;!, error: &lt;span class=&quot;type&quot;&gt;ICMErrorInfo&lt;/span&gt;!) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Void&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; result &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;///获取用户ID&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(userinfo.uid()!)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// code: -6004 代表没有安装QQ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// code: -22003 代表没有安装微信&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; error.errorCode() == -&lt;span class=&quot;number&quot;&gt;6004&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;您没有安装QQ&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; error.errorCode() == -&lt;span class=&quot;number&quot;&gt;22003&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;您没有安装微信&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;第三方登录失败&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;项目地址&quot;&gt;项目地址&lt;/h2&gt;&lt;p&gt;完整demo: &lt;a href=&quot;https://github.com/MakeHui/SwiftShareSDK&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/MakeHui/SwiftShareSDK&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;p&gt;虽然被坑了无数次, 才彻底把自己需要的功能摸清了, 哎… 不容易啊.&lt;br&gt;对了这篇文章是在我真正搞懂ShareSDK之后很久才写的, 算是一个复习吧, 已经很久没写Swift了, 将来也可能会很长一段时间不写再写Swift了, 悲剧…&lt;/p&gt;
&lt;h1 id=&quot;参考资料&quot;&gt;参考资料&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/e374732f54f0&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jianshu.com/p/e374732f54f0&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;关于第三方分享和登录本身就是一个挺大的坑, Swift的第三方分享和登录就更不用说了, 坑上加坑, 这里记录下来是如何把ShareSDK给集成到项目中去的&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://huyaohui.com/categories/iOS/"/>
    
    
      <category term="Note" scheme="http://huyaohui.com/tags/Note/"/>
    
      <category term="ShareSDK" scheme="http://huyaohui.com/tags/ShareSDK/"/>
    
      <category term="Swift" scheme="http://huyaohui.com/tags/Swift/"/>
    
      <category term="iOS" scheme="http://huyaohui.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>SSH keys 公钥配置与使用</title>
    <link href="http://huyaohui.com/2015/12/31/SSH-keys-%E5%85%AC%E9%92%A5%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <id>http://huyaohui.com/2015/12/31/SSH-keys-公钥配置与使用/</id>
    <published>2015-12-31T15:28:46.000Z</published>
    <updated>2016-01-03T05:40:11.000Z</updated>
    
    <content type="html">&lt;p&gt;SSH 密钥对可以让您方便的登录到 SSH 服务器，而无需输入密码。由于您无需发送您的密码到网络中，SSH 密钥对被认为是更加安全的方式。再加上使用密码短语 (passphrase) 的使用，安全性会更上一层楼。&lt;br&gt;同时，我们可以使用 SSH agent 来帮助我们记住密码短语，无需我们记住每一个密钥对的密码短语，减轻了我们的负担。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;生成SSH_keys&quot;&gt;生成SSH keys&lt;/h2&gt;&lt;p&gt;SSH 密钥对总是成双出现的，一把公钥，一把私钥。公钥可以自由的放在您所需要连接的 SSH 服务器上，而私钥必须稳妥的保管好。&lt;br&gt;所谓”公钥登录”，原理很简单，就是用户将自己的公钥储存在远程主机上。登录的时候，远程主机会向用户发送一段随机字符串，用户用自己的私钥加密后，再发回来。远程主机用事先储存的公钥进行解密，如果成功，就证明用户是可信的，直接允许登录 shell，不再要求密码。这样子，我们即可保证了整个登录过程的安全，也不会受到中间人攻击。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 执行 ssh-keygen 命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 下面需要输入私钥, 当然也可以不输入, 默认为空&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ssh-keygen  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Generating public/private rsa key pair.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter file &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;which&lt;/span&gt; to save the key (/home/makehui/.ssh/id_rsa): &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter passphrase (empty &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; no passphrase): &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter same passphrase again: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your identification has been saved &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /home/makehui/.ssh/id_rsa.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your public key has been saved &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /home/makehui/.ssh/id_rsa.pub.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The key fingerprint is:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bb:&lt;span class=&quot;number&quot;&gt;26&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;e:b2:d9:b3:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;f:&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;84&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;99&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;52&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;:a2:&lt;span class=&quot;number&quot;&gt;56&lt;/span&gt;:fb:&lt;span class=&quot;number&quot;&gt;33&lt;/span&gt; makehui@MakeHui-Ubuntu14-&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The key&lt;span class=&quot;string&quot;&gt;&#39;s randomart image is:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+--[ RSA 2048]----+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|o ..             |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|oo. .            |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|....             |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|.. +.            |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|. + .E  S        |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| . .  o. .       |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|    o + .        |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|     *oo..       |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|    o.+*o        |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+-----------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看SSH keys&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat ~/.ssh/id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;配置GitHub_SSH_keys&quot;&gt;配置GitHub SSH keys&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;点击GitHub头像&lt;/li&gt;
&lt;li&gt;Settings&lt;/li&gt;
&lt;li&gt;在左边菜单栏点击SSH keys&lt;/li&gt;
&lt;li&gt;点击Add SSH keys&lt;/li&gt;
&lt;li&gt;填写Title, 去个名字&lt;/li&gt;
&lt;li&gt;复制上面得到的SSH keys到Key文本框&lt;/li&gt;
&lt;li&gt;点击Add key完成&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://wiki.archlinux.org/index.php/SSH_keys_(简体中文&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://wiki.archlinux.org/index.php/SSH_keys_(简体中文&lt;/a&gt;)&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/houyp520/article/details/9401745&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/houyp520/article/details/9401745&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;SSH 密钥对可以让您方便的登录到 SSH 服务器，而无需输入密码。由于您无需发送您的密码到网络中，SSH 密钥对被认为是更加安全的方式。再加上使用密码短语 (passphrase) 的使用，安全性会更上一层楼。&lt;br&gt;同时，我们可以使用 SSH agent 来帮助我们记住密码短语，无需我们记住每一个密钥对的密码短语，减轻了我们的负担。&lt;/p&gt;
    
    </summary>
    
      <category term="SSH" scheme="http://huyaohui.com/categories/SSH/"/>
    
    
      <category term="GitHub" scheme="http://huyaohui.com/tags/GitHub/"/>
    
      <category term="Note" scheme="http://huyaohui.com/tags/Note/"/>
    
      <category term="SSH" scheme="http://huyaohui.com/tags/SSH/"/>
    
  </entry>
  
  <entry>
    <title>Branckets 如何开发插件</title>
    <link href="http://huyaohui.com/2015/11/29/Branckets-%E5%A6%82%E4%BD%95%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6/"/>
    <id>http://huyaohui.com/2015/11/29/Branckets-如何开发插件/</id>
    <published>2015-11-29T06:08:12.000Z</published>
    <updated>2016-01-03T02:58:14.000Z</updated>
    
    <content type="html">&lt;p&gt;有个功能Brackets一直没有, 也没有找到相关的插件, 所以转载官方的这篇关于&lt;code&gt;如何开发Brackets插件&lt;/code&gt;的wiki, 方便自己有空的时候来学习下. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;如何开发Brackets插件&quot;&gt;如何开发Brackets插件&lt;/h2&gt;&lt;p&gt;开发一个插件需要三个步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/adobe/brackets/wiki/How-to-write-extensions#creating-an-extension&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;创建&lt;/a&gt;基本的插件模板。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/adobe/brackets/wiki/How-to-write-extensions#wiki-common-how-tos&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;开发&lt;/a&gt;插件并&lt;a href=&quot;https://github.com/adobe/brackets/wiki/How-to-write-extensions#testingdebugging-workflow&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;调试&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/adobe/brackets/wiki/How-to-write-extensions#publishing-extensions&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;打包并发布&lt;/a&gt;插件以供其他人使用&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;通过以上链接阅读这些章节的详细内容！&lt;/p&gt;
&lt;h2 id=&quot;创建插件&quot;&gt;创建插件&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;点击Brackets的“帮助&amp;gt;显示插件目录”打开放置插件的文件夹。&lt;/li&gt;
&lt;li&gt;插件文件夹的“user”文件夹，并以“插件的名称”为文件夹名创建一个新的文件夹，再在新建的文件夹中新建main.js文件。&lt;/li&gt;
&lt;li&gt;为了快速开始，可以复制&lt;a href=&quot;https://github.com/adobe/brackets/wiki/Simple-%22Hello-World%22-extension&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Simple “Hello World” extension&lt;/a&gt;或[已存在的插件][&lt;a href=&quot;https://github.com/adobe/brackets/wiki/Brackets-Extensions]，以开发相似的功能。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/adobe/brackets/wiki/Brackets-Extensions]，以开发相似的功能。&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;如果你对Brackets有任何建议，可以发送到&lt;a href=&quot;https://groups.google.com/forum/#!forum/brackets-dev&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;brackets-dev Google group&lt;/a&gt;或&lt;a href=&quot;http://freenode.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;#brackets IRC channel on freenode，Brackets&lt;/a&gt;会尽早给予反馈（可能其他人也会与你有相同的想法）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;*注意：因为通过Brackets的插件管理器很容易删除正在开发的插件，所以更安全的方式是把插件文件夹新建在Brackets安装目录下的src/extensions/dev目录下。可通过修改权限保证文件夹是可写的，or by &lt;a href=&quot;https://github.com/adobe/brackets/wiki/How-to-Hack-on-Brackets&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cloning the Brackets source&lt;/a&gt; and using that copy.&lt;/p&gt;
&lt;h2 id=&quot;测试或调试&quot;&gt;测试或调试&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;编辑main.js文件。&lt;/li&gt;
&lt;li&gt;保存文件并通过Brackets的”Debug&amp;gt;Reload Brackets”重启Brackets，以进行测试。&lt;/li&gt;
&lt;li&gt;通过Brackets的”Debug&amp;gt;Show Developer Tools”（依赖于Chrome浏览器），并可使用Chrome浏览器的控制台。&lt;ul&gt;
&lt;li&gt;在首次打开Developer Tools时，必须设置为&lt;a href=&quot;https://groups.google.com/forum/?fromgroups=#!topic/brackets-dev/E5iqcD8VqD4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;禁用缓存&lt;/a&gt;，否则在Developer Tools打开的状态下重新加载Brackets，不能反映出插件修改之后的变化。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;查看&lt;a href=&quot;https://github.com/adobe/brackets/wiki/Debugging-Brackets&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Debugging Brackets&lt;/a&gt;获取更完善描述。&lt;/p&gt;
&lt;p&gt;还可以为插件编写单元测试。&lt;/p&gt;
&lt;h2 id=&quot;发布插件&quot;&gt;发布插件&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;向main.js所在的目录中添加&lt;a href=&quot;https://github.com/adobe/brackets/wiki/Extension-package-format#packagejson-format&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;package.json&lt;/a&gt;文件。&lt;/li&gt;
&lt;li&gt;打包整个插件目录为ZIP格式（更快捷的使用GitHub的“Download ZIP”按钮下载ZIP包）或通过命令git archive —format zip -o yourextension.zip master生成ZIP包。&lt;/li&gt;
&lt;li&gt;通过上传ZIP包到&lt;a href=&quot;https://brackets-registry.aboutweb.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Brackets Extension Registry&lt;/a&gt;，以发布插件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;更多信息，参见&lt;a href=&quot;https://github.com/adobe/brackets/wiki/Extension-Registry-Help&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Extension Registry Help&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&quot;常见操作&quot;&gt;常见操作&lt;/h2&gt;&lt;h3 id=&quot;使用模块&quot;&gt;使用模块&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;从插件的文件夹树中加载模块，使用require()方法，传入相对于插件根目录的相对路径做为参数。&lt;/li&gt;
&lt;li&gt;加载Brackets的核心模块，使用brackets.getModule()方法，传入相对于Brackets的src目录的相对路径做为参数。&lt;/li&gt;
&lt;li&gt;不能到其他插件中加载模块（暂时还不支持）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;也可以插件中使用其他的文件，例如下文的“Load a CSS file”。&lt;/p&gt;
&lt;h3 id=&quot;添加菜单项与键盘快捷键&quot;&gt;添加菜单项与键盘快捷键&lt;/h3&gt;&lt;p&gt;查看&lt;a href=&quot;https://github.com/adobe/brackets/wiki/Simple-%22Hello-World%22-extension&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Simple “Hello World” extension&lt;/a&gt;代码示例。&lt;/p&gt;
&lt;p&gt;对于任何一个新的行为，都要通过CommandManager.resiger()方法注册一个Command以实现它。Command通过Command Id（字符串类型）映射到实现行为的函数。使用包命名的方式为Command Id命名（例如：myorg.myextendsion.mycommand）以避免与其他插件冲突。（参见：&lt;a href=&quot;https://github.com/adobe/brackets/wiki/Brackets%20Development%20How%20Tos#commands&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;higher-level overview of command architecture&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;添加菜单项:&lt;/em&gt; 通过Menus.getMenu()方法，传入Menus.AppMenuBar常量（当前包含FILE_MENU，EDIT_MENU, VIEW_MENU, NAVIGATE_MENU或HELP_MENU），获取顶级菜单。再通过theMenu.addMenuItem()方法，传入要执行的Command Id以添加菜单项。这样就把菜单项与Command关联起来，Command被创建后，它的名称将被显示为菜单项标签。&lt;/p&gt;
&lt;p&gt;约定，调用addMenuItems()方法的同时为Command创建键盘快捷键。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 获取顶级的菜单&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; editorMenu = Menus.getMenu(Menus.AppMenuBar.EDIT_MENU);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 以包命名风格命名Command Id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; commandId = &lt;span class=&quot;string&quot;&gt;&quot;com.wanggit.commandId&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 注册Command&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CommandManager.register(&lt;span class=&quot;string&quot;&gt;&quot;Custom Command&quot;&lt;/span&gt;, commandId, customFunction);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 添加菜单项，并指菜单项执行commandId的命令，快捷键为Ctrl-Shift-O&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;editorMenu.addMenuItem(commandId, &lt;span class=&quot;string&quot;&gt;&quot;Ctrl-Shift-O&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;添加上下文菜单项:&lt;/em&gt; 通过Menus.getContextMenu()方法，传入Menus.ContextMenuIds常量（目前包含EDITOR_MENU, INLINE_EDITOR_MENU, PROJECT_MENU或WORKING_SET_MENU），可获取上下文菜单。通过theContextMenu.addMenuItem()方法，传入要执行的Command Id以添加上下文菜单项，上下文菜单项标签的显示与菜单项相同。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 获取编辑器的上下文菜单&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; contextMenu = Menu.getContextMenu(Menus.ContextMenuIds.EDITOR_MENU);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 省略Command的定义&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 添加上下文菜单，并指定要执行的Command，指定快捷键&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;contextMenu.addMenuItem(commandId, &lt;span class=&quot;string&quot;&gt;&quot;Ctrl-Shift-L&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;添加菜单分隔线:&lt;/em&gt; 依据以上的说明获取顶级菜单或上下文菜单，再通过theMenu.addMenuDivider()添加菜单分隔线。这个方法总要把分隔线添加到菜单当前状态的最后一个位置。通过传入first与last参数，指分隔线的位置。另外，还可以通过传入before或after与相对那个菜单的Command Id，以指定分隔线显示的某菜单项之前或之后。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 添加一个分隔线到菜单当前状态的最后一个位置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;menu.addMenuDivider();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 添加到最前面，相关参数还有FIRST,LAST,BEFORE,AFTER&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;menu.addMenuDivider(Menus.FIRST);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 在Commands.EDIT_FIND命令对应的菜单前添加分隔线&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;menu.addMenuDivider(Menus.before, Commands.EDIT_FIND);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;添加快捷键:&lt;/em&gt; 通过KeyBindingManager.addBinding()方法，传入快捷键要执行的Command Id与快捷键组合，可以在不关联菜单项的情况下新建快捷键。务必在Brackets Shortcuts页面查看那些快捷键是没被占用，并把自定义的快捷键添中到此页面列表中。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CommandManager.register(&lt;span class=&quot;string&quot;&gt;&quot;Handler Enter&quot;&lt;/span&gt;, commandId, handlerEnter);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;KeyBindingManager.addBinding(commandId, &lt;span class=&quot;string&quot;&gt;&quot;Ctrl-Enter&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;linux&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过拒绝(decline)键盘事件，并允许其他功能处理这个键盘事件，那么就一定要在Command的执行方法中返回一个已reject()的$.Promise对象。（如果想要光标在某个位置时重写Enter的事件，那么这就非常有用处）（此功能在Sprint 18及以上的版本有效）。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; commandId = &lt;span class=&quot;string&quot;&gt;&quot;wanggit.test&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 捕捉Enter事件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;handlerEnter&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&quot;Handler Enter&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 创建Deferred对象&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; deferred = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; $.Deferred();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 拒绝Enter事件，在调用reject方法之后，并返回$.Promise对象，那么此时Enter事件，还可以被其他功能捕捉。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    deferred.reject();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 返回$.Promise对象。如果不返回一个已调用过reject方法的$.Promise对象，那么其他功能就不能再捕捉到Enter事件了。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; deferred.promise();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CommandManager.register(&lt;span class=&quot;string&quot;&gt;&quot;Handler Enter&quot;&lt;/span&gt;, commandId, handlerEnter);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 绑定键盘事件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;KeyBindingManager.addBinding(commandId, &lt;span class=&quot;string&quot;&gt;&quot;Enter&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;linux&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;添加新UI元素&quot;&gt;添加新UI元素&lt;/h3&gt;&lt;p&gt;向Edtior的下面添加Panel:首先Panel要添加.bottom-panel，具体可以参见JSLint bottom-panel.html的例子。通过PanelManager.createBottomPanel(“yourExtension.name”, $(panelHtml))可以在状态栏之上新建一个Panel。You may see Resizer.makeResizable()and manual DOM insertion of panels in some extensions but this parctice is being phased out since the introduction of PanelManager.&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/adobe/brackets/wiki/如何开发插件&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何开发插件&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;有个功能Brackets一直没有, 也没有找到相关的插件, 所以转载官方的这篇关于&lt;code&gt;如何开发Brackets插件&lt;/code&gt;的wiki, 方便自己有空的时候来学习下. &lt;/p&gt;
    
    </summary>
    
      <category term="TextEditor" scheme="http://huyaohui.com/categories/TextEditor/"/>
    
    
      <category term="Branckets" scheme="http://huyaohui.com/tags/Branckets/"/>
    
      <category term="Plugin" scheme="http://huyaohui.com/tags/Plugin/"/>
    
      <category term="TextEditor" scheme="http://huyaohui.com/tags/TextEditor/"/>
    
  </entry>
  
  <entry>
    <title>Branckets 常用插件说明</title>
    <link href="http://huyaohui.com/2015/11/28/Branckets-%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%E8%AF%B4%E6%98%8E/"/>
    <id>http://huyaohui.com/2015/11/28/Branckets-常用插件说明/</id>
    <published>2015-11-28T10:33:19.000Z</published>
    <updated>2016-01-03T02:58:06.000Z</updated>
    
    <content type="html">&lt;p&gt;上面对Branckets做了一个简单的介绍&lt;a href=&quot;/2015/11/28/Branckets新一代Web开发编码神器/&quot;&gt;-&amp;gt;Branckets新一代Web开发编码神器&lt;/a&gt;, 这里我们来说说广大的开发者为Branckets开发的强大插件, 有了它们Branckets, 简直如虎添翼, 分分钟把集成IDE秒成渣. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;UTF8_Converter&quot;&gt;UTF8 Converter&lt;/h2&gt;&lt;p&gt;这个什么好解释的咯, 就只是UTF8.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Armacryss/brackets-utf8-converter&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Armacryss/brackets-utf8-converter&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Shizimily_Multi-Encoding_for_Brackets&quot;&gt;Shizimily Multi-Encoding for Brackets&lt;/h2&gt;&lt;p&gt;Brackets默认是不支持GBK编码的, 特别是在windows上GBK编码是文本的默认编码, 虽然自己知道可以更改编码, 但是如果要协同工作的话, 碰上了不同编码的情况还是很蛋痛的&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Hiromi-Ayase/brackets-shizimily-multiencoding&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Hiromi-Ayase/brackets-shizimily-multiencoding&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Brackets_Beautify&quot;&gt;Brackets Beautify&lt;/h2&gt;&lt;p&gt;代码美化插件, 这个自然是必装的咯, 支持 HTML, CSS, 和 JavaScrip 三种文件的格式化.&lt;/p&gt;
&lt;p&gt;使用方法: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Edit &amp;gt; Beautify&lt;/li&gt;
&lt;li&gt;Windows/Linux: Ctrl-Alt-B&lt;/li&gt;
&lt;li&gt;Windows: Ctrl-Shift-L&lt;/li&gt;
&lt;li&gt;MacOSX: Cmd-Shift-L&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/brackets-beautify/brackets-beautify&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/brackets-beautify/brackets-beautify&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Brackets_Autoprefixer&quot;&gt;Brackets Autoprefixer&lt;/h2&gt;&lt;p&gt;使用CanIUse上的css3数据，自动补全css3前缀和浏览器兼容，不过可能有些新了。有一些旧版本的浏览器会被抛弃掉&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mikaeljorhult/brackets-autoprefixer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/mikaeljorhult/brackets-autoprefixer&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Brackets_Icons&quot;&gt;Brackets Icons&lt;/h2&gt;&lt;p&gt;顾名思义, 按照文件的扩展名, 给它安排相应的图标&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2YDcNhFXXXXcgXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ivogabe/Brackets-Icons&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/ivogabe/Brackets-Icons&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Brackets_Document_Toolbar(with_tabs)&quot;&gt;Brackets Document Toolbar(with tabs)&lt;/h2&gt;&lt;p&gt;Tab栏, 说来也奇怪为什么官方版本不支持这个功能. 随便一提, 早期的版本也不支持代码折叠, 貌似是从1.5开始支持了. 由此推断以后或许会支持这个功能.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2htIPhFXXXXb5XXXXXXXXXXXX_!!1134915854.gif&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dnbard/brackets-documents-toolbar&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/dnbard/brackets-documents-toolbar&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;brackets-quick-search&quot;&gt;brackets-quick-search&lt;/h2&gt;&lt;p&gt;选择文本后高亮显示相同的文本, 和Brackets Document Toolbar(with tabs), 官方同样不支持这个功能&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB27pxqhVXXXXX9XXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/enturn/brackets-quick-search&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/enturn/brackets-quick-search&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;BracketstoIX_extension&quot;&gt;BracketstoIX extension&lt;/h2&gt;&lt;p&gt;对Brackets增加的一些扩展功能&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2XDpdhVXXXXcoXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/apptoix/bracketstoix&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/apptoix/bracketstoix&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;brackets-minimap&quot;&gt;brackets-minimap&lt;/h2&gt;&lt;p&gt;你使用过Submit的话估计你一定会对编辑框右侧的那个代码地图印象会相当深吧, brackets当然也会支持这种功能咯, 只是不是官方支持的而已, 不过也没关系, 使用起来是一样一样的. &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2l3gNhFXXXXcrXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zorgzerg/brackets-minimap&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/zorgzerg/brackets-minimap&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Brackets_Terminal&quot;&gt;Brackets Terminal&lt;/h2&gt;&lt;p&gt;让你能太编码的过程很方便的调用控制台命令, 而不用切换到控制台, 简直爽有木有&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2TIkThFXXXXbyXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/artoale/brackets-terminal&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/artoale/brackets-terminal&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;brackets-sftp-upload&quot;&gt;brackets-sftp-upload&lt;/h2&gt;&lt;p&gt;代码时时同步到线上服务器, 免去了启动ftp的时间, 很方便&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2SUAEhFXXXXabXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/bigeyex/brackets-sftp-upload&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/bigeyex/brackets-sftp-upload&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Markdown_Preview&quot;&gt;Markdown Preview&lt;/h2&gt;&lt;p&gt;对于经常需要写Markdown的你来说, 是不是需要时不时的预览下呢, 那么有了这个插件, 你就不用再进行编译和切换到浏览器查看了, 直接在编辑器内完成一切操作, 超nice.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2VD.2hFXXXXXOXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/gruehle/MarkdownPreview&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/gruehle/MarkdownPreview&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Extract_for_Brackets&quot;&gt;Extract for Brackets&lt;/h2&gt;&lt;p&gt;Adobe 官方插件, 可以预览PSD，点击图层，然后输入css属性，看到没有，图层的样式自动跑出来啦，有木有有木有？！width、height、left、top、color、background-color、opacity应有尽有，还能测量两个元素之间的距离，再也不用到PS里手工测量和偷瞄CSS Hat的代码啦！如果是文字图层，还可以点击copy text，文字就到粘贴板上啦。如果是普通图层，填写background或img的时候，还会自动切图到你的文件夹耶！要不要这么霸气呀？！&lt;br&gt;(PS: 当然对于大陆用户来说相当然并卵的插件o(╯□╰)o, 不支持离线, 而且最大只支持15MB, 我就只能呵呵)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB29Qw1hFXXXXXCXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://helpx.adobe.com/creative-cloud/help/extract-for-brackets.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://helpx.adobe.com/creative-cloud/help/extract-for-brackets.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;QuickDocsJS&quot;&gt;QuickDocsJS&lt;/h2&gt;&lt;p&gt;快速查看javascript帮助文档&lt;br&gt;使用: CMD+K&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB25Ho1hFXXXXaaXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Wikunia/brackets-QuickDocsJS&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Wikunia/brackets-QuickDocsJS&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;QuickDocsPHP&quot;&gt;QuickDocsPHP&lt;/h2&gt;&lt;p&gt;快速查看PHP帮助文档&lt;br&gt;使用: CMD+K&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2dOxqhVXXXXahXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Wikunia/brackets-QuickDocsPHP&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Wikunia/brackets-QuickDocsPHP&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;brackets-jshint&quot;&gt;brackets-jshint&lt;/h2&gt;&lt;p&gt;javascript代码提示, 方便第一时间发现你编码时不规范的地方&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cfjedimaster/brackets-jshint&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/cfjedimaster/brackets-jshint&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;brackets-csslint&quot;&gt;brackets-csslint&lt;/h2&gt;&lt;p&gt;css代码提示, 方便第一时间发现你编码时不规范的地方&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cfjedimaster/brackets-csslint&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/cfjedimaster/brackets-csslint&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Brackets-Git&quot;&gt;Brackets-Git&lt;/h2&gt;&lt;p&gt;集成Git到你的Brackets中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2tVgPhFXXXXb8XXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Main panel of Brackets Git&lt;br&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2SPZZhFXXXXaCXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;Main panel of Brackets Git&quot;&gt;&lt;/p&gt;
&lt;p&gt;History panel of Brackets Git&lt;br&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2hsMVhFXXXXaYXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;History panel of Brackets Git&quot;&gt;&lt;/p&gt;
&lt;p&gt;Details view for a specific commit&lt;br&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2g7UKhFXXXXcZXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;Details view for a specific commit&quot;&gt;&lt;/p&gt;
&lt;p&gt;Commit dialog&lt;br&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB20qEFhFXXXXafXpXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;Commit dialog&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zaggino/brackets-git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/zaggino/brackets-git&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;html-designer&quot;&gt;html-designer&lt;/h2&gt;&lt;p&gt;一个掉渣天的功能, 虽然并不新鲜, 但是能把他集成到Brackets中还是得费很大功夫的, 必须致敬.&lt;br&gt;使用拖拽的方式进行html布局, 详情请看下面GitHub&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB2qzs6hFXXXXXkXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/swmitra/html-designer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/swmitra/html-designer&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;FuncDocr&quot;&gt;FuncDocr&lt;/h2&gt;&lt;p&gt;快速生成文档注释, 相当方便, 比Sublime的那个参见还多了一个选择类型的功能, 虽然有点然并卵, 但是还是相当赞的&lt;br&gt;支持 javascript and php&lt;br&gt;使用方法: &lt;code&gt;/**&lt;/code&gt; + Enter&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i4/1134915854/TB213QUhFXXXXa2XXXXXXXXXXXX_!!1134915854.gif&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/wikunia/brackets-funcdocr&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wikunia/brackets-funcdocr&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Emmet_plugin_for_Brackets_editor&quot;&gt;Emmet plugin for Brackets editor&lt;/h2&gt;&lt;p&gt;HTML, CSS 快速编辑插件, 想必大家都知道的, 这里就不过多阐述, 以后可能会单独另起篇幅来说明. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://emmet.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://emmet.io/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/emmetio/brackets-emmet&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/emmetio/brackets-emmet&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;PHP-SmartHints&quot;&gt;PHP-SmartHints&lt;/h2&gt;&lt;p&gt;一个十分好用的PHP代码提示, 补全插件&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2Hi.RhFXXXXbQXXXXXXXXXXXX_!!1134915854.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Brackets-PHP/Brackets-PHP-SmartHints&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Brackets-PHP/Brackets-PHP-SmartHints&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Bootstrap_Snippets_for_Brackets&quot;&gt;Bootstrap Snippets for Brackets&lt;/h2&gt;&lt;p&gt;快速生成Bootstrap代码, 详细使用方法查看下面GitHub地址&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2QK7RhFXXXXbVXXXXXXXXXXXX_!!1134915854.gif&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/acbarbosa1964/acb-bootstrap-snippets&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/acbarbosa1964/acb-bootstrap-snippets&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;更多优秀插件&quot;&gt;更多优秀插件&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://ingorichter.github.io/BracketsExtensionTweetBot/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://ingorichter.github.io/BracketsExtensionTweetBot/&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;上面对Branckets做了一个简单的介绍&lt;a href=&quot;/2015/11/28/Branckets新一代Web开发编码神器/&quot;&gt;-&amp;gt;Branckets新一代Web开发编码神器&lt;/a&gt;, 这里我们来说说广大的开发者为Branckets开发的强大插件, 有了它们Branckets, 简直如虎添翼, 分分钟把集成IDE秒成渣. &lt;/p&gt;
    
    </summary>
    
      <category term="TextEditor" scheme="http://huyaohui.com/categories/TextEditor/"/>
    
    
      <category term="Branckets" scheme="http://huyaohui.com/tags/Branckets/"/>
    
      <category term="Plugin" scheme="http://huyaohui.com/tags/Plugin/"/>
    
      <category term="TextEditor" scheme="http://huyaohui.com/tags/TextEditor/"/>
    
  </entry>
  
  <entry>
    <title>Branckets新一代Web开发编码神器</title>
    <link href="http://huyaohui.com/2015/11/28/Branckets%E6%96%B0%E4%B8%80%E4%BB%A3Web%E5%BC%80%E5%8F%91%E7%BC%96%E7%A0%81%E7%A5%9E%E5%99%A8/"/>
    <id>http://huyaohui.com/2015/11/28/Branckets新一代Web开发编码神器/</id>
    <published>2015-11-28T08:27:33.000Z</published>
    <updated>2016-01-03T02:58:18.000Z</updated>
    
    <content type="html">&lt;p&gt;Brackets是一款强大免费的Web前端开发神器, 对于前端开发来说用起来特别方便, 第一次在YouTube上看到, 当时就眼前一亮, 还以为Sublime的一个什么漂亮主题呢, 最后反复回去查看才发现不是, 随下载下来使用, 感觉得它用起来特别舒服, 界面简洁, 敲代码感觉软软的, 交互感觉也挺好, 当前最新版, 比早期我使用的1.0预览版好太多了, 总得来说比Sublime要好, 现在已经彻底弃了Sublime了, 喜欢轻量级文本编辑器的小伙伴可以尝试下, 绝对物超所值.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;Brackets 是一款使用 HTML，CSS，JavaScript 创建的开源的针对 Web 开发的编辑器。你可能在宁皓网的视频里见过这款编辑器。实时预览，快速编辑，跨平台，可扩展，开源，让 Brackets 成为一款非常优秀的编辑器。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2PvwuhFXXXXbhXpXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt;&lt;p&gt;打开 Brackets.io，点击 Download Brackets ，网页会根据你的操作系统，为你提供对应版本的 Brackets 编辑器。你也可以在所有发布版本里面自己来选择。如果是自己选择下载，需要注意软件的格式，一般 .dmg 是用在 Mac 系统上的软件，.msi 可以在 Windows 系统上安装。&lt;/p&gt;
&lt;h2 id=&quot;切换语言&quot;&gt;切换语言&lt;/h2&gt;&lt;p&gt;Brackets 支持多种语言，默认安装以后界面上是英文的，你可以选择自己喜欢的语言。&lt;/p&gt;
&lt;p&gt;Debug -&amp;gt; Switch Language&lt;br&gt;点开下拉菜单，选择你想要的语言&lt;br&gt;点击 Reload Brackets&lt;br&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2ZtMWhFXXXXX6XXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;打开目录&quot;&gt;打开目录&lt;/h2&gt;&lt;p&gt;一般开始一个项目，你可以去新建一个目录，把项目所需求的文件放在这个目录下面，Brackets 支持打开整个目录，通过编辑器边栏上的树形结构，可以方便的管理项目文件 。&lt;/p&gt;
&lt;p&gt;方法一：打开菜单，文件 -&amp;gt; 打开目录&lt;br&gt;方法二：使用快捷键：alt + command + O&lt;br&gt;这个目录的结构会显示在编辑器的边栏上，点开对应的目录，会继续显示这个目录里所包含的东西。你也可以在不需要边栏的时候隐藏它（视图 -&amp;gt; 隐藏边栏 或 shift + command + H）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2lRsohFXXXXcdXpXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;快速导航&quot;&gt;快速导航&lt;/h2&gt;&lt;p&gt;使用快速导航，可以快速找到项目里的文件。&lt;/p&gt;
&lt;p&gt;方法一：打开菜单：导航 -&amp;gt; 打开快速导航&lt;br&gt;方法二：使用快捷键：shift + command + O&lt;br&gt;直接输入想要找的文件名称，Brackets 会给你一个包含这个文件名的文件列表，点击对应的文件，可以打开这个文件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2wPAWhFXXXXabXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;工作区&quot;&gt;工作区&lt;/h2&gt;&lt;p&gt;打开的文件，会在 工作区 里面显示出来，点击对应的文件，可以快速地在不同的文件之间切换。已经修改的文件没有保存，在文件名称的左边会显示一个 圆点。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB2csE0hFXXXXXGXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;实时预览&quot;&gt;实时预览&lt;/h2&gt;&lt;p&gt;方法一：打开菜单：文件 -&amp;gt; 实时预览&lt;br&gt;方法二：使用快捷键：alt + command + P&lt;br&gt;方法三：点击主界面右上角的 闪电 图标&lt;br&gt;Brackets 会为你打开一个 Chrome 浏览器的窗口，实时显示正在编辑的文档。也就是，你现在可以去修改文档里的内容，或者文档所链接的样式表还有脚本文件，所做的修改会实时的在浏览器中显示。注意，在实时预览时，你不能使用浏览器的开发者工具，一但打开开发者工具，实时预览就会失效了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i2/1134915854/TB27YAOhFXXXXbLXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果不特别指定，Brackets 会使用内置的 Web Server 实时预览文件，你也可以去为实时预览指定一个 Web Server ，比如你可能想实时预览 PHP 文件，那么，你可以使用搭建在本地电脑上的开发环境，把项目目录放在你自己的服务器的目录里面，比如 semantic 这个目录的下面，这样，使用 localhost/semantic 这个地址可以访问到你的项目，那么你可以把这个地址做为实时预览的基本地址。&lt;/p&gt;
&lt;p&gt;打开 文件 -&amp;gt; 项目设置，然后输入预览的地址，例如：&lt;code&gt;http://localhost/semantic&lt;/code&gt;，这样你在使用实时预览的时候，会基于这个地址去预览文件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i1/1134915854/TB2ly.1hFXXXXXsXXXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;快速编辑&quot;&gt;快速编辑&lt;/h2&gt;&lt;p&gt;方法一：打开菜单：导航 -&amp;gt; 快速编辑&lt;br&gt;方法二：使用快捷键：command + E&lt;br&gt;Brackets 允许我们快速去编辑 HTML 或者 CSS 文档。快速编辑 HTML 文档，可以去为选中的元素快速添加或者修改样式。编辑器会给你显示出应用在所选中元素上的所有的样式，选中对应的样式，直接去修改，这样你就不需要再去找到对应的样式表，对应的地方去修改了。快速编辑同样适用 CSS 文档，比如放在颜色属性上，会显示一个颜色选择器，或者动画属性上，会显示一个可以调整动画曲线的工具。非常非常方便。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2d0wwhFXXXXbeXpXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;扩展&quot;&gt;扩展&lt;/h2&gt;&lt;p&gt;你可以为 Brackets 编辑安装扩展来增加它的功能。 在 Brackets Extension Registry 里可以查看可用的扩展，在这里，你也可以提交自己编写的扩展。&lt;/p&gt;
&lt;p&gt;方法一：文件 -&amp;gt; 扩展管理器&lt;br&gt;方法二：点击主界面右上角的积木样式的图标（闪电图标下面的那个）&lt;br&gt;打开 扩展管理器 以后，在 可获取 这个选项卡里面，可以找到想要使用的扩展，点击 安装，可以安装这个扩展。打开 已安装 这个选项卡，可以管理已经安装在编辑器上的扩展，在这里，你可以升级或移除这些扩展。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.alicdn.com/imgextra/i3/1134915854/TB2lhUqhFXXXXb2XpXXXXXXXXXX_!!1134915854.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;常用扩展&quot;&gt;常用扩展&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;/2015/11/28/Branckets-常用插件说明/&quot;&gt;Branckets 常用插件说明&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;&lt;p&gt;如果你还在用 Dreamweaver 开发 Web 项目，暂时把它放在一边，来试试 Brackets. (PS: 嘻嘻..)&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://ninghao.net/blog/1405&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Web 设计与开发必备工具：Brackets 编辑器&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Brackets是一款强大免费的Web前端开发神器, 对于前端开发来说用起来特别方便, 第一次在YouTube上看到, 当时就眼前一亮, 还以为Sublime的一个什么漂亮主题呢, 最后反复回去查看才发现不是, 随下载下来使用, 感觉得它用起来特别舒服, 界面简洁, 敲代码感觉软软的, 交互感觉也挺好, 当前最新版, 比早期我使用的1.0预览版好太多了, 总得来说比Sublime要好, 现在已经彻底弃了Sublime了, 喜欢轻量级文本编辑器的小伙伴可以尝试下, 绝对物超所值.&lt;/p&gt;
    
    </summary>
    
      <category term="TextEditor" scheme="http://huyaohui.com/categories/TextEditor/"/>
    
    
      <category term="Branckets" scheme="http://huyaohui.com/tags/Branckets/"/>
    
      <category term="TextEditor" scheme="http://huyaohui.com/tags/TextEditor/"/>
    
  </entry>
  
  <entry>
    <title>WebApp HTML5 Canvas 压缩上传图片</title>
    <link href="http://huyaohui.com/2015/11/15/WebApp-Canvas-%E5%8E%8B%E7%BC%A9%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/"/>
    <id>http://huyaohui.com/2015/11/15/WebApp-Canvas-压缩上传图片/</id>
    <published>2015-11-15T09:53:38.000Z</published>
    <updated>2016-01-03T03:11:05.000Z</updated>
    
    <content type="html">&lt;p&gt;关于H5图片上传一直是一个非常蛋痛的问题, 以至于现在都没有找到一个非常好的解决方案, 去年的年初尝试&lt;a href=&quot;https://github.com/gokercebeci/canvasResize&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gokercebeci/canvasResize&lt;/a&gt;这个方案勉强解决了这个问题, 但是并不算是十分理想, iOS上仍然是拍照后会莫名旋转, 曾经在GitHub上看到有位大神谢了一个库是专门处理这个问题的, 自己试了下貌似并不行, 也不知道现在是个什么情况了, 有空再去看下(但愿会有空吧), 这里提供一个Jquery版本的图片压缩上传的方案. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;代码实现&quot;&gt;代码实现&lt;/h2&gt;&lt;p&gt;底层代码是通过Canvas进行了压缩, 最终返回base64编码的字符串, H5的前端压缩除了Canvas应该没有更便捷的方法了吧, 嘻嘻..&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;javascript:;&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;change_avatar&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 这里需要写两个input代码才能执行, 原因密 --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;photo&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;display: none;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;photo&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;display: none;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;js/jquery.exif.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;value&quot;&gt;&quot;js/jquery.canvasResize.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;javascript&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$(&lt;span class=&quot;string&quot;&gt;&#39;#change_avatar&#39;&lt;/span&gt;).click(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $(&lt;span class=&quot;string&quot;&gt;&#39;input[name=photo]&#39;&lt;/span&gt;).trigger(&lt;span class=&quot;string&quot;&gt;&#39;click&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$(&lt;span class=&quot;string&quot;&gt;&#39;input[name=photo]&#39;&lt;/span&gt;).change(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;e&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; file = e.target.files[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// CANVAS RESIZING&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $.canvasResize(file, &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        width: &lt;span class=&quot;number&quot;&gt;150&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        height: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        crop: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        quality: &lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        callback: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;base64_img, width, height&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $.post(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                settings.jsonp_Server + &lt;span class=&quot;string&quot;&gt;&#39;/user/upload_image&#39;&lt;/span&gt;, &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    phone_num: phone_num,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    base64_img: base64_img,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    dataType: &lt;span class=&quot;string&quot;&gt;&quot;jsonp&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;data&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    alert(&lt;span class=&quot;string&quot;&gt;&#39;上传成功&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;json&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/gokercebeci/canvasResize&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gokercebeci/canvasResize&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/think2011/LocalResizeIMG&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;think2011/LocalResizeIMG&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://a3147972.blog.51cto.com/2366547/1554698&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;移动端图片上传方法【更好的兼容安卓IOS和微信】&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://my.oschina.net/hzplay/blog/160806&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML5+Canvas手机拍摄，本地压缩上传图片，案例实测报告&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;关于H5图片上传一直是一个非常蛋痛的问题, 以至于现在都没有找到一个非常好的解决方案, 去年的年初尝试&lt;a href=&quot;https://github.com/gokercebeci/canvasResize&quot;&gt;gokercebeci/canvasResize&lt;/a&gt;这个方案勉强解决了这个问题, 但是并不算是十分理想, iOS上仍然是拍照后会莫名旋转, 曾经在GitHub上看到有位大神谢了一个库是专门处理这个问题的, 自己试了下貌似并不行, 也不知道现在是个什么情况了, 有空再去看下(但愿会有空吧), 这里提供一个Jquery版本的图片压缩上传的方案. &lt;/p&gt;
    
    </summary>
    
      <category term="HTML5" scheme="http://huyaohui.com/categories/HTML5/"/>
    
    
      <category term="HTML5" scheme="http://huyaohui.com/tags/HTML5/"/>
    
      <category term="Web" scheme="http://huyaohui.com/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>Cordova plugins explain</title>
    <link href="http://huyaohui.com/2015/11/14/Cordova-plugins-explain/"/>
    <id>http://huyaohui.com/2015/11/14/Cordova-plugins-explain/</id>
    <published>2015-11-14T14:56:31.000Z</published>
    <updated>2016-01-03T02:58:28.000Z</updated>
    
    <content type="html">&lt;p&gt;Cordova插件为我们提供了一个本地化的API, 供javascript调用, 能使我们很方便的使用javascript使用NativeApp的一些特性. 这里主要是记录一些比较常用切比较调用比较简单插件, 比较复杂的会另起篇幅进行说明. &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;各种loading(菊花)&quot;&gt;各种loading(菊花)&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/pbernasconi/cordova-progressIndicator&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pbernasconi/cordova-progressIndicator&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;详细文档: &lt;a href=&quot;http://paolobernasconi.com/cordova-progressIndicator/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://paolobernasconi.com/cordova-progressIndicator/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Install:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add org.pbernasconi.progressindicator&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# or&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;phonegap &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; plugin add org.pbernasconi.progressindicator&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ProgressIndicator.showSimple(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ProgressIndicator.showSimpleWithLabel(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Loading...&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ProgressIndicator.showSimpleWithLabelDetail(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Loading...&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;Refreshing list&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;crosswalk引擎&quot;&gt;crosswalk引擎&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://crosswalk-project.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;crosswalk&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;webview引擎, 主要给安卓4.0~4.3提供一个统一的webview运行环境&lt;/p&gt;
&lt;p&gt;Install&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add cordova-plugin-crosswalk-webview&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cordova build android&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// outputs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/path/to/hello/platforms/android/build/outputs/apk/android-x86-debug.apk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/path/to/hello/platforms/android/build/outputs/apk/android-armv7-debug.apk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;控制台显示console-log&quot;&gt;控制台显示console.log&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cordova-plugin-console&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;apache/cordova-plugin-console&lt;/a&gt;&lt;br&gt;没有安装此插件是无法输出javascript控制台日志的, 仅用于调试使用, 一般发布都会删除此插件&lt;/p&gt;
&lt;p&gt;Install:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add cordova-plugin-console&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.addEventListener(&lt;span class=&quot;string&quot;&gt;&quot;deviceready&quot;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&quot;console.log works well&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.exception&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.warn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.debug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.assert&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.dir&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.dirxml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.timeEnd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.table&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Partially supported Methods&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.group&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.groupCollapsed&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Not supported Methods&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.clear&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.trace&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.groupEnd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.timeStamp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.profileEnd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.count&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;图片多选&quot;&gt;图片多选&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/wymsee/cordova-imagePicker&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wymsee/cordova-imagePicker&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Install:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;phonegap plugin add https://github.com/wymsee/cordova-imagePicker.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# or&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add https://github.com/wymsee/cordova-imagePicker.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.imagePicker.getPictures(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;results&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// success&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; results.length; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;Image URI: &#39;&lt;/span&gt; + results[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;error&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;Error: &#39;&lt;/span&gt; + error);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// options&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        maximumImagesCount: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        width: &lt;span class=&quot;number&quot;&gt;800&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;微信分享&quot;&gt;微信分享&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/xu-li/cordova-plugin-wechat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;xu-li/cordova-plugin-wechat&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;a href=&quot;/2015/11/12/Cordova-微信分享插件使用详记/&quot;&gt;Cordova 微信分享插件使用详记&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;base64编码&quot;&gt;base64编码&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/hazemhagrass/phonegap-base64&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hazemhagrass/phonegap-base64&lt;/a&gt;&lt;br&gt;warning: 依赖&lt;a href=&quot;https://github.com/apache/cordova-plugin-device&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;apache/cordova-plugin-device&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Install:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;phonegap &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; plugin add org.apache.cordova.device&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;phonegap &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; plugin add https://github.com/hazemhagrass/phonegap-base64.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# or&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add org.apache.cordova.device&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add https://github.com/hazemhagrass/phonegap-base64.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;deviceready&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.plugins.Base64.encodeFile(filePath, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;base64&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;file base64 encoding: &#39;&lt;/span&gt; + base64);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;二维码扫描&quot;&gt;二维码扫描&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/wildabeast/BarcodeScanner&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wildabeast/BarcodeScanner&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;照相机&quot;&gt;照相机&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cordova-plugin-camera&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;cordova-plugin-camera&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Install:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add cordova-plugin-camera&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.addEventListener(&lt;span class=&quot;string&quot;&gt;&#39;deviceready&#39;&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    navigator.camera.getPicture(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;imageURI&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// success&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementById(&lt;span class=&quot;string&quot;&gt;&#39;myImage&#39;&lt;/span&gt;).src = imageURI;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;message&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        alert(&lt;span class=&quot;string&quot;&gt;&#39;Failed because: &#39;&lt;/span&gt; + message);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// options&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        quality: &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        destinationType: Camera.DestinationType.FILE_URI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;修改图片尺寸&quot;&gt;修改图片尺寸&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/protonet/cordova-plugin-image-resizer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;protonet/cordova-plugin-image-resizer&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Install:&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin add https://github.com/protonet/cordova-plugin-image-resizer.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Use:&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.ImageResizer.resize(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        uri: imageUrl,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        folderName: &lt;span class=&quot;string&quot;&gt;&quot;Protonet Messenger&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        quality: &lt;span class=&quot;number&quot;&gt;90&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        width: &lt;span class=&quot;number&quot;&gt;120&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        height: &lt;span class=&quot;number&quot;&gt;120&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;image&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementById(&lt;span class=&quot;string&quot;&gt;&#39;myImage&#39;&lt;/span&gt;).src = image;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// failed: grumpy cat likes this function&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Cordova插件为我们提供了一个本地化的API, 供javascript调用, 能使我们很方便的使用javascript使用NativeApp的一些特性. 这里主要是记录一些比较常用切比较调用比较简单插件, 比较复杂的会另起篇幅进行说明. &lt;/p&gt;
    
    </summary>
    
      <category term="HTML5" scheme="http://huyaohui.com/categories/HTML5/"/>
    
    
      <category term="Cordova" scheme="http://huyaohui.com/tags/Cordova/"/>
    
      <category term="HTML5" scheme="http://huyaohui.com/tags/HTML5/"/>
    
      <category term="HybridApp" scheme="http://huyaohui.com/tags/HybridApp/"/>
    
  </entry>
  
</feed>
